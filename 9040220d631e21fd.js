;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="242a0768-e809-6815-84ba-7f0768e09fc5")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,272763,e=>{"use strict";var t=e.i(50454);let r=async()=>await t.axiomApiV2.get("/active-twitter-list"),s=async()=>await t.axiomApiV2.get("/twitter-settings"),a=async e=>await t.axiomApiV2.post("/update-twitter-settings",e),l=async()=>await t.axiomApiV2.get("/user-total-boosts"),o=async()=>await t.axiomApiV2.get("/num-active-twitter-accounts"),n=async e=>await t.axiomApiV2.post("/set-twitter-settings",{settings:e});e.s(["getActiveList",0,r,"getNumActiveSubscriptions",0,o,"getTwitterSettings",0,s,"getUserBoosts",0,l,"setTwitterSettings",0,n,"updateTwitterSettings",0,a])},500676,e=>{"use strict";var t=e.i(672464),r=e.i(271645),s=e.i(707716);function a(e){let{connectionType:a,url:l,queryParams:o,reconnectInterval:n=250,reconnectAttempts:i=50,retryOnError:c=!0,onOpen:u,onClose:d,onError:x,onMessage:p}=e,m=l?(0,s.buildUrlWithParams)(l,o):null,f=s.WebSocketConnectionPool.getInstance(),h=(0,r.useRef)({});h.current={onOpen:u,onClose:d,onError:x,onMessage:p};let b=(0,r.useRef)({onOpen:()=>h.current.onOpen?.(),onClose:()=>h.current.onClose?.(),onError:e=>h.current.onError?.(e),onMessage:e=>h.current.onMessage?.(e)});(0,r.useEffect)(()=>{if(m)return f.subscribe({connectionType:a,url:m,reconnectInterval:n,reconnectAttempts:i,retryOnError:c},b.current)},[a,m,n,i,c,f]);let g=(0,r.useCallback)(e=>{f.sendMessage(a,e)},[f,a]),y=(0,r.useCallback)(e=>{f.sendJsonMessage(a,e)},[f,a]),v=(0,t.useAtomValue)((0,s.getReadyStateAtom)(a)),w=m?v:s.ReadyState.CLOSED,j=w===s.ReadyState.OPEN;return{sendMessage:g,sendJsonMessage:y,readyState:w,isConnected:j}}e.s(["useWebSocketBase",()=>a])},310487,e=>{"use strict";let t=e=>{switch(e){case 0:default:return"Unknown";case 1:return"Buy More";case 2:return"First Buy";case 3:return"Sell Partial";case 4:return"Sell All";case 5:return"Add Liquidity";case 6:return"Remove Liquidity"}};function r(e){return{walletAddress:String(e[1]??""),balance:Number(e[2]??0),timestamp:Number(e[3]??0)}}function s(e){let r=String(e[6]??""),s=e[21]??"";"string"==typeof s&&s&&!s.includes("https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/")?s=`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${r}.webp`:s||(s=`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${r}.webp`);let a=Number(e[22]??18),l=Number(e[23]??0),o=Number(e[9]??0);return{transactionTime:new Date(e[1]).toString(),walletAddress:String(e[2]??""),signature:String(e[3]??""),detailedType:t(e[4]),pairAddress:String(e[5]??""),tokenAddress:r,currBalance:null,lastActiveTime:new Date(e[1]).toString(),priceCurrency:Number(e[7]??0),priceUsd:Number(e[8]??0),tokenAmount:o/10**a,totalCurrency:Number(e[10]??0),totalUsd:Number(e[11]??0),fees:Number(e[13]??0),type:String(e[14]??""),pairCreatedAt:e[15]?new Date(Number(e[15])).toString():"",averageMcBought:Number(e[16]??0),averageMcSold:Number(e[17]??0),pnlCurrency:Number(e[18]??0),tokenName:String(e[19]??""),tokenTicker:String(e[20]??""),tokenImage:String(s),tokenDecimals:a,supply:l/10**a,realProtocol:String(e[24]??""),isMigrated:!!e[25],liquidityCurrency:Number(e[26]??0),innerIndex:"number"==typeof e[29]?e[29]:null,outerIndex:"number"==typeof e[30]?e[30]:null,currency:"bnb"}}function a(e){let r=e[20]??"",s=e[5];r.includes("https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/")||(r=`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${s}.webp`);let a={transactionTime:new Date(e[0]).toString(),walletAddress:e[1],signature:e[2],detailedType:t(e[3]),pairAddress:e[4],tokenAddress:s,currBalance:null,lastActiveTime:null,priceCurrency:e[7]??0,priceUsd:e[8]??0,tokenAmount:e[9]??0,totalCurrency:e[10]??0,totalUsd:e[11]??0,fees:e[12]??0,type:e[13]??"",pairCreatedAt:e[14]?new Date(e[14]).toString():"",averageMcBought:e[15]??0,averageMcSold:e[16]??0,pnlCurrency:e[17]??0,tokenName:e[18]??"",tokenTicker:e[19]??"",tokenImage:r,tokenDecimals:e[21]??0,supply:e[22]??0,realProtocol:e[23]??"",isMigrated:e[24]??!1,liquidityCurrency:e[25]??0,innerIndex:e[26]??null,outerIndex:e[27]??null,currency:"sol"};if(e[6]){let[t,r]=e[6].split(":");a.currBalance=Number(r),a.lastActiveTime=t}return a}e.s(["convertToWalletTrackerBalanceUpdateBnb",()=>r,"convertToWalletTrackerTransaction",()=>a,"convertToWalletTrackerTransactionBnb",()=>s])},717744,e=>{"use strict";function t(e){let t=50+e%30,r=30+e%20;return[`hsl(${e%360}, ${t}%, ${r}%)`,`hsl(${(e+120)%360}, ${t}%, ${r+10}%)`,`hsl(${(e+240)%360}, ${t}%, ${r+5}%)`]}function r(e){if(!e){var r;let e;return e=(r="/images/default-friends-banner.webp").startsWith("/")?r.slice(1):r,`https://axiom-assets.sfo3.cdn.digitaloceanspaces.com/${e}`}let s=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return Math.abs(t)}(e),[a,l]=t(s),o=function(e){let r=e%4,[,s,a]=t(e);switch(r){case 0:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
            <rect x="0" y="0" width="40" height="40" fill="${s}" opacity="0.1"/>
            <line x1="0" y1="40" x2="40" y2="0" stroke="${a}" stroke-width="2" opacity="0.3"/>
          </pattern>
        </defs>
      `;case 1:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse">
            <circle cx="15" cy="15" r="3" fill="${a}" opacity="0.2"/>
          </pattern>
        </defs>
      `;case 2:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
            <rect x="10" y="10" width="15" height="15" fill="${a}" opacity="0.15"/>
            <circle cx="35" cy="35" r="8" fill="${s}" opacity="0.15"/>
          </pattern>
        </defs>
      `;default:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="100" height="20" patternUnits="userSpaceOnUse">
            <path d="M0 10 Q 25 5, 50 10 T 100 10" stroke="${a}" stroke-width="2" fill="none" opacity="0.2"/>
          </pattern>
        </defs>
      `}}(s),n=`
    <svg width="800" height="200" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="grad-${s}" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:${a};stop-opacity:1" />
          <stop offset="100%" style="stop-color:${l};stop-opacity:1" />
        </linearGradient>
      </defs>
      ${o}
      <rect width="800" height="200" fill="url(#grad-${s})" />
      <rect width="800" height="200" fill="url(#pattern-${s})" />
    </svg>
  `;return`data:image/svg+xml,${encodeURIComponent(n)}`}e.s(["generateDefaultBanner",()=>r],717744)},916316,664727,e=>{"use strict";var t=e.i(843476),r=e.i(828073),s=e.i(672464),a=e.i(657688),l=e.i(271645),o=e.i(682382),n=e.i(592846);e.i(490156);var i=e.i(754825),c=e.i(885438),u=e.i(741124);e.i(255730);var d=e.i(569692),x=e.i(392335);let p=(0,l.memo)(function({selectedChain:e,onChainChange:r,hasSolPresets:s,hasBnbPresets:l}){return s&&l?(0,t.jsx)("div",{className:"flex items-center gap-1",children:["sol","bnb"].map(s=>{let l=u.chainToInfoMap[s],o=s===e;return(0,t.jsx)("button",{type:"button",onClick:()=>r(s),className:`relative flex h-[32px] w-[32px] items-center justify-center rounded-full transition-all duration-150 ${o?"bg-primaryStroke":"scale-90 opacity-60 hover:bg-primaryStroke/30 hover:opacity-100"} `,"aria-label":`Switch to ${l.full}`,children:(0,t.jsx)(a.default,{draggable:!1,src:l.icon,alt:l.ticker,width:20,height:20,className:o?"":"grayscale-[0.3]"})},s)})}):null});e.s(["ChainSelector",0,p],664727);var m=e.i(458768),f=e.i(78390),h=e.i(879197);let b=(0,l.memo)(function({className:e}){let{t:b}=(0,n.useTranslation)(),[g,y]=(0,l.useState)("sol"),v=(0,s.useAtomValue)(i.fullSolWallet),w=(0,s.useAtomValue)(c.fullEvmWalletsAtom),[j,k]=(0,s.useAtom)(x.sharedSolWalletsAtom),[N,S]=(0,s.useAtom)(x.sharedBnbWalletsAtom),A=(0,s.useAtomValue)(d.userProfileIdAtom),P=(0,s.useSetAtom)(x.myLobbyInfoAtom),C=(0,s.useAtomValue)(i.solBalancesAtom),T=(0,s.useAtomValue)(c.evmBalancesAtom),I=(0,l.useRef)(!1),M=(0,l.useMemo)(()=>"sol"===g?v:w,[g,v,w]),[$,B]=(0,l.useState)(()=>new Set(j)),[L,F]=(0,l.useState)(()=>new Set(N)),U=(0,l.useRef)(null);(0,l.useEffect)(()=>{U.current||B(new Set(j))},[j]),(0,l.useEffect)(()=>{U.current||F(new Set(N))},[N]);let E=(0,l.useMemo)(()=>"sol"===g?$:L,[g,$,L]),R=(0,l.useMemo)(()=>{let e=0;for(let t of $)e+=C.data.get(t)?.balanceSol??0;return e},[$,C]),_=(0,l.useMemo)(()=>{let e=0;for(let t of L){let s=T.data.get(t.toLowerCase())?.balanceWei;s&&(e+=new r.default(s).dividedBy(1e18).toNumber())}return e},[L,T]),D=(0,l.useCallback)(e=>e.length<=10?e:`${e.slice(0,6)}...${e.slice(-4)}`,[]),z=(0,l.useCallback)((e,t)=>{I.current&&(k([...e]),S([...t]),P(s=>{if(!s||!A)return s;let a={};for(let t of e){let e=C.data.get(t);e&&(a[t]=new r.default(e.balanceSol??0).toNumber())}let l={};for(let e of t){let t=T.data.get(e.toLowerCase());t&&(l[e]=new r.default(t.balanceWei??0).dividedBy(1e18).toNumber())}return{...s,members:s.members.map(e=>e.userProfile.userId===A?{...e,sharedWallets:{sol:{sharedWalletBalances:a,stats:e.sharedWallets.sol?.stats||{totalPnl:0,totalBalance:0}},bnb:{sharedWalletBalances:l,stats:e.sharedWallets.bnb?.stats||{totalPnl:0,totalBalance:0}}}}:e)}}))},[k,S,P,A,C,T]),H=(0,l.useCallback)(e=>{let t=$,r=L;if(I.current=!0,"sol"===g){let r=new Set($);r.has(e)?r.delete(e):r.add(e),B(r),t=r}else{let t=new Set(L);t.has(e)?t.delete(e):t.add(e),F(t),r=t}U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{z(t,r),I.current=!1,U.current=null},500)},[g,$,L,z]);(0,l.useEffect)(()=>()=>{U.current&&clearTimeout(U.current)},[]);let W=(0,l.useMemo)(()=>M.filter(e=>e.publicKey!==o.VANISH_WALLET_ADDRESS).map(e=>{let t=0;if("sol"===g)t=C.data.get(e.publicKey)?.balanceSol??0;else{let s=T.data.get(e.publicKey.toLowerCase())?.balanceWei;t=s?new r.default(s).dividedBy(1e18).toNumber():0}return{...e,balance:t}}),[M,g,C,T]);return(0,t.jsxs)("div",{className:`flex flex-col ${e}`,children:[(0,t.jsxs)("div",{className:"flex w-full flex-shrink-0 flex-row items-center justify-between border-b border-secondaryStroke px-[16px] pb-[12px]",children:[(0,t.jsx)(p,{selectedChain:g,onChainChange:y,hasSolPresets:!0,hasBnbPresets:!0}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[(0,t.jsxs)("div",{className:"flex h-[26px] flex-row items-center justify-center gap-[4px] rounded-full border border-secondaryStroke/50 pl-[6px] pr-[6px]",children:[(0,t.jsx)("i",{className:"ri-wallet-line text-[14px] text-textTertiary"}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[16px] text-textSecondary",children:$.size}),(0,t.jsx)(a.default,{src:u.chainToInfoMap.sol.icon,alt:u.chainToInfoMap.sol.ticker,width:16,height:16}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[16px] text-textSecondary",dangerouslySetInnerHTML:{__html:(0,h.getFormattedNumber)(R,4)}})]}),(0,t.jsxs)("div",{className:"flex h-[26px] flex-row items-center justify-center gap-[4px] rounded-full border border-secondaryStroke/50 pl-[6px] pr-[6px]",children:[(0,t.jsx)("i",{className:"ri-wallet-line text-[14px] text-textTertiary"}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[16px] text-textSecondary",children:L.size}),(0,t.jsx)(a.default,{src:u.chainToInfoMap.bnb.icon,alt:u.chainToInfoMap.bnb.ticker,width:16,height:16}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[16px] text-textSecondary",dangerouslySetInnerHTML:{__html:(0,h.getFormattedNumber)(_,4)}})]})]})]}),(0,t.jsxs)("div",{className:"flex max-h-[352px] flex-col overflow-y-auto",children:[W.map((e,r)=>{let s=E.has(e.publicKey);return(0,t.jsxs)("button",{type:"button",onClick:()=>H(e.publicKey),className:"group flex w-full flex-shrink-0 cursor-pointer flex-row items-center justify-start text-left hover:bg-secondaryStroke/10",children:[(0,t.jsx)("div",{className:"flex flex-row items-start gap-[0px] p-[16px] pr-[16px]",children:(0,t.jsx)(f.Toggle,{isSelected:s,onClick:t=>{t.stopPropagation(),H(e.publicKey)},activeColor:e.isPrimary?"bg-[rgb(247,147,26)]":void 0,activeBorderColor:e.isPrimary?"border-[rgb(247,147,26)]":void 0})}),(0,t.jsxs)("div",{className:`border-secondaryStroke/50 ${r===W.length-1?"":"border-b-[1px]"} flex h-[56px] flex-1 flex-row items-center justify-between gap-[0px] pl-[0px] pr-[16px]`,children:[(0,t.jsxs)("div",{className:"flex min-w-[100px] flex-1 flex-col items-start justify-start gap-[4px] pr-[16px]",children:[(0,t.jsx)("span",{className:`text-nowrap text-[14px] font-medium leading-[18px] ${e.isPrimary?"text-[rgb(247,147,26)]":"text-textPrimary"}`,children:e.name}),(0,t.jsxs)("button",{type:"button",onClick:r=>{r.stopPropagation(),navigator.clipboard.writeText(e.publicKey).then(()=>{m.default.success({message:b("Address copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-[16px] text-primaryBlue"})},{duration:1500})}).catch(()=>{m.default.error(b("Failed to copy to clipboard"))})},className:"group/address flex flex-shrink-0 flex-row items-center justify-start gap-[2px] rounded-[4px] transition-all duration-150 ease-in-out",children:[(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[16px] text-textTertiary transition-all duration-150 ease-in-out group-hover/address:text-textSecondary",children:D(e.publicKey)}),(0,t.jsx)("i",{className:"ri-file-copy-line text-[12px] font-normal leading-[16px] text-textTertiary transition-all duration-150 ease-in-out group-hover/address:text-textSecondary"})]})]}),(0,t.jsxs)("div",{className:"flex h-[26px] flex-row items-center justify-end gap-[4px] rounded-full border border-secondaryStroke/50 pl-[6px] pr-[6px]",children:[(0,t.jsx)(a.default,{src:u.chainToInfoMap[g].icon,alt:u.chainToInfoMap[g].ticker,width:16,height:16}),(0,t.jsx)("span",{className:"text-[12px] font-normal leading-[16px] text-textSecondary",dangerouslySetInnerHTML:{__html:(0,h.getFormattedNumber)(e.balance,4)}})]})]})]},e.publicKey)}),0===M.length&&(0,t.jsx)("span",{className:"text-[11px] text-textSecondary",children:"No wallets available"})]})]})});e.s(["SharedWalletSettings",0,b],916316)},616604,e=>{"use strict";var t=e.i(843476),r=e.i(672464),s=e.i(271645),a=e.i(592846),l=e.i(458768),o=e.i(711858),n=e.i(569692),i=e.i(404289),c=e.i(846932),u=e.i(174080),d=e.i(542119),x=e.i(832544),p=e.i(458359),m=e.i(410152),f=e.i(846211);let h=(0,s.memo)(function({onClose:e}){let a=(0,r.useAtomValue)(x.isMobileAtom),o=(0,r.useAtomValue)(d.userIdAtom),[n,i]=(0,s.useState)(!0),[h,b]=(0,s.useState)(null),[g,y]=(0,s.useState)(!1),{socialApiGet:v}=(0,f.useRateLimitedSocialApi)(f.socialApiRestrictiveRateLimitAtom);(0,s.useEffect)(()=>{(async()=>{try{let e=await v("/generate-twitch-verification-link",void 0,o??void 0),t=e.authUrl||("string"==typeof e?e:void 0);if(!t||"string"!=typeof t)throw Error("Invalid OAuth URL received from server");b(t)}catch(e){console.error("Error fetching Twitch OAuth URL:",e),l.default.error(`Failed to start verification: ${e instanceof Error?e.message:"Unknown error"}`)}finally{i(!1)}})()},[o,v]);let w=(0,s.useCallback)(t=>{g&&t.target===t.currentTarget&&(t.stopPropagation(),e())},[g,e]),j=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-center gap-[16px] px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-start gap-[4px]"}),(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-center gap-[4px]",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-[16px] font-normal leading-[21px] tracking-[-0.02em] text-textSecondary",children:"Verify Twitch"})}),(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-end gap-[4px]",children:(0,t.jsx)("button",{type:"button",className:"flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] hover:bg-primaryStroke/60",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary"})})})]}),(0,t.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-[8px] px-[16px]",children:(0,t.jsx)("p",{className:"text-center text-[12px] font-normal leading-[16px] text-textSecondary",children:"Verify your Twitch account to confirm ownership. You'll be redirected to Twitch to authorize this verification."})}),(0,t.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-[8px] px-[16px]",children:n?(0,t.jsxs)("button",{type:"button",disabled:!0,className:"flex h-[32px] w-full cursor-not-allowed flex-row items-center justify-center gap-[8px] rounded-full bg-[#9146FF] px-[12px] opacity-50",children:[(0,t.jsx)("i",{className:"ri-loader-4-line animate-spin text-[14px] text-background"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Loading..."})]}):h?(0,t.jsxs)("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex h-[32px] w-full cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-[#9146FF] px-[12px] no-underline transition-all duration-[150ms] hover:bg-[#9146FF]/80 hover:brightness-110",children:[(0,t.jsx)("i",{className:"ri-twitch-line text-[14px] text-background"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Verify with Twitch"})]}):(0,t.jsx)("button",{type:"button",disabled:!0,className:"flex h-[32px] w-full cursor-not-allowed flex-row items-center justify-center gap-[8px] rounded-full bg-[#9146FF] px-[12px] opacity-50",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Failed to load verification link"})})}),(0,t.jsx)("div",{className:"flex h-[1px] w-full flex-row items-center justify-center bg-secondaryStroke"}),(0,t.jsx)("span",{className:"px-[16px] text-center text-[12px] font-normal leading-[16px] text-textTertiary",children:"After authorizing on Twitch, you'll be redirected back to complete the verification process."})]});return a?(0,u.createPortal)((0,t.jsx)(m.BottomSheet,{isOpen:!0,onClose:e,children:(0,t.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-[16px] bg-backgroundTertiary pb-[20px] pt-[16px]",children:j})}),document.body):(0,u.createPortal)((0,t.jsxs)(c.motion.div,{...p.ModalAnimationSettings.backdrop,className:"fixed inset-0 z-[200] flex items-center justify-center",children:[(0,t.jsx)(c.motion.div,{...p.ModalAnimationSettings.backdrop,className:"absolute inset-0 bg-[#090909]/80 backdrop-blur-[2px]",onClick:w,onMouseDown:e=>{e.target===e.currentTarget&&y(!0)},onMouseUp:()=>{requestAnimationFrame(()=>y(!1))}}),(0,t.jsx)(c.motion.div,{...p.ModalAnimationSettings.modal,className:"z-[200] flex w-full max-w-[312px] flex-col items-center justify-center gap-[16px] rounded-[4px] border border-secondaryStroke bg-backgroundTertiary pb-[20px] pt-[16px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:j})]}),document.body)}),b=(0,s.memo)(function({onClose:e}){let a=(0,r.useAtomValue)(x.isMobileAtom),o=(0,r.useAtomValue)(d.userIdAtom),[n,i]=(0,s.useState)(!0),[h,b]=(0,s.useState)(null),[g,y]=(0,s.useState)(!1),{socialApiGet:v}=(0,f.useRateLimitedSocialApi)(f.socialApiRestrictiveRateLimitAtom);(0,s.useEffect)(()=>{(async()=>{try{let e=await v("/generate-twitter-verification-link",void 0,o??void 0),t=e.authUrl||("string"==typeof e?e:void 0);if(!t||"string"!=typeof t)throw Error("Invalid OAuth URL received from server");b(t)}catch(e){console.error("Error fetching Twitter OAuth URL:",e),l.default.error(`Failed to start verification: ${e instanceof Error?e.message:"Unknown error"}`)}finally{i(!1)}})()},[o,v]);let w=(0,s.useCallback)(t=>{g&&t.target===t.currentTarget&&(t.stopPropagation(),e())},[g,e]),j=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-center gap-[16px] px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-start gap-[4px]"}),(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-center gap-[4px]",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-[16px] font-normal leading-[21px] tracking-[-0.02em] text-textSecondary",children:"Verify Twitter/X"})}),(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-end gap-[4px]",children:(0,t.jsx)("button",{type:"button",className:"flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] hover:bg-primaryStroke/60",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary"})})})]}),(0,t.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-[8px] px-[16px]",children:(0,t.jsx)("p",{className:"text-center text-[12px] font-normal leading-[16px] text-textSecondary",children:"Verify your Twitter/X account to confirm ownership. You'll be redirected to Twitter to authorize this verification."})}),(0,t.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-[8px] px-[16px]",children:n?(0,t.jsxs)("button",{type:"button",disabled:!0,className:"flex h-[32px] w-full cursor-not-allowed flex-row items-center justify-center gap-[8px] rounded-full bg-[#1DA1F2] px-[12px] opacity-50",children:[(0,t.jsx)("i",{className:"ri-loader-4-line animate-spin text-[14px] text-background"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Loading..."})]}):h?(0,t.jsxs)("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex h-[32px] w-full cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-[#1DA1F2] px-[12px] no-underline transition-all duration-[150ms] hover:bg-[#1DA1F2]/80 hover:brightness-110",children:[(0,t.jsx)("i",{className:"ri-twitter-x-line text-[14px] text-background"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Verify with Twitter/X"})]}):(0,t.jsx)("button",{type:"button",disabled:!0,className:"flex h-[32px] w-full cursor-not-allowed flex-row items-center justify-center gap-[8px] rounded-full bg-[#1DA1F2] px-[12px] opacity-50",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Failed to load verification link"})})}),(0,t.jsx)("div",{className:"flex h-[1px] w-full flex-row items-center justify-center bg-secondaryStroke"}),(0,t.jsx)("span",{className:"px-[16px] text-center text-[12px] font-normal leading-[16px] text-textTertiary",children:"After authorizing on Twitter, you'll be redirected back to complete the verification process."})]});return a?(0,u.createPortal)((0,t.jsx)(m.BottomSheet,{isOpen:!0,onClose:e,children:(0,t.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-[16px] bg-backgroundTertiary pb-[20px] pt-[16px]",children:j})}),document.body):(0,u.createPortal)((0,t.jsxs)(c.motion.div,{...p.ModalAnimationSettings.backdrop,className:"fixed inset-0 z-[200] flex items-center justify-center",children:[(0,t.jsx)(c.motion.div,{...p.ModalAnimationSettings.backdrop,className:"absolute inset-0 bg-[#090909]/80 backdrop-blur-[2px]",onClick:w,onMouseDown:e=>{e.target===e.currentTarget&&y(!0)},onMouseUp:()=>{requestAnimationFrame(()=>y(!1))}}),(0,t.jsx)(c.motion.div,{...p.ModalAnimationSettings.modal,className:"z-[200] flex w-full max-w-[312px] flex-col items-center justify-center gap-[16px] rounded-[4px] border border-secondaryStroke bg-backgroundTertiary pb-[20px] pt-[16px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:j})]}),document.body)}),g=[{key:"twitterHandle",icon:"ri-twitter-x-line",label:"Twitter/X",placeholder:"https://x.com/",color:"hover:text-[#1DA1F2]"},{key:"youtubeHandle",icon:"ri-youtube-line",label:"YouTube",placeholder:"https://youtube.com/@",color:"hover:text-[#000000]"},{key:"twitchHandle",icon:"ri-twitch-line",label:"Twitch",placeholder:"https://twitch.tv/",color:"hover:text-[#9146FF]"}],y=(0,s.memo)(function({isUser:e}){let{t:c}=(0,a.useTranslation)(),{deleteSocialLink:u}=(0,i.useSocialTracker)(),[d,x]=(0,s.useState)(null),[p,m]=(0,r.useAtom)(n.userProfileAtom),f=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!e)return;f.current=new BroadcastChannel("verify-socials");let t=e=>{if(e.data?.type==="verify-complete"){let t=e.data.platform,r=e.data.twitterHandle||e.data.youtubeHandle||e.data.twitchHandle;if(r&&t){let e,s,a;if("twitter"===t)e="twitterHandle",s="https://x.com/",a="Twitter/X";else if("youtube"===t)e="youtubeHandle",s="https://youtube.com/@",a="YouTube";else{if("twitch"!==t)return;e="twitchHandle",s="https://twitch.tv/",a="Twitch"}m(t=>t?{...t,socialLinks:{...t.socialLinks,[e]:`${s}${r}`}}:null),l.default.success(`${a} verified successfully for @${r}!`,{duration:3e4}),x(null)}}else if(e.data?.type==="verify-error"){let t=e.data.platform;l.default.error(`${"twitter"===t?"Twitter/X":"youtube"===t?"YouTube":"twitch"===t?"Twitch":"Platform"} verification failed: ${e.data.error||"Unknown error"}`,{duration:3e4}),x(null)}};return f.current.addEventListener("message",t),()=>{f.current&&(f.current.removeEventListener("message",t),f.current.close())}},[e,m]);let y=(0,s.useCallback)(e=>{"twitterHandle"===e?x("twitter"):"youtubeHandle"===e?x("youtube"):"twitchHandle"===e&&x("twitch")},[]),v=(0,s.useCallback)(async e=>{try{let t={twitterHandle:"twitter",youtubeHandle:"youtube",twitchHandle:"twitch"}[e];if(!t)return void l.default.error("Invalid platform");await u(e,t),l.default.success(`${t} removed successfully`)}catch(e){console.error("Error deleting social link:",e)}},[u]),w=(0,s.useCallback)(()=>{x(null)},[]),j=(0,s.useMemo)(()=>p?.socialLinks||{twitterHandle:null,youtubeHandle:null,twitchHandle:null},[p]),k=Object.values(j).some(e=>e),N=(0,s.useCallback)(e=>{let t=j[e];if(!t)return null;let r=g.find(t=>t.key===e)?.placeholder||"";return r&&t.startsWith(r)?t.slice(r.length):t},[j]);return k||e?(0,t.jsxs)("div",{className:"group relative w-full",children:[(0,t.jsx)("div",{className:"flex w-full flex-col gap-[4px]",children:g.filter(e=>"youtubeHandle"!==e.key).map(r=>{let s=N(r.key),a=!!s;if(!e&&!a)return null;if(!e){let e=`${r.placeholder}${s}`;return(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:`text-textSecondary ${r.color} flex w-full items-center gap-2 px-[12px] py-[8px] transition-colors`,title:r.label,children:[(0,t.jsx)("i",{className:`${r.icon} text-[20px]`}),s]},r.key)}return(0,t.jsx)("div",{className:"relative w-full",children:a?(0,t.jsxs)("div",{className:"flex h-[40px] w-full items-center gap-2 rounded-[6px] py-[8px] pl-[10px] pr-[8px] text-[14px] text-textPrimary",children:[(0,t.jsx)("i",{className:`${r.icon} text-[16px]`}),(0,t.jsx)("span",{className:"flex-1",children:s}),(0,t.jsx)(o.Tooltip,{content:c("Unlink account"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:()=>v(r.key),className:"flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)("i",{className:"ri-link-unlink-m text-[16px] text-textPrimary/90"})})})]}):(0,t.jsxs)("button",{type:"button",onClick:()=>y(r.key),className:"group/row duration-125 flex h-[40px] w-full items-center gap-2 rounded-[6px] px-[10px] py-[8px] text-[14px] text-textPrimary transition-colors ease-in-out hover:bg-textPrimary/[0.05]",children:[(0,t.jsx)("i",{className:`${r.icon} duration-125 text-[16px] text-textSecondary transition-colors ease-in-out group-hover/row:text-textPrimary`}),(0,t.jsxs)("span",{className:"text-[14px] font-medium",children:["Verify ",r.label]})]})},r.key)})}),"twitter"===d&&(0,t.jsx)(b,{onClose:w}),"twitch"===d&&(0,t.jsx)(h,{onClose:w})]}):(0,t.jsx)("div",{className:"flex items-center gap-2 text-textSecondary",children:(0,t.jsx)("span",{className:"text-[14px]",children:"No social links added"})})});e.s(["ProfileSocialLinks",0,y],616604)},759919,e=>{"use strict";var t=e.i(843476),r=e.i(530589),s=e.i(271645),a=e.i(174080),l=e.i(592846),o=e.i(458359);let n=(0,s.memo)(function({isOpen:e,onClose:n,imageUploadSize:i,onUpload:c,title:u="Upload Image"}){let{t:d}=(0,l.useTranslation)(),[x,p]=(0,s.useState)(null),[m,f]=(0,s.useState)(null),[h,b]=(0,s.useState)(null),[g,y]=(0,s.useState)(null),[v,w]=(0,s.useState)(!1),[j,k]=(0,s.useState)({x:0,y:0,width:0,height:0}),[N,S]=(0,s.useState)(!1),[A,P]=(0,s.useState)(null),[C,T]=(0,s.useState)({x:0,y:0}),[I,M]=(0,s.useState)({x:0,y:0,width:0,height:0}),$=(0,s.useRef)(null),B=(0,s.useRef)(null),L=i.width/i.height;(0,s.useEffect)(()=>{e||(p(null),f(null),b(null),y(null),k({x:0,y:0,width:0,height:0}))},[e]),(0,s.useEffect)(()=>()=>{m&&URL.revokeObjectURL(m)},[m]);let F=(0,s.useCallback)(e=>{let t=e.target.files?.[0];if(t?.type.startsWith("image/")){p(t),m&&URL.revokeObjectURL(m);let e=URL.createObjectURL(t);f(e);let r=new Image;r.onload=()=>{let e,t,s=r.width,a=r.height;b({width:s,height:a});let l=Math.min(400/s,350/a,1),o=s*l,n=a*l;y({width:o,height:n}),o/L<=n?(e=o,t=o/L):(t=n,e=n*L),k({x:(o-e)/2,y:(n-t)/2,width:e,height:t})},r.src=e}e.target.value=""},[m,L]),U=(0,s.useCallback)((e,t=null)=>{e.preventDefault(),e.stopPropagation();let r=B.current?.getBoundingClientRect();if(!r)return;let s="touches"in e?e.touches[0].clientX:e.clientX,a="touches"in e?e.touches[0].clientY:e.clientY;T({x:s-r.left,y:a-r.top}),M({...j}),t?P(t):S(!0)},[j]),E=(0,s.useCallback)(e=>{if(!N&&!A||!g)return;let t=B.current?.getBoundingClientRect();if(!t)return;let r="touches"in e?e.touches[0].clientX:e.clientX,s="touches"in e?e.touches[0].clientY:e.clientY,a=r-t.left,l=s-t.top,o=a-C.x,n=l-C.y;if(N){let e=I.x+o,t=I.y+n;e=Math.max(0,Math.min(g.width-j.width,e)),t=Math.max(0,Math.min(g.height-j.height,t)),k(r=>({...r,x:e,y:t}))}else if(A){let e=I.width,t=I.height,r=I.x,s=I.y;if("bottom-right"===A){let a=Math.abs(o)>Math.abs(n*L)?o:n*L;t=(e=Math.max(50,I.width+a))/L,r+e>g.width&&(t=(e=g.width-r)/L),s+t>g.height&&(e=(t=g.height-s)*L)}else if("bottom-left"===A){let a=-o,l=Math.abs(a)>Math.abs(n*L)?a:n*L;t=(e=Math.max(50,I.width+l))/L,(r=I.x+I.width-e)<0&&(r=0,t=(e=I.x+I.width)/L),s+t>g.height&&(e=(t=g.height-s)*L,r=I.x+I.width-e)}else if("top-right"===A){let a=Math.abs(o)>Math.abs(-n*L)?o:-n*L;t=(e=Math.max(50,I.width+a))/L,s=I.y+I.height-t,r+e>g.width&&(t=(e=g.width-r)/L,s=I.y+I.height-t),s<0&&(s=0,e=(t=I.y+I.height)*L)}else if("top-left"===A){let a=-o,l=Math.abs(a)>Math.abs(-n*L)?a:-n*L;t=(e=Math.max(50,I.width+l))/L,r=I.x+I.width-e,s=I.y+I.height-t,r<0&&(r=0,t=(e=I.x+I.width)/L,s=I.y+I.height-t),s<0&&(s=0,e=(t=I.y+I.height)*L,r=I.x+I.width-e)}e>=50&&t>=50/L&&k({x:r,y:s,width:e,height:t})}},[N,A,C,I,g,j.width,j.height,L]),R=(0,s.useCallback)(()=>{S(!1),P(null)},[]),_=(0,s.useCallback)(async()=>{if(x&&m&&h&&g)try{let e=new Image;e.src=m,await new Promise((t,r)=>{e.onload=t,e.onerror=r});let t=h.width/g.width,r=h.height/g.height,s=j.x*t,a=j.y*r,l=j.width*t,o=j.height*r,u=document.createElement("canvas");u.width=i.width,u.height=i.height;let d=u.getContext("2d");if(!d)throw Error("Could not get canvas context");d.fillStyle="black",d.fillRect(0,0,i.width,i.height),d.drawImage(e,s,a,l,o,0,0,i.width,i.height);let p=await new Promise((e,t)=>{u.toBlob(r=>{r?e(r):t(Error("Failed to create blob"))},"image/webp",.9)}),f=new File([p],x.name,{type:"image/webp"});c(f),n()}catch(e){console.error("Error cropping image:",e)}},[x,m,h,g,i,j,c,n]),D=(0,s.useCallback)(()=>{v&&n()},[v,n]);return e?(0,a.createPortal)((0,t.jsx)(r.motion.div,{...o.ModalAnimationSettings.backdrop,className:"fixed inset-0 z-[9999] flex items-center justify-center bg-[#090909]/80 backdrop-blur-[2px]",onClick:D,onMouseDown:e=>{e.target===e.currentTarget&&w(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{w(!1)})},children:(0,t.jsxs)(r.motion.div,{...o.ModalAnimationSettings.modal,className:"flex w-[460px] max-w-[90vw] flex-col rounded-[4px] border-[1px] border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",onClick:e=>e.stopPropagation(),onMouseUp:R,onMouseLeave:R,onMouseMove:E,onTouchEnd:R,onTouchCancel:R,onTouchMove:E,children:[(0,t.jsxs)("div",{className:"flex h-[44px] min-h-[44px] w-full flex-row items-center justify-between border-b-[1px] border-b-secondaryStroke pl-[16px] pr-[12px]",children:[(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:d(u)}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:n,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary"})})]}),(0,t.jsx)("input",{ref:$,type:"file",accept:"image/*",onChange:F,className:"hidden"}),(0,t.jsx)("div",{className:"flex w-full flex-1 flex-col gap-[16px] p-[16px]",children:m?(0,t.jsx)("div",{className:"flex flex-col items-center gap-[16px]",children:g&&(0,t.jsxs)("div",{ref:B,className:"relative select-none",style:{width:g.width,height:g.height},children:[(0,t.jsx)("img",{src:m,alt:"Preview",className:"pointer-events-none rounded-[4px]",draggable:!1,style:{width:g.width,height:g.height}}),(0,t.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:0,left:0,right:0,height:j.y}}),(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:j.y+j.height,left:0,right:0,bottom:0}}),(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:j.y,left:0,width:j.x,height:j.height}}),(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:j.y,left:j.x+j.width,right:0,height:j.height}})]}),(0,t.jsxs)("div",{className:"absolute cursor-move touch-none border-2 border-white/80",style:{left:j.x,top:j.y,width:j.width,height:j.height},onMouseDown:e=>U(e,null),onTouchStart:e=>U(e,null),children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 grid grid-cols-3 grid-rows-3",children:["tl","tm","tr","ml","mm","mr","bl","bm","br"].map(e=>(0,t.jsx)("div",{className:"border-[0.5px] border-white/20"},e))}),(0,t.jsx)("div",{className:"absolute -left-[6px] -top-[6px] h-[12px] w-[12px] cursor-nwse-resize touch-none rounded-full bg-white shadow-md",onMouseDown:e=>U(e,"top-left"),onTouchStart:e=>U(e,"top-left")}),(0,t.jsx)("div",{className:"absolute -right-[6px] -top-[6px] h-[12px] w-[12px] cursor-nesw-resize touch-none rounded-full bg-white shadow-md",onMouseDown:e=>U(e,"top-right"),onTouchStart:e=>U(e,"top-right")}),(0,t.jsx)("div",{className:"absolute -bottom-[6px] -left-[6px] h-[12px] w-[12px] cursor-nesw-resize touch-none rounded-full bg-white shadow-md",onMouseDown:e=>U(e,"bottom-left"),onTouchStart:e=>U(e,"bottom-left")}),(0,t.jsx)("div",{className:"absolute -bottom-[6px] -right-[6px] h-[12px] w-[12px] cursor-nwse-resize touch-none rounded-full bg-white shadow-md",onMouseDown:e=>U(e,"bottom-right"),onTouchStart:e=>U(e,"bottom-right")})]})]})}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center gap-[12px]",children:(0,t.jsxs)("button",{type:"button",onClick:()=>$.current?.click(),className:"group flex h-[200px] w-full cursor-pointer flex-col items-center justify-center rounded-[8px] border-[2px] border-dashed border-secondaryStroke transition-all duration-150 hover:border-primaryBlue hover:bg-primaryBlue/5",children:[(0,t.jsx)("div",{className:"mb-[12px] flex h-[48px] w-[48px] items-center justify-center rounded-full bg-secondaryStroke/30 transition-colors duration-150 group-hover:bg-primaryBlue/20",children:(0,t.jsx)("i",{className:"ri-upload-cloud-2-line text-[24px] text-textSecondary transition-colors duration-150 group-hover:text-primaryBlue"})}),(0,t.jsx)("span",{className:"text-[14px] font-medium text-textPrimary",children:d("Click to upload")}),(0,t.jsx)("span",{className:"mt-[8px] text-[11px] text-textTertiary",children:"PNG, JPG, GIF, WEBP"})]})})}),(0,t.jsxs)("div",{className:"flex h-[56px] w-full flex-row items-center justify-between border-t-[1px] border-t-secondaryStroke px-[16px] py-[12px]",children:[(0,t.jsx)("div",{children:m&&(0,t.jsx)("button",{type:"button",onClick:()=>$.current?.click(),className:"text-[12px] text-primaryBlue transition-colors duration-150 hover:text-primaryBlueHover",children:d("Or choose different image")})}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[8px]",children:[(0,t.jsx)("button",{type:"button",onClick:n,className:"flex h-[32px] flex-row items-center justify-center rounded-[4px] bg-secondaryStroke/30 px-[16px] transition-colors duration-150 hover:bg-secondaryStroke/50",children:(0,t.jsx)("span",{className:"text-[13px] font-medium text-textPrimary",children:d("Cancel")})}),(0,t.jsx)("button",{type:"button",onClick:_,disabled:!m,className:"flex h-[32px] flex-row items-center justify-center rounded-[4px] bg-primaryBlue px-[16px] transition-colors duration-150 hover:bg-primaryBlueHover disabled:cursor-not-allowed disabled:opacity-50",children:(0,t.jsx)("span",{className:"text-[13px] font-medium text-white",children:d("Confirm")})})]})]})]})}),document.body):null});e.s(["UploadImageModal",0,n,"bannerImageSize",0,{width:1200,height:300},"profileImageSize",0,{width:400,height:400}])},229878,e=>{"use strict";var t=e.i(843476),r=e.i(672464),s=e.i(271645),a=e.i(458768),l=e.i(569692),o=e.i(392335),n=e.i(391735);e.s(["EditLobbyName",0,()=>{let e=(0,r.useAtomValue)(o.myLobbyInfoAtom),i=(0,r.useAtomValue)(l.userProfileIdAtom),{updateLobby:c}=(0,n.useLobbyApi)(),[u,d]=(0,s.useState)(!1),x=(0,s.useRef)(null),p=i&&e?.leaderUserId===i;(0,s.useEffect)(()=>{u&&x.current&&(x.current.focus(),x.current.select())},[u]);let m=(0,s.useCallback)(async t=>{let r=t.trim();r?(r!==e?.name&&await c({name:r}),d(!1)):a.default.error("Lobby name cannot be empty")},[e?.name,c]),f=(0,s.useCallback)(t=>{t.stopPropagation(),"Enter"===t.key&&(t.preventDefault(),m(t.currentTarget.value)),"Escape"===t.key&&(t.currentTarget.value=e?.name||"",d(!1))},[m,e?.name]),h=(0,s.useCallback)(e=>{m(e.currentTarget.value)},[m]),b=(0,s.useCallback)(e=>{e.stopPropagation(),p&&d(!0)},[p]);return e?.name?(0,t.jsx)("div",{className:`group/name inline-flex min-w-0 flex-row items-center gap-0 overflow-hidden ${p?"cursor-text":""}`,onMouseDown:e=>e.stopPropagation(),onClick:b,children:(0,t.jsxs)("div",{className:"contents",children:[u&&p?(0,t.jsx)("input",{ref:x,type:"text",defaultValue:e.name,className:"min-w-[40px] max-w-[160px] cursor-text border-b border-textTertiary bg-transparent text-[14px] font-medium text-textPrimary outline-none",onKeyDown:f,onBlur:h,onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation()}):(0,t.jsx)("span",{className:"truncate text-[14px] font-medium text-textPrimary",children:e.name}),p&&!u&&(0,t.jsx)("button",{type:"button",onClick:b,className:"ml-[2px] w-0 flex-shrink-0 overflow-hidden opacity-0 transition-all duration-150 group-hover/name:w-[16px] group-hover/name:opacity-100",children:(0,t.jsx)("i",{className:"ri-pencil-line text-[14px] text-textPrimary hover:text-textPrimary/80"})})]})}):null}])},481240,e=>{"use strict";var t=e.i(843476),r=e.i(672464),s=e.i(271645),a=e.i(174080),l=e.i(592846),o=e.i(711858),n=e.i(569692),i=e.i(392335),c=e.i(391735),u=e.i(846932),d=e.i(458359);let x=({onClose:e,onConfirm:r,lobbyName:a,isResetLobby:o})=>{let[n,i]=(0,s.useState)(!1),{t:c}=(0,l.useTranslation)();return(0,t.jsx)(u.motion.div,{...d.ModalAnimationUtility.backdrop,className:"fixed inset-0 z-[200] flex items-center justify-center bg-[#090909]/40",onClick:t=>{n&&t.target===t.currentTarget&&e()},onMouseDown:e=>{e.target===e.currentTarget&&i(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{i(!1)})},children:(0,t.jsx)(u.motion.div,{className:"relative max-h-[880px] w-[452px]",onClick:e=>e.stopPropagation(),...d.ModalAnimationUtility.modal,children:(0,t.jsxs)("div",{className:"flex h-full w-full flex-col rounded-[4px] border-[1px] border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex h-[44px] w-full flex-row items-center justify-between border-b-[1px] border-b-secondaryStroke pl-[16px] pr-[12px]",children:[(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:c(o?"Reset Lobby":"Leave Lobby")}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary"})})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[16px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsx)("div",{className:"flex w-full flex-row items-center justify-start gap-[16px]",children:(0,t.jsxs)("span",{className:"text-[14px] font-normal leading-[1.2rem] text-textSecondary",children:[c(o?"Are you sure you want to reset":"Are you sure you want to leave")," ",(0,t.jsx)("span",{className:"font-medium text-textPrimary",children:o?c("your lobby"):a||c("this lobby")}),c("?")]})})})})}),(0,t.jsx)("div",{className:"flex h-[68px] w-full flex-row items-center justify-end border-t border-secondaryStroke/50 p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:r,className:"flex h-[32px] flex-1 cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-decrease px-[12px] transition-all duration-[125ms] hover:bg-decreaseHover",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:c(o?"Reset":"Leave")})})})]})})})};e.s(["LeaveResetLobby",0,()=>{let{t:e}=(0,l.useTranslation)(),[u,d]=(0,s.useState)(!1),p=(0,r.useAtomValue)(i.myLobbyInfoAtom),{leaveLobby:m}=(0,c.useLobbyApi)(),f=(0,s.useCallback)(async()=>{await m(),d(!1)},[m]),h=(0,r.useAtomValue)(n.userProfileIdAtom),b=(0,s.useMemo)(()=>p?.members?.length===1&&p?.members[0]?.userProfile.userId===h,[p?.members,h]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Tooltip,{content:e(b?"Reset Lobby":"Leave Lobby"),position:"top",children:(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-shrink-0 items-center justify-center rounded-[4px] hover:bg-decreaseHover/10",onClick:e=>{e.stopPropagation(),d(!0)},children:(0,t.jsx)("i",{className:`ri-${b?"refresh-line":"logout-box-line"} text-[16px] text-decreaseHover group-hover:text-decreaseHover`})})}),u&&(0,a.createPortal)((0,t.jsx)(x,{onClose:()=>d(!1),onConfirm:f,lobbyName:p?.name,isResetLobby:b}),document.body)]})}],481240)},968029,615585,464955,e=>{"use strict";var t=e.i(843476),r=e.i(672464),s=e.i(271645),a=e.i(392335),l=e.i(391735);let o={"open-owner-friends":{icon:(0,t.jsx)("i",{className:"ri-team-line"}),iconSubscription:(0,t.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!0,label:"Friends only",subLabel:"Only your friends can join the lobby"},"invite-only-lobby-members":{icon:(0,t.jsx)("i",{className:"ri-group-3-line"}),iconSubscription:(0,t.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!1,label:"Members invites",subLabel:"Lobby members can invite their friends"},"open-lobby-members-friends":{icon:(0,t.jsx)("i",{className:"ri-lock-unlock-line"}),iconSubscription:(0,t.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!0,label:"Open",subLabel:"Anyone can join the lobby"},"invite-only-owner":{icon:(0,t.jsx)("i",{className:"ri-lock-line"}),iconSubscription:(0,t.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!1,label:"Closed",subLabel:"Only people you invite can join"}},n=(0,s.memo)(function(){let e=(0,r.useAtomValue)(a.myLobbyInfoAtom),{updateLobby:o}=(0,l.useLobbyApi)(),n=async e=>{await o({lobbyType:e})},c=(0,s.useMemo)(()=>e?.lobbyType||"open-owner-friends",[e?.lobbyType]);return(0,t.jsxs)("div",{className:"flex w-full flex-1 flex-col gap-[16px] px-[16px] pb-[20px]",children:[(0,t.jsx)("div",{className:"flex flex-col gap-[4px]",children:(0,t.jsx)("span",{className:"text-[14px] text-textTertiary",children:"Choose who can join your lobby"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-[16px]",children:[(0,t.jsx)(i,{lobbyType:"open-lobby-members-friends",selectedLobbyType:c,onSelect:()=>n("open-lobby-members-friends")}),(0,t.jsx)(i,{lobbyType:"open-owner-friends",selectedLobbyType:c,onSelect:()=>n("open-owner-friends")}),(0,t.jsx)(i,{lobbyType:"invite-only-lobby-members",selectedLobbyType:c,onSelect:()=>n("invite-only-lobby-members")}),(0,t.jsx)(i,{lobbyType:"invite-only-owner",selectedLobbyType:c,onSelect:()=>n("invite-only-owner")})]})]})}),i=(0,s.memo)(function({lobbyType:e,onSelect:r,selectedLobbyType:a}){let l=(0,s.useMemo)(()=>a===e,[a,e]),n=o[e];return(0,t.jsxs)("button",{type:"button","aria-pressed":l,onClick:()=>r(e),className:`relative flex w-full cursor-pointer flex-col items-center justify-center gap-[8px] rounded-[12px] p-[16px] text-center transition-all duration-[125ms] ease-in-out ${l?"bg-primaryBlue/10":"hover:bg-secondaryStroke/15"}`,children:[(0,t.jsx)("div",{className:`transition-colors duration-[125ms] ease-in-out ${l?"text-primaryBlueHover":"text-textSecondary"}`,children:(0,t.jsx)("div",{className:"flex h-[28px] w-[28px] items-center justify-center rounded-full text-[20px]",children:n.icon})}),(0,t.jsx)("span",{className:`text-[13px] font-medium transition-colors duration-[125ms] ease-in-out ${l?"text-primaryBlueHover":"text-textSecondary"}`,children:n.label}),(0,t.jsx)("span",{className:`text-[12px] transition-colors duration-[125ms] ease-in-out ${l?"text-textSecondary ":"text-textTertiary"}`,children:n.subLabel})]})});e.s(["LobbyLeaderSettings",0,n],968029);var c=e.i(592846),u=e.i(428522);let d=(0,s.memo)(function({isLeader:e,activeTab:r,setActiveTab:s}){let{t:a}=(0,c.useTranslation)();return(0,t.jsx)("div",{className:"flex min-h-[36px] flex-row items-center justify-start p-[16px] pb-[0px]",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-[8px]",children:[e&&(0,t.jsx)(u.default,{selected:"lobby"===r,onClick:()=>s("lobby"),height:"h-[36px]",children:a("Lobby")}),(0,t.jsx)(u.default,{selected:"user"===r,onClick:()=>s("user"),height:"h-[36px]",children:a("User")}),(0,t.jsx)(u.default,{selected:"wallets"===r,onClick:()=>s("wallets"),height:"h-[36px]",children:a("Shared Wallets")})]})})});e.s(["LobbySettingsHeader",0,d],615585);var x=e.i(563150),p=e.i(695636);let m=(0,s.memo)(function(){let{t:e}=(0,c.useTranslation)(),[s,a]=(0,r.useAtom)(x.userLobbySettingsAtom),l=e=>{a(t=>({...t,toastDuration:Math.min(2e4,Math.max(5e3,1e3*e))}))},o=Math.round((s.toastDuration??5e3)/1e3);return(0,t.jsxs)("div",{className:"flex w-full flex-1 flex-col gap-[16px] px-[16px] pb-[20px]",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,t.jsx)(p.Switch,{checked:s.showBorderWhenFollowing,onChange:e=>{a(t=>({...t,showBorderWhenFollowing:e}))},label:"Show border when following"}),(0,t.jsx)(p.Switch,{checked:s.showBorderWhenFollowed,onChange:e=>{a(t=>({...t,showBorderWhenFollowed:e}))},label:"Show border when followed"}),(0,t.jsx)(p.Switch,{checked:s.showLinksAsClickable,onChange:e=>{a(t=>({...t,showLinksAsClickable:e}))},label:"Show links as clickable"}),(0,t.jsx)(p.Switch,{checked:s.showWarningsOnLinks,onChange:e=>{a(t=>({...t,showWarningsOnLinks:e}))},label:"Show warnings on links"})]}),(0,t.jsx)("div",{className:"h-[1px] w-full bg-secondaryStroke"}),(0,t.jsx)(p.Switch,{checked:s.receiveLobbyToast,onChange:e=>{a(t=>({...t,receiveLobbyToast:e}))},label:"Receive lobby toast"}),s.receiveLobbyToast&&(0,t.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-[12px] font-normal leading-[16px] text-textSecondary",children:e("Toast Duration")}),(0,t.jsxs)("div",{className:"flex h-[28px] w-[55px] items-center overflow-hidden rounded-[4px] border border-secondaryStroke bg-transparent hover:border-textPrimary/10 hover:bg-secondaryStroke/10 focus:border-textPrimary/10 focus:bg-secondaryStroke/10",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>{let t=parseInt(e.target.value,10);!Number.isNaN(t)&&t>=5&&t<=20&&l(t)},onBlur:e=>{let t=parseInt(e.target.value,10);Number.isNaN(t)||t<5?l(5):t>20&&l(20)},className:"w-[35px] bg-transparent text-center text-[12px] text-textPrimary outline-none"}),(0,t.jsx)("span",{className:"pr-1 text-[12px] text-textSecondary",children:"s"})]})]}),(0,t.jsx)("div",{className:"mb-[8px] flex w-full flex-col",children:(0,t.jsxs)("div",{className:"relative my-4 flex h-[2px] w-full flex-row items-center justify-between rounded-[999px] bg-primaryStroke",children:[(0,t.jsx)("div",{className:"absolute h-full rounded-[999px] bg-primaryBlue",style:{width:`${(o-5)/15*100}%`}}),(0,t.jsx)("div",{className:"pointer-events-none absolute top-1/2 h-[12px] w-[12px] -translate-y-1/2 cursor-grab rounded-full bg-primaryBlue",style:{left:`${(o-5)/15*100}%`,transform:"translate(-50%, -50%)"}}),(0,t.jsx)("input",{type:"range",min:"5",max:"20",step:"1",value:o,onChange:e=>l(parseInt(e.target.value,10)),className:"absolute -top-[12px] z-10 h-[24px] w-full cursor-pointer opacity-0"}),[5,10,15,20].map(e=>(0,t.jsxs)("div",{className:"pointer-events-none relative h-[4px] w-[2px] rounded-full",children:[(0,t.jsx)("div",{className:`h-full w-full rounded-full ${o>=e?"bg-primaryBlue":"bg-textTertiary"}`}),(0,t.jsx)("span",{className:"pointer-events-none absolute left-1/2 top-[8px] -translate-x-1/2 select-none text-[10px] font-normal text-textSecondary",children:e})]},e))]})})]})]})});e.s(["LobbySettingsUser",0,m],464955)},622435,e=>{"use strict";var t=e.i(843476),r=e.i(846932),s=e.i(672464),a=e.i(271645),l=e.i(174080),o=e.i(592846),n=e.i(716689),i=e.i(458359),c=e.i(569692),u=e.i(392335),d=e.i(968029),x=e.i(615585),p=e.i(464955),m=e.i(916316);let f=(0,a.memo)(function({onClose:e,isWindowModal:f=!1}){let{t:h}=(0,o.useTranslation)(),[b,g]=(0,a.useState)(!1),y=(0,s.useAtomValue)(c.userProfileIdAtom),v=(0,s.useAtomValue)(u.myLobbyInfoAtom),w=(0,a.useMemo)(()=>y&&v?.leaderUserId===y,[y,v?.leaderUserId]),[j,k]=(0,a.useState)("user");(0,a.useEffect)(()=>{w&&k("lobby")},[w]);let N=(0,a.useCallback)(t=>{b&&t.target===t.currentTarget&&e()},[b,e]),S=(0,s.useSetAtom)(n.socialStartupOpenAtom),A=(0,a.useCallback)(()=>{S(!0),e()},[S,e]);return(0,l.createPortal)((0,t.jsx)(r.motion.div,{...i.ModalAnimationSettings.backdrop,className:"fixed inset-0 z-[100] flex items-center justify-center bg-[#090909]/80 backdrop-blur-[2px]",onClick:N,onMouseDown:e=>{e.target===e.currentTarget&&g(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{g(!1)})},children:(0,t.jsxs)(r.motion.div,{...i.ModalAnimationSettings.modal,className:"flex min-h-[200px] w-[364px] flex-col bg-backgroundTertiary rounded-[4px] border-[1px] border-secondaryStroke shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:`flex h-[44px] min-h-[44px] w-full flex-shrink-0 flex-row items-center justify-between pl-[16px] pr-[12px] ${"wallets"===j?"":"border-b-[1px] border-b-secondaryStroke"}`,children:[(0,t.jsx)("span",{className:"flex-shrink-0 text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:h("Lobby Settings")}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] min-h-[24px] w-[24px] min-w-[24px] flex-shrink-0 flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary"})})]}),(0,t.jsx)(x.LobbySettingsHeader,{isLeader:w||!1,activeTab:j,setActiveTab:k}),(0,t.jsxs)("div",{className:"flex w-full flex-1 flex-col gap-[20px] overflow-y-auto pt-[16px]",children:["lobby"===j&&w&&(0,t.jsx)(d.LobbyLeaderSettings,{}),"user"===j&&(0,t.jsx)(p.LobbySettingsUser,{}),"wallets"===j&&(0,t.jsx)(m.SharedWalletSettings,{})]}),(0,t.jsxs)("div",{className:"flex h-[68px] w-full flex-shrink-0 flex-row items-center justify-between border-t border-secondaryStroke/50 p-[16px] pb-[20px]",children:[(0,t.jsx)("button",{type:"button",onClick:A,className:"group flex h-[32px] cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-transparent px-[12px]",children:(0,t.jsx)("span",{className:"text-[14px] font-medium text-primaryBlue transition-all duration-[150ms] ease-in-out group-hover:text-primaryBlueHover",children:h("Quick Start")})}),(0,t.jsx)("button",{type:"button",onClick:e,className:"flex h-[32px] cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-primaryBlue px-[12px] transition-all duration-[150ms] hover:bg-primaryBlue/80 hover:brightness-110",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:h("Done")})})]})]})}),document.body)});e.s(["LobbySettingsModal",0,f])},415823,70070,e=>{"use strict";var t=e.i(235591),r=e.i(416600);let s=async({queryKey:e})=>{let[,r]=e;return await t.socialApi.get("user-friends-with-status",void 0,r)};e.s(["useSocialInfo",0,(e,t)=>(0,r.useSettableQuery)(["socialInfo",e??"",t??""],s,{enabled:!!e&&!!t})],415823);var a=e.i(639372),l=e.i(672464),o=e.i(271645),n=e.i(91204);let i="tab_leader",c=(0,a.atom)(!1);function u(){let[e,t]=(0,l.useAtom)(c),r=(0,o.useRef)(null),s=(0,o.useRef)(null),a=(0,o.useRef)(null),u=(0,o.useRef)(null),d=(0,o.useRef)(null),x=(0,o.useRef)(0);return(0,o.useEffect)(()=>{let e=!1;a.current=new BroadcastChannel(i),u.current=crypto.randomUUID(),a.current.onmessage=async e=>{"new_focus"===e.data.type&&e.data.tabId!==u.current&&(d.current=e,s.current?.abort(),s.current=null,r.current?.(),r.current=null,d.current===e&&(await (0,n.sleep)(3e3),o(!1)))};let l=()=>{a.current?.postMessage({type:"new_focus",tabId:u.current})},o=async a=>{if(!("locks"in navigator)){console.warn("Web Locks API not supported - defaulting to leader"),t(!0);return}if(x.current>0){a&&l();return}x.current++;let o=new AbortController;s.current=o;try{let s=navigator.locks.request(i,{mode:"exclusive",signal:o.signal},async()=>{e||(t(!0),await new Promise(e=>{r.current=e}),t(!1))});a&&l(),await s}catch(e){return e instanceof Error&&"AbortError"!==e.name&&console.error("Error acquiring tab leader lock:",e),!1}finally{s.current===o&&(s.current=null),x.current--}},c=async()=>{o(!0)},p=async()=>{document.hidden||o(!0)};return window.addEventListener("focus",c),document.addEventListener("visibilitychange",p),document.hidden||o(!0),()=>{e=!0,s.current?.abort(),s.current=null,r.current?.(),r.current=null,window.removeEventListener("focus",c),document.removeEventListener("visibilitychange",p),a.current?.close(),a.current=null}},[]),{isLeader:e}}e.s(["useTabLeader",()=>u],70070)},227905,751380,830222,657421,465836,e=>{"use strict";var t=e.i(247167),r=e.i(672464),s=e.i(271645),a=e.i(70070),l=e.i(500676),o=e.i(707716),n=e.i(542119),i=e.i(392335),c=e.i(555702),u=e.i(828073),d=e.i(750214);e.i(255730);var x=e.i(885438),p=e.i(754825),m=e.i(741124),f=e.i(569692),h=e.i(458768),b=e.i(441019),g=e.i(563150);let y={discover:"Discover",pulse:"Pulse",trackers:"Trackers",rewards:"Rewards",vision:"Vision",meme:"Meme",perpetuals:"Perpetuals",yield:"Yield",portfolio:"Portfolio",Unknown:"Unknown"};var v=e.i(490257),w=e.i(404289),j=e.i(940096),k=e.i(419006),N=e.i(115906);let S=()=>{let e=(0,r.useAtomValue)(n.userIdAtom),a=(0,r.useAtomValue)(n.usernameAtom),u=(0,r.useAtomValue)(i.followedLobbyUserAtom),d=(0,r.useSetAtom)(i.followedLobbyUserAtom),x=(0,r.useSetAtom)(i.pauseFollowedLobbyUserAtom),p=(0,s.useRef)(null),m=(0,s.useMemo)(()=>{if(t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&e)return{"localhost-password":t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":e}},[e]),{sendJsonMessage:f,readyState:h}=(0,l.useWebSocketBase)({connectionType:o.ConnectionType.FRIENDS,url:e&&a?c.FRIENDS_URL:null,queryParams:m,reconnectAttempts:50});(0,s.useEffect)(()=>{let e=p.current!==o.ReadyState.OPEN,t=h===o.ReadyState.OPEN;p.current=h,e&&t&&u&&f({type:"startFollowing",targetUserId:u})},[h,u,f]),(0,s.useEffect)(()=>{let e=()=>{u&&h===o.ReadyState.OPEN&&f({type:"stopFollowing",targetUserId:u})};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[u,h,f]);let b=(0,s.useCallback)(e=>{u&&u!==e&&h===o.ReadyState.OPEN&&f({type:"stopFollowing",targetUserId:u}),h===o.ReadyState.OPEN&&f({type:"startFollowing",targetUserId:e}),d(e),x(!1)},[u,h,f,d,x]),g=(0,s.useCallback)(()=>{u&&h===o.ReadyState.OPEN&&f({type:"stopFollowing",targetUserId:u}),d(null),x(!1)},[u,h,f,d,x]);return{followedLobbyUser:u,startFollowing:b,stopFollowing:g}},A=()=>{let e=(0,N.useRouter)(),t=(0,r.useSetAtom)(j.tabAtom),a=(0,r.useSetAtom)(k.currentPerpAtom);return{handleFollowNavigation:(0,s.useCallback)((r,s,l)=>{"discover"===r&&s&&"tab"in s?(t(s.tab),e.push(`/discover?chain=${l}`)):"perpetuals"===r&&s&&"currentPerp"in s?(a(s.currentPerp),e.push("/perpetuals")):"meme"===r&&s&&"pairAddress"in s?e.push(`/meme/${s.pairAddress}?chain=${l}`):e.push(`/${r}?chain=${l}`)},[e,t,a])}};e.s(["useFollowUser",0,e=>{let{followedLobbyUser:t,startFollowing:r,stopFollowing:a}=S(),{handleFollowNavigation:l}=A(),o=(0,s.useMemo)(()=>t===e.userProfile.userId,[t,e.userProfile.userId]),n=(0,s.useMemo)(()=>"offline"!==e.presence,[e.presence]),i=(0,s.useCallback)(()=>{if(o)a();else{r(e.userProfile.userId);let t=e.currentChain??"sol";l(e.currentPage??"discover",e.currentSubpage,t)}},[o,r,a,e.userProfile.userId,e.currentChain,e.currentPage,e.currentSubpage,l]);return{isFollowingUser:o,handleFollowLobby:i,canFollowUser:n}},"useFollowingActions",0,S,"useHandleFollowLobby",0,A],751380);var P=e.i(60166),C=e.i(800473),T=e.i(851388),I=e.i(391735),M=e.i(877710),$=e.i(472660),B=e.i(324077),L=e.i(562406),F=e.i(738864),U=e.i(564012);let E=({isLeader:e,sendJsonMessage:t})=>{let a=(0,N.usePathname)(),l=(0,r.useAtomValue)(j.tabAtom),o=(0,r.useAtomValue)(k.currentPerpAtom),n=(0,r.useAtomValue)(m.currentChainAtom),c=(0,r.useAtomValue)("sol"===n?$.pairAtomSol:M.pairAtomBnb),u=(0,r.useAtomValue)(f.userProfileIdAtom),d=(0,r.useSetAtom)(i.myLobbyInfoAtom),{generatePathMessage:x}=R();return(0,s.useEffect)(()=>{if(e){let e=x();e&&(t({type:"pageUpdate",...e}),d(t=>t?{...t,members:t.members.map(t=>t.userProfile.userId===u?{...t,currentPage:e.page,...void 0!==e.subpage&&{currentSubpage:e.subpage},currentChain:e.chain??null,lastUpdatedTimestamp:Date.now()}:t)}:t))}},[e,x,t,a,d,u,l,c?.pairAddress,n,o]),(0,s.useMemo)(()=>({generatePathMessage:x}),[x])},R=()=>{let e=(0,N.usePathname)(),t=(0,s.useRef)(e);(0,s.useEffect)(()=>{t.current=e},[e]);let r=(0,s.useCallback)(()=>t.current,[]),a=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(j.tabAtom),[])),l=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(k.currentPerpAtom),[])),o=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(k.currentCtxAtom),[])),n=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(m.currentChainAtom),[])),i=(0,d.useAtomCallback)((0,s.useCallback)(e=>{let t=e(m.currentChainAtom);return e("sol"===t?$.pairAtomSol:M.pairAtomBnb)},[])),c=(0,d.useAtomCallback)((0,s.useCallback)(e=>{let t=e(m.currentChainAtom);switch(t){case"sol":return e($.lastTransactionAtomSol)?.priceSol;case"bnb":return e(M.lastTransactionAtomBnb)?.priceBnb;default:(0,U.assertUnreachable)(t)}},[])),u=(0,s.useCallback)(()=>{let e,t=r();if(!t)return null;let s=t.split("/").filter(Boolean);if(0===s.length)return{page:"Unknown"};let u=a(),d=l(),x=n(),p=i(),m=s[0].toLowerCase();if("discover"===m){if(!u)return null;e={tab:u}}else if("meme"===m){if(!p)return null;let t="sol"===x?(0,B.getRealProtocol)(p.protocol,p.extra,p.protocolDetails):(0,F.getRealProtocol)(p.protocol,L.BNB_PROTOCOL_INFO,p.extra),r=c();e={pairAddress:p.pairAddress,tokenAddress:p.tokenAddress,ticker:p.tokenTicker,name:p.tokenName,protocol:t,isMigrated:!!p.extra?.migratedFrom,supply:Number(p.supply),price:Number(r??0)}}else if("perpetuals"===m){if(!d)return null;e={currentPerp:d,price:Number(o()?.ctx.markPx??0)}}return{page:m,subpage:e,chain:x}},[r,o,c,a,l,i,n]);return(0,s.useMemo)(()=>({generatePathMessage:u}),[u])};e.s(["useGeneratePath",0,R,"usePageUpdate",0,E],830222),e.s(["useFriendWebsocket",0,()=>{let e,j,k,S,M=(0,r.useAtomValue)(n.userIdAtom),$=(0,r.useSetAtom)(i.followerIdsAtom),{isLeader:B}=(0,a.useTabLeader)(),L=c.FRIENDS_URL,F=(0,s.useMemo)(()=>{if(t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&M)return{"localhost-password":t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":M}},[M]),{updateIncomingFriend:U,updateFriendRequestAccepted:_,updateFriendPageUpdate:D,updateFriendRemoved:z,updateFriendProfile:H,updateFriendPresence:W}=(()=>{let e=(0,r.useSetAtom)(f.incomingFriendListAtom),t=(0,r.useSetAtom)(f.sentFriendListAtom),{acceptFriendRequest:a}=(0,w.useSocialTracker)(),l=(0,r.useSetAtom)(f.relationshipToFriendAtom),o=(0,r.useSetAtom)(f.usernameToDataAtom),n=(0,r.useSetAtom)(f.userIdToDataAtom),c=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(g.userLobbySettingsAtom),[])),u=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(f.userProfileIdAtom),[])),x=(0,s.useCallback)(t=>{e(e=>{let r=new Map(e);return r.set(t.profile.username,{relationshipId:t.relationshipId,userProfile:t.profile,createdAt:t.timestamp}),r});let r={username:t.profile.username,relationshipId:t.relationshipId,userId:t.profile.userId,relationshipType:"incoming"};l(e=>{let s=new Map(e);return s.set(t.relationshipId,r),s}),o(e=>{let s=new Map(e);return s.set(t.profile.username,r),s}),n(e=>{let s=new Map(e);return s.set(t.profile.userId,r),s}),c().disableFriendRequestToasts||h.default.social(t.profile.avatarUrl,t.profile.username,"sent you a friend request",void 0,void 0,"Accept",()=>{a(t.relationshipId,t.profile.username)},{duration:c().toastDuration}),v.relationshipEvents.emitIncomingRequest({relationshipId:t.relationshipId,profile:{userId:t.profile.userId,username:t.profile.username,avatarUrl:t.profile.avatarUrl??null,bannerUrl:t.profile.bannerUrl??null,color:t.profile.color??null,socialLinks:t.profile.socialLinks??{twitterHandle:null,youtubeHandle:null,twitchHandle:null}},createdAt:t.timestamp,requestUsername:t.profile.username}),v.relationshipEvents.emitCountChange("incoming",1)},[e,l,o,n,a,c]),{handleFollowNavigation:p}=A(),j=(0,d.useAtomCallback)((0,s.useCallback)((e,t,r)=>{try{if(!(r.page in y))return void console.error("Invalid page:",r.page);let s=r.page;if("meme"===r.page){let e=r.subpage;if(!e)return void console.error("Pair subpage data not found");let t=(0,b.isValidSolanaAddress)(e.pairAddress)||(0,b.isValidEvmAddress)(e.pairAddress),s=(0,b.isValidSolanaAddress)(e.tokenAddress)||(0,b.isValidEvmAddress)(e.tokenAddress),a=e.ticker&&e.ticker.length>0&&e.ticker.length<=20,l=e.name&&e.name.length>0&&e.name.length<=50,o=r.chain&&r.chain in m.chainToInfoMap;if(!t||!s||!a||!l||!o)return}else if("discover"===s){let e=r.subpage;if(!e||!e.tab)return void console.error("Discover tab not found")}else if("perpetuals"===s){let e=r.subpage;if(!e||!e.currentPerp)return void console.error("Perp not found")}let a=e(f.userIdToDataAtom).get(r.userId);a&&(t(f.friendListAtom,e=>{let t=new Map(e),l=t.get(a.username);return l&&t.set(a.username,{...l,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now(),presence:"online"}),t}),t(f.friendProfileDataAtom,e=>e?.userProfile.userId===r.userId?{...e,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now(),presence:"online"}:e));let l=e(i.lobbyUserMapAtom).get(r.userId);l&&(t(i.lobbyUserMapAtom,e=>{let t=new Map(e);return t.set(r.userId,{...l,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now()}),t}),t(i.myLobbyInfoAtom,e=>e?{...e,members:e.members.map(e=>e.userProfile.userId===r.userId?{...e,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now()}:e)}:e));let o=e(i.followedLobbyUserAtom),n=e(i.pauseFollowedLobbyUserAtom);o!==r.userId||n||p(s,r.subpage,r.chain||"sol")}catch(e){console.error("Error parsing subpage:",e);return}},[p])),k=(0,d.useAtomCallback)((0,s.useCallback)((e,r,s)=>{let{profile:a,relationshipId:i,presence:u,page:d,subpage:x,chain:p}=s,{userId:m,username:b}=a,g=e(f.relationshipToFriendAtom).get(i),y=e(f.sentFriendListAtom).get(b),w=e(f.incomingFriendListAtom).get(b),k=g?.relationshipType==="outgoing"||!!y,N=g?.relationshipType==="incoming"||!!w;r(f.friendListAtom,e=>{let t=new Map(e);return t.set(b,{currentPage:d||"Unknown",currentSubpage:x,currentChain:p||null,relationshipId:i,lastUpdatedTimestamp:Date.now(),userProfile:{avatarUrl:a.avatarUrl??null,bannerUrl:a.bannerUrl??null,color:a.color??null,userId:m,username:b,socialLinks:a.socialLinks??{twitterHandle:null,youtubeHandle:null,twitchHandle:null}},presence:u||"online"}),t}),y&&t(e=>{let t=new Map(e);return t.delete(b),t}),w&&r(f.incomingFriendListAtom,e=>{let t=new Map(e);return t.delete(b),t});let S={username:b,relationshipId:i,userId:m,relationshipType:"accepted"};l(e=>{let t=new Map(e);return g?.relationshipId&&g.relationshipId!==i&&t.delete(g.relationshipId),t.set(i,S),t}),o(e=>{let t=new Map(e);return t.set(b,S),t}),n(e=>{let t=new Map(e);return t.set(m,S),t}),c().disableFriendRequestToasts||h.default.social(a.avatarUrl||null,b,N&&!k?"is now your friend":"accepted your friend request",void 0,void 0,void 0,void 0,{duration:c().toastDuration}),k&&(v.relationshipEvents.emitRemoveOutgoingRequest(m),v.relationshipEvents.emitCountChange("outgoing",-1)),N&&(v.relationshipEvents.emitRemoveIncomingRequest(m),v.relationshipEvents.emitCountChange("incoming",-1)),j({type:"friendPageUpdate",timestamp:s.timestamp,userId:m,page:d,subpage:x,chain:p})},[t,l,o,n,c,j])),N=(0,d.useAtomCallback)((0,s.useCallback)(async(e,t,r)=>{let s=e(f.usernameToDataAtom),a=s.get(r.username);if(!a)return;let l=new Map(s);l.delete(r.username),t(f.usernameToDataAtom,l);let o=new Map(e(f.relationshipToFriendAtom));if(!a.relationshipId)return;o.delete(a.relationshipId),t(f.relationshipToFriendAtom,o);let n=new Map(e(f.userIdToDataAtom));switch(n.delete(a.userId),t(f.userIdToDataAtom,n),a.relationshipType){case"accepted":{let s=new Map(e(f.friendListAtom));s.delete(r.username),t(f.friendListAtom,s);break}case"incoming":{let s=new Map(e(f.incomingFriendListAtom));s.delete(r.username),t(f.incomingFriendListAtom,s);break}case"outgoing":{let s=new Map(e(f.sentFriendListAtom));s.delete(r.username),t(f.sentFriendListAtom,s);break}case"blocked":{let s=new Map(e(f.blockedFriendListAtom));s.delete(r.username),t(f.blockedFriendListAtom,s);break}default:console.error("Unknown relationship type:",a.relationshipType)}},[])),S=(0,d.useAtomCallback)((0,s.useCallback)((e,t,r)=>{let s=e(f.userIdToDataAtom).get(r.userId);if(s){let e=s.username,a=e;if(r.username&&r.username!==e){let l=r.username,o={...s,username:l};t(f.usernameToDataAtom,t=>{let r=new Map(t);return r.delete(e),r.set(l,o),r}),t(f.relationshipToFriendAtom,e=>{let t=new Map(e);return s.relationshipId?t.set(s.relationshipId,o):console.error("Friend relationship not found"),t}),t(f.userIdToDataAtom,e=>{let t=new Map(e);return t.set(r.userId,o),t}),a=l}t(f.friendListAtom,t=>{let s=new Map(t),l=s.get(e);return l&&(s.delete(e),s.set(a,{...l,userProfile:{avatarUrl:r.avatar||l.userProfile.avatarUrl,bannerUrl:r.banner||l.userProfile.bannerUrl,color:r.color||l.userProfile.color,userId:r.userId||l.userProfile.userId,username:a,socialLinks:r.socialLinks||l.userProfile.socialLinks},presence:r.presence||l.presence})),s})}let a=e(i.lobbyUserMapAtom).get(r.userId);if(a){let e={...a.userProfile,avatarUrl:r.avatar||a.userProfile.avatarUrl,bannerUrl:r.banner||a.userProfile.bannerUrl,bio:r.bio||a.userProfile.bio,color:r.color||a.userProfile.color,socialLinks:{twitterHandle:r.socialLinks?.twitterHandle||a.userProfile.socialLinks?.twitterHandle,youtubeHandle:r.socialLinks?.youtubeHandle||a.userProfile.socialLinks?.youtubeHandle,twitchHandle:r.socialLinks?.twitchHandle||a.userProfile.socialLinks?.twitchHandle},username:r.username||a.userProfile.username};t(i.lobbyUserMapAtom,t=>{let s=new Map(t);return s.set(r.userId,{...a,userProfile:e,presence:r.presence||a.presence}),s}),t(i.myLobbyInfoAtom,t=>t?{...t,members:t.members.map(t=>t.userProfile.userId===r.userId?{...t,userProfile:e,presence:r.presence||t.presence}:t)}:t)}r.userId===u()&&t(f.userProfileAtom,e=>e?{...e,avatarUrl:r.avatar||e.avatarUrl,bannerUrl:r.banner||e.bannerUrl,bio:r.bio||e.bio,color:r.color||e.color,socialLinks:r.socialLinks||e.socialLinks,userId:r.userId||e.userId,username:r.username||e.username}:e)},[u])),P=(0,d.useAtomCallback)((0,s.useCallback)((e,t,r)=>{let s=e(f.userIdToDataAtom).get(r.userId);if(!s)return;t(f.friendListAtom,e=>{let t=new Map(e),a=t.get(s.username);return a&&t.set(s.username,{...a,presence:r.presence,lastUpdatedTimestamp:r.timestamp}),t}),t(f.friendProfileDataAtom,e=>e?.userProfile.userId===r.userId?{...e,presence:r.presence,lastUpdatedTimestamp:r.timestamp}:e);let a=e(i.lobbyUserMapAtom).get(r.userId);a&&(t(i.lobbyUserMapAtom,e=>{let t=new Map(e);return t.set(r.userId,{...a,presence:r.presence,lastUpdatedTimestamp:r.timestamp}),t}),t(i.myLobbyInfoAtom,e=>e?{...e,members:e.members.map(e=>e.userProfile.userId===r.userId?{...e,presence:r.presence,lastUpdatedTimestamp:r.timestamp}:e)}:e))},[]));return(0,s.useMemo)(()=>({updateIncomingFriend:x,updateFriendRequestAccepted:k,updateFriendPageUpdate:j,updateFriendRemoved:N,updateFriendProfile:S,updateFriendPresence:P}),[x,k,j,N,S,P])})(),{handleLobbyInviteReceived:V,handleLobbyInviteExpired:O,handleLobbyRequestReceived:q,handleLobbyRequestExpired:G,handleUserJoinedLobby:K,handleUserLeftLobby:Y,handleLobbyOwnershipTransferred:X,handleLobbyUpdated:J,handleKickedFromLobby:Q,handleFriendLobbyInfoUpdated:Z,handleLobbyChatMessage:ee,handleLobbySharePnlMessage:et,handleLobbyMemberRemovedWallets:er,handleLobbyMemberBalanceUpdate:es,handleLobbyBannerUpdated:ea,handleResetPnl:el,handleLobbyTokenAlert:eo,handleLobbyTokenAlertDeleted:en}=(()=>{let e=(0,r.useSetAtom)(i.lobbyInvitesAtom),t=(0,r.useSetAtom)(i.lobbyRequestsAtom),a=(0,r.useSetAtom)(i.myLobbyInfoAtom),l=(0,r.useSetAtom)(i.lobbyUserMapAtom),o=(0,r.useAtomValue)(i.lobbyUserMapAtom),n=(0,r.useSetAtom)(f.friendListAtom),c=(0,r.useAtomValue)(f.friendListAtom),u=(0,r.useSetAtom)(i.friendLobbyDataAtom),x=(0,r.useAtomValue)(f.userIdToDataAtom),p=(0,r.useSetAtom)(P.lobbyChatMessagesAtom),m=(0,r.useSetAtom)(C.alertsMigratedAtom),b=(0,r.useSetAtom)(P.messageAuthorsAtom),y=(0,r.useSetAtom)(C.lobbyAlertsAtom),v=(0,r.useSetAtom)(C.lobbyAlertsCurrentPriceAtom),w=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(g.userLobbySettingsAtom),[])),j=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(f.userProfileIdAtom),[])),k=(0,r.useSetAtom)(P.lastChatCursorAtom),S=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(i.myLobbyInfoAtom),[])),A=(0,r.useSetAtom)(i.sharedSolWalletsAtom),M=(0,r.useSetAtom)(i.sharedBnbWalletsAtom),{acceptLobbyInvite:$,acceptLobbyRequest:B,promoteLobbyRequest:L}=(0,I.useLobbyApi)(),F=(0,N.useRouter)(),U=(0,s.useCallback)(t=>{let r=!1;if(e(e=>{let s=new Map(e),a=`${t.lobbyId}-${t.inviterUserId}`;return s.has(a)||(r=!0),s.set(a,{lobbyId:t.lobbyId,lobbyName:t.lobbyName,inviterUserId:t.inviterUserId,inviterUsername:t.inviterUsername,lobbyMemberCount:t.lobbyMemberCount,lobbyMemberUsernames:t.lobbyMemberUsernames,createdAt:t.timestamp}),s}),r&&w().receiveLobbyToast){let e=x.get(t.inviterUserId),r=null;if(e){let t=c.get(e.username);r=t?.userProfile.avatarUrl||null}h.default.social(r,t.inviterUsername,`invited you to join ${t.lobbyName}`,void 0,void 0,"Join",()=>{$(t.lobbyId)},{duration:w().toastDuration})}},[e,$,x,c,w]),E=(0,s.useCallback)(t=>{e(e=>{let r=new Map(e),s=`${t.lobbyId}-${t.inviterUserId}`;return r.delete(s),r})},[e]),R=(0,s.useCallback)(e=>{let r=!1;if(t(t=>{let s=new Map(t),a=s.get(e.lobbyId)||[];return a.some(t=>t.requesterUserId===e.requesterUserId)||(r=!0,s.set(e.lobbyId,[...a,{lobbyId:e.lobbyId,requesterUserId:e.requesterUserId,requesterUsername:e.requesterUsername,requesteeUserId:"",referredByUserId:e.referredByUserId,referredByUsername:e.referredByUsername,createdAt:e.timestamp}])),s}),r&&w().receiveLobbyToast){let t=e.referredByUsername?`wants to join (via ${e.referredByUsername})`:"wants to join your lobby",r=x.get(e.requesterUserId),s=null;if(r){let e=c.get(r.username);s=e?.userProfile.avatarUrl||null}let a=S(),l=j();if(a?.leaderUserId===l)h.default.social(s,e.requesterUsername,t,void 0,void 0,"Approve",()=>{B(e.requesterUserId)},{duration:w().toastDuration});else{let r=x.get(e.requesterUserId),a=r?.relationshipId;a&&h.default.social(s,e.requesterUsername,t,void 0,void 0,"Forward to Owner",()=>{L(a)},{duration:w().toastDuration})}}},[t,B,L,x,c,w,S,j]),_=(0,s.useCallback)(e=>{t(t=>{let r=new Map(t),s=(r.get(e.lobbyId)||[]).filter(t=>t.requesterUserId!==e.requesterUserId);return s.length>0?r.set(e.lobbyId,s):r.delete(e.lobbyId),r})},[t]),D=(0,s.useCallback)(e=>{let r=!1,s={userProfile:{userId:e.userId,username:e.username,avatarUrl:e.avatarUrl},currentPage:e.currentPage,currentSubpage:e.currentSubpage,currentChain:e.currentChain,presence:"online",lastUpdatedTimestamp:Date.now(),isOnline:!0,sharedWallets:e.sharedWallets};a(t=>!t||t.members.some(t=>t.userProfile.userId===e.userId)?t:(r=!0,{...t,members:[...t.members,s]})),l(t=>{let r=new Map(t);return r.set(e.userId,s),r}),t(t=>{let r=new Map(t);for(let[t,s]of r.entries()){let a=s.filter(t=>t.requesterUserId!==e.userId);a.length>0?r.set(t,a):r.delete(t)}return r}),b(t=>{let r=new Map(t);return r.set(e.userId,{userId:e.userId,username:e.username,avatarUrl:e.avatarUrl}),r}),r&&w().receiveLobbyToast&&h.default.social(e.avatarUrl,e.username,"joined the lobby",void 0,void 0,void 0,void 0,{duration:w().toastDuration})},[a,l,t,w,b]),z=(0,s.useCallback)(e=>{let t=!1,r=o.get(e.userId);a(r=>r?(r.members.some(t=>t.userProfile.userId===e.userId)&&(t=!0),{...r,members:r.members.filter(t=>t.userProfile.userId!==e.userId),aggregateStats:{sol:{totalPnl:e.lobbyStats.sol?.totalPnl??0,totalBalance:e.lobbyStats.sol?.totalBalance??0},bnb:{totalPnl:e.lobbyStats.bnb?.totalPnl??0,totalBalance:e.lobbyStats.bnb?.totalBalance??0}}}):r),l(t=>{let r=new Map(t);return r.delete(e.userId),r}),t&&w().receiveLobbyToast&&h.default.social(r?.userProfile.avatarUrl||null,e.username,"left the lobby",void 0,void 0,void 0,void 0,{duration:w().toastDuration})},[a,l,o,w]),H=(0,s.useCallback)(e=>{let t=!1,r=o.get(e.newOwnerUserId);a(r=>r?(r.leaderUserId!==e.newOwnerUserId&&(t=!0),{...r,leaderUserId:e.newOwnerUserId,name:e.newLobbyName}):r),t&&w().receiveLobbyToast&&h.default.social(r?.userProfile.avatarUrl||null,e.newOwnerUsername,"is now the lobby leader",void 0,void 0,void 0,void 0,{duration:w().toastDuration})},[a,o,w]),W=(0,s.useCallback)(r=>{a(e=>(e&&e.lobbyId!==r.lobbyInfo.lobbyId&&(p([]),b(new Map),y([]),v(new Map),m(new Map)),r.lobbyInfo)),r.lobbyInfo.messageAuthors&&b(new Map(r.lobbyInfo.messageAuthors.map(e=>[e.userId,e]))),l(new Map(r.lobbyInfo.members.map(e=>[e.userProfile.userId,e])));let s=new Map;if(r.lobbyInfo.activeAlerts){y(r.lobbyInfo.activeAlerts.map((e,t)=>({alertId:t,pairAddress:e.pairAddress,tokenAddress:e.tokenAddress,tokenName:e.tokenName,tokenTicker:e.tokenTicker,tokenImage:e.tokenImage,protocol:e.proto,isMigrated:e.isMigrated,callPriceNative:e.priceNative,callMarketCap:e.mc,supply:e.supply,timestamp:e.createdAt,decimals:e.decimals,userId:e.createdByUserId,holderIds:e.boughtInUsers,chain:e.chain})).reverse());let e=new Map;for(let t of r.lobbyInfo.activeAlerts){let r=e.get(t.pairAddress);r||(r=new Map,e.set(t.pairAddress,r)),r.set(t.feedItemId,{price:t.currentPriceNative,ATH:t.allTimeHighPriceNative})}v(e);let t=new Map;for(let e of r.lobbyInfo.activeAlerts)t.set(e.tokenAddress,{isMigrated:e.isMigrated,pairAddress:e.pairAddress}),s.set(e.feedItemId,{isMigrated:e.isMigrated,protocol:e.proto,supply:e.supply,pairAddress:e.pairAddress});m(t)}if(r.lobbyInfo.feed?.items){let e=(0,T.convertFeedToMessages)(r.lobbyInfo.feed.items);for(let t of e)if("call"===t.t&&t.feedItemId){let e=s.get(t.feedItemId);e&&(t.isMigrated=e.isMigrated,t.proto=e.protocol,t.tokenSupply=e.supply,t.pairAddress=e.pairAddress)}p(e)}e(e=>{let t=new Map(e);for(let[e,s]of t.entries())s.lobbyId===r.lobbyInfo.lobbyId&&t.delete(e);return t});let o=r.lobbyInfo.incomingRequests;o&&o.length>0?t(e=>{let t=new Map(e);return t.set(r.lobbyInfo.lobbyId,o),t}):t(e=>{let t=new Map(e);return t.delete(r.lobbyInfo.lobbyId),t}),k(r.lobbyInfo.feed?.nextCursor??null)},[a,e,p,b,l,y,v,m,k,t]),V=(0,s.useCallback)(e=>{a(t=>(t&&t.lobbyId===e.oldLobbyId&&h.default.error("You were kicked from the lobby"),t)),p([]),b(new Map),a(e.newLobbyInfo)},[a,p,b]),O=(0,s.useCallback)(e=>{let t=x.get(e.userId);t?(n(r=>{let s=r.get(t.username);if(!s)return r;let a=new Map(r);return a.set(t.username,{...s,lobbyInfo:1===e.memberCount?null:{lobbyId:e.lobbyId,name:e.lobbyName,memberCount:e.memberCount}}),a}),u(t=>{let r=new Map(t);return 1===e.memberCount?r.delete(e.userId):r.set(e.userId,{lobbyId:e.lobbyId,lobbyName:e.lobbyName,memberCount:e.memberCount}),r})):console.error("User not found in userIdToData! userId:",e.userId)},[n,u,x]),q=(0,s.useCallback)(e=>{p(t=>{let r=t.findIndex(t=>"chat"===t.t&&t.pending&&t.uid===e.userId&&t.clientId===e.clientId);if(-1!==r){let s=t[r];if("chat"===s.t){let a=Math.max(0,175-(Date.now()-s.ts));if(a>0)return setTimeout(()=>{p(t=>{let r=t.findIndex(e=>e===s);if(-1===r)return t;let a=[...t];return a[r]={t:"chat",ts:e.timestamp,uid:s.uid,m:s.m,pending:!1},a})},a),t;let l=[...t];return l[r]={t:"chat",ts:e.timestamp,uid:s.uid,m:s.m,pending:!1},l}return t}return t.some(t=>"chat"===t.t&&t.uid===e.userId&&t.m===e.message&&t.ts===e.timestamp)?t:[...t,{t:"chat",ts:e.timestamp,uid:e.userId,m:e.message}]})},[p]),G=(0,s.useCallback)(e=>{p(t=>{let r=t.findIndex(t=>"sharePnl"===t.t&&t.pending&&t.uid===e.userId&&t.tokenAddress===e.tokenAddress&&1e-4>Math.abs(t.totalPnl-e.totalPnl));if(-1!==r){let s=[...t],a=s[r];return"sharePnl"===a.t&&(s[r]={...a,ts:e.timestamp,pending:!1,username:e.username,rewardsLevel:e.rewardsLevel||void 0}),s}return t.some(t=>"sharePnl"===t.t&&t.uid===e.userId&&t.tokenAddress===e.tokenAddress&&5e3>Math.abs(t.ts-e.timestamp))?t:[...t,{t:"sharePnl",ts:e.timestamp,uid:e.userId,chain:e.chain,totalPnl:e.totalPnl,totalInvested:e.totalInvested,totalPosition:e.totalPosition,tokenAddress:e.tokenAddress,pairAddress:e.pairAddress,tokenTicker:e.tokenTicker,tokenName:e.tokenName,tokenImage:e.tokenImage,username:e.username,rewardsLevel:e.rewardsLevel||void 0,pnlCurrency:e.pnlCurrency,m:e.message}]})},[p]),K=(0,s.useCallback)(e=>{if(a(t=>t?{...t,aggregateStats:{...t.aggregateStats,[e.chain]:e.lobbyStats},members:t.members.map(t=>{if(t.userProfile.userId!==e.userId)return t;let r=t.sharedWallets[e.chain];if(!r?.sharedWalletBalances)return t;let s={...r.sharedWalletBalances};for(let t of e.wallets)delete s[t];return{...t,sharedWallets:{...t.sharedWallets,[e.chain]:{sharedWalletBalances:s,stats:e.userStats}}}})}:t),e.userId===j()){let t=new Set(e.wallets);"sol"===e.chain?A(e=>[...e||[]].filter(e=>!t.has(e))):"bnb"===e.chain&&M(e=>[...e||[]].filter(e=>!t.has(e)))}},[a,A,M,j]),Y=(0,s.useCallback)(e=>{a(t=>{try{if(!t)return t;return{...t,aggregateStats:{...t.aggregateStats,[e.chain]:e.lobbyStats},members:t.members.map(t=>{if(t.userProfile.userId!==e.userId)return t;let r=t.sharedWallets[e.chain],s={...r?.sharedWalletBalances||{},...e.wallets};return{...t,sharedWallets:{...t.sharedWallets,[e.chain]:{sharedWalletBalances:s,stats:e.userStats}}}})}}catch(e){return console.error("Error updating lobby member balance:",e),t}}),e.userId===j()&&("sol"===e.chain?A(t=>[...new Set([...t||[],...Object.keys(e.wallets)])]):"bnb"===e.chain&&M(t=>[...new Set([...t||[],...Object.keys(e.wallets)])]))},[a,A,M,j]),X=(0,s.useCallback)(e=>{a(t=>t?{...t,banner:e.banner}:t)},[a]),J=(0,s.useCallback)(e=>{h.default.success("P&L has been reset for all lobby members"),a(e=>e?{...e,aggregateStats:{sol:{...e.aggregateStats.sol,totalPnl:0},bnb:{...e.aggregateStats.bnb,totalPnl:0}},members:e.members.map(e=>({...e,sharedWallets:{sol:{...e.sharedWallets.sol,stats:{...e.sharedWallets.sol.stats,totalPnl:0}},bnb:{...e.sharedWallets.bnb,stats:{...e.sharedWallets.bnb.stats,totalPnl:0}}}}))}:e)},[a]),Q=(0,s.useCallback)(e=>{let t={alertId:Date.now(),pairAddress:e.pairAddress,tokenAddress:e.tokenAddress,tokenName:e.tokenName,tokenTicker:e.tokenTicker,tokenImage:e.tokenImage,protocol:e.proto,isMigrated:e.isMigrated,callPriceNative:e.priceNative,callMarketCap:e.mc,supply:e.supply,timestamp:e.timestamp,decimals:e.decimals,userId:e.userId,holderIds:[],chain:e.chain};y(e=>[t,...e]),v(t=>{let r=new Map(t),s=new Map(r.get(e.pairAddress)??[]);return s.set(e.feedItemId,{price:e.priceNative,ATH:e.priceNative}),r.set(e.pairAddress,s),r}),m(t=>{let r=new Map(t);return r.set(e.tokenAddress,{isMigrated:e.isMigrated,pairAddress:e.pairAddress}),r});let r={t:"call",ts:e.timestamp,uid:e.userId,chain:e.chain,tokenName:e.tokenName,tokenTicker:e.tokenTicker,tokenAddress:e.tokenAddress,pairAddress:e.pairAddress,tokenImage:e.tokenImage,tokenSupply:e.supply,tokenDecimals:e.decimals,mc:e.mc,proto:e.proto,isMigrated:e.isMigrated,feedItemId:e.feedItemId};p(e=>[...e,r]);let s=o.get(e.userId),a=s?.userProfile.userId===j();s&&w().receiveLobbyToast&&!a&&h.default.social(s?.userProfile.avatarUrl||null,s?.userProfile.username||"","called",e.tokenImage,e.tokenTicker,"View",()=>{let t=`/meme/${e.pairAddress}?chain=${e.chain}`;F.push(t)},{duration:w().toastDuration})},[y,v,p,F,o,w,j,m]),Z=(0,s.useCallback)(e=>{y(t=>t.filter(t=>t.alertId!==e.alertId))},[y]);return(0,s.useMemo)(()=>({handleLobbyInviteReceived:U,handleLobbyInviteExpired:E,handleLobbyRequestReceived:R,handleLobbyRequestExpired:_,handleUserJoinedLobby:D,handleUserLeftLobby:z,handleLobbyOwnershipTransferred:H,handleLobbyUpdated:W,handleKickedFromLobby:V,handleFriendLobbyInfoUpdated:O,handleLobbyChatMessage:q,handleLobbySharePnlMessage:G,handleLobbyMemberRemovedWallets:K,handleLobbyMemberBalanceUpdate:Y,handleLobbyBannerUpdated:X,handleResetPnl:J,handleLobbyTokenAlert:Q,handleLobbyTokenAlertDeleted:Z}),[U,E,R,_,D,z,H,W,V,O,q,G,K,Y,X,J,Q,Z])})(),ei=(0,s.useCallback)(e=>{"friendRequestSent"===e.type?U(e):"friendRequestAccepted"===e.type?_(e):"friendPageUpdate"===e.type?D(e):"friendRemoved"===e.type?z(e):"friendProfileUpdate"===e.type?H(e):"userPresenceUpdate"===e.type?W(e):"lobbyInviteReceived"===e.type?V(e):"lobbyInviteExpired"===e.type?O(e):"lobbyRequestReceived"===e.type?q(e):"lobbyRequestExpired"===e.type?G(e):"userJoinedLobby"===e.type?K(e):"userLeftLobby"===e.type?Y(e):"lobbyOwnershipTransferred"===e.type?X(e):"lobbyUpdated"===e.type?J(e):"kickedFromLobby"===e.type?Q(e):"friendLobbyInfoUpdated"===e.type?Z(e):"lobbyChatMessage"===e.type?ee(e):"lobbySharePnlMessage"===e.type?et(e):"lobbyMemberRemovedWallets"===e.type?er(e):"lobbyMemberBalanceUpdate"===e.type?es(e):"lobbyBannerUpdated"===e.type?ea(e):"lobbyPnlReset"===e.type?el(e):"lobbyTokenAlertMessage"===e.type?eo(e):"lobbyAlertDeleted"===e.type?en(e):"followersUpdate"===e.type&&$(e.followers)},[U,_,D,z,H,W,V,O,q,G,K,Y,X,J,Q,Z,ee,et,er,es,ea,el,eo,en,$]),ec=(0,s.useRef)(!0),{generatePathMessage:eu}=R(),{createBalanceDumpUpdate:ed}=(e=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(i.sharedSolWalletsAtom),[])),j=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(i.sharedBnbWalletsAtom),[])),k=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(p.solBalancesAtom),[])),S=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(x.evmBalancesAtom),[])),{createBalanceDumpUpdate:(0,s.useCallback)(()=>{let t={},r=e(),s=j(),a=k(),l=S();if(r)for(let e of r){let r=a.data.get(e);r&&(t[e]=r.balanceSol)}let o={};if(s)for(let e of s){let t=l.data.get(e.toLowerCase());t&&(o[e]=new u.default(t.balanceWei).dividedBy(1e18).toNumber())}return{sol:t,bnb:o}},[e,j,k,S])}),{sendMessage:ex,sendJsonMessage:ep,readyState:em}=(0,l.useWebSocketBase)({connectionType:o.ConnectionType.FRIENDS,url:M?L:null,queryParams:F,reconnectAttempts:50,onOpen:()=>{if(ec.current){ec.current=!1;return}if(B){let e=eu();e&&ep({type:"pageUpdate",...e});let t=ed();t&&(Object.keys(t.sol).length>0||Object.keys(t.bnb).length>0)&&ep({type:"walletUpdate",action:"balance",...Object.keys(t.sol).length>0&&{sol:t.sol},...Object.keys(t.bnb).length>0&&{bnb:t.bnb}})}},onError:e=>{console.error("WebSocket connection error:",{url:L,error:e.message,readyState:o.ReadyState[em],timestamp:new Date().toISOString()})},onMessage:ei});E({isLeader:B,sendJsonMessage:ep}),(({sendMessage:e})=>{let t=(0,s.useCallback)(()=>{e(".")},[e]);(0,s.useEffect)(()=>{let e=setInterval(()=>{t()},c.UPDATE_HEARTBEAT_INTERVAL);return()=>{clearInterval(e)}},[t])})({sendMessage:ex}),(({isLeader:e,sendJsonMessage:t})=>{let a=(0,r.useAtomValue)(x.totalMonitoredEvmBalanceAtom),l=(0,r.useAtomValue)(p.totalMonitoredSolBalanceAtom),o=(0,r.useAtomValue)(x.monitoredEvmWalletsAtom),n=(0,r.useAtomValue)(p.monitoredSolWalletsAtom),m=(0,r.useAtomValue)(x.evmBalancesAtom),f=(0,r.useAtomValue)(p.solBalancesAtom),h=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(p.solBalancesAtom),[])),b=(0,d.useAtomCallback)((0,s.useCallback)(e=>e(x.evmBalancesAtom),[])),g=(0,r.useAtomValue)(i.sharedSolWalletsAtom),y=(0,r.useAtomValue)(i.sharedBnbWalletsAtom),v=(0,d.useAtomCallback)((0,s.useCallback)(e=>new Set(e(i.sharedSolWalletsAtom)),[])),w=(0,d.useAtomCallback)((0,s.useCallback)(e=>new Set(e(i.sharedBnbWalletsAtom)),[])),j=(0,s.useRef)(new u.default(a)),k=(0,s.useRef)(new u.default(l)),N=(0,s.useRef)(new Map),S=(0,s.useRef)(new Map),A=(0,s.useRef)(new Set),P=(0,s.useRef)(new Set),[C,T]=(0,s.useState)({updateSol:new Map,updateBnb:new Map,hideSol:new Set,hideBnb:new Set});!function({time:e,state:t,comp:r,act:a}){let l=(0,s.useRef)(void 0),o=(0,s.useRef)(null),n=(0,s.useRef)(!1),i=(0,s.useRef)(a),c=(0,s.useRef)(r);(0,s.useEffect)(()=>{i.current=a},[a]),(0,s.useEffect)(()=>{c.current=r},[r]),(0,s.useEffect)(()=>{let r=l.current;if(l.current=t,!(!c.current||c.current(r,t)))return;if(o.current){n.current=!0;return}i.current();let s=Math.max(0,e),a=()=>{if(n.current){n.current=!1,i.current(),o.current=setTimeout(a,s);return}o.current=null};return o.current=setTimeout(a,s),()=>{}},[e,t]),(0,s.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[])}({time:c.BALANCE_UPDATE_INTERVAL,state:C,comp:(e,t)=>t.updateSol.size>0||t.updateBnb.size>0||t.hideSol.size>0||t.hideBnb.size>0,act:()=>{if(!e)return;let r=(e,t)=>Object.fromEntries([...e.entries()].filter(([e])=>!t.has(e))),s=r(C.updateSol,C.hideSol),a=r(C.updateBnb,C.hideBnb),l=[...C.hideSol].reduce((e,t)=>(e[t]=0,e),{}),o=[...C.hideBnb].reduce((e,t)=>(e[t]=0,e),{});(Object.keys(s).length>0||Object.keys(a).length>0)&&t({type:"walletUpdate",action:"balance",...Object.keys(s).length>0&&{sol:s},...Object.keys(a).length>0&&{bnb:a}}),(Object.keys(l).length>0||Object.keys(o).length>0)&&t({type:"walletUpdate",action:"hide",...Object.keys(l).length>0&&{sol:l},...Object.keys(o).length>0&&{bnb:o}}),T({updateSol:new Map,updateBnb:new Map,hideSol:new Set,hideBnb:new Set})}});let I=(0,s.useCallback)(()=>{let e=new u.default(a),t=new u.default(l),r=e.minus(j.current).abs(),s=t.minus(k.current).abs(),i=v(),d=w();if(i&&d){if(r.isGreaterThan(c.BALANCE_UPDATE_THRESHOLD.bnb)||s.isGreaterThan(c.BALANCE_UPDATE_THRESHOLD.sol)){let e=new Map;for(let t of o){if(!d.has(t.publicKey))continue;let r=m.data.get(t.publicKey.toLowerCase());if(!r)continue;let s=N.current.has(t.publicKey.toLowerCase()),a=N.current.get(t.publicKey.toLowerCase()),l=new u.default(r?.balanceWei??0).dividedBy(1e18),o=l.toString();s&&a===o||(e.set(t.publicKey,l.toNumber()),N.current.set(t.publicKey.toLowerCase(),o))}let t=new Map;for(let e of n){if(!i.has(e.publicKey))continue;let r=f.data.get(e.publicKey);if(!r)continue;let s=S.current.has(e.publicKey),a=S.current.get(e.publicKey),l=new u.default(r?.balanceSol??0),o=l.toString();s&&a===o||(t.set(e.publicKey,l.toNumber()),S.current.set(e.publicKey,o))}let r=e.size>0,s=t.size>0;(r||s)&&T(r=>({...r,updateBnb:e,updateSol:t}))}j.current=e,k.current=t}},[a,l,o,n,m,f,w,v]);(0,s.useEffect)(()=>{I()},[I]),(0,s.useEffect)(()=>{if(!g||!y)return;let e=new Set(g),t=new Set(y),r=h(),s=b();T(a=>{let l=[...A.current].filter(t=>!e.has(t)),o=[...P.current].filter(e=>!t.has(e)),n=new Set([...a.hideSol,...l]),i=new Set([...a.hideBnb,...o]),c=[...g].filter(e=>!A.current.has(e)),d=[...y].filter(e=>!P.current.has(e)),x=new Map,p=new Map;if(c.length>0||d.length>0){for(let e of c){let t=r.data.get(e);if(t){let r=new u.default(t.balanceSol??0);x.set(e,r.toNumber()),S.current.set(e,r.toString()),n.has(e)&&n.delete(e)}}for(let e of d){let t=s.data.get(e.toLowerCase());if(t){let r=new u.default(t.balanceWei??0).dividedBy(1e18);p.set(e,r.toNumber()),N.current.set(e.toLowerCase(),r.toString()),i.has(e)&&i.delete(e)}}}return A.current=new Set(g),P.current=new Set(y),{updateSol:x,updateBnb:p,hideSol:n,hideBnb:i}})},[g,y,h,b])})({isLeader:B,sendJsonMessage:ep})}],227905);var _=e.i(449885);let D=(e,t)=>"bnb"===t?`bnb|b-${e}`:`b-${e}`;e.s(["getRoomToJoin",0,D,"useUpdateSocialPrice",0,()=>{let[e,t]=(0,r.useAtom)(C.lobbyAlertsAtom),a=(0,r.useAtomValue)(C.userLastActivityPairsAtom),l=(0,r.useSetAtom)(C.lobbyAlertsCurrentPriceAtom),o=(0,r.useSetAtom)(C.alertsMigratedAtom),n=(0,r.useSetAtom)(C.friendLastActivityPairPriceAtom),i=(0,s.useRef)(new Set),c=(0,s.useRef)(()=>{}),u=(0,s.useRef)(()=>{}),{join:d,leave:x}=(0,_.useAxiomWebsocket)({roomsRef:(0,s.useRef)(new Set),onMessage:r=>{let{room:s,content:a}=r;if(s.startsWith("bnb|b-")||s.startsWith("b-")){let e=s.startsWith("bnb|b-")?s.slice(6):s.slice(2);l(t=>{let r=t.get(e);if(!r)return t;let s=new Map(t),l=new Map;for(let[e,t]of r.entries())l.set(e,{price:a,ATH:a>t.ATH?a:t.ATH});return s.set(e,l),s}),n(t=>{let r=new Map(t);return r.set(e,a),r})}if("migrations"===s||"bnb|migrations"===s)try{let r="bnb|migrations"===s,n=a.from,d=a.to,x=D(n,r?"bnb":"sol"),p=D(d,r?"bnb":"sol");i.current.has(x)&&(u.current(x),c.current(p),l(e=>{if(!e.has(n))return e;let t=new Map(e),r=t.get(n);if(r){t.delete(n);let e=new Map;for(let[t,s]of r.entries())e.set(t,{price:s.price,ATH:s.ATH});t.set(d,e)}return t}),t(e=>[...e].map(e=>e.pairAddress===n?{...e,pairAddress:d,isMigrated:!0}:e)),o(t=>{let r=new Map(t),s=e.find(e=>e.pairAddress===n)?.tokenAddress;return s?(r.set(s,{isMigrated:!0,pairAddress:d}),r):t}))}catch(e){console.error("Error migrating alerts",e)}}});c.current=d,u.current=x,(0,s.useEffect)(()=>{let t=i.current,r=new Set(["migrations","bnb|migrations"]);for(let t of[...e.map(e=>({chain:e.chain,pairAddress:e.pairAddress})),...a.values()]){let e=D(t.pairAddress,t.chain);r.add(e)}for(let e of r)t.has(e)||(d(e),t.add(e));for(let e of t)r.has(e)||(x(e),t.delete(e));i.current=r},[e,a,d,x])}],657421),e.s(["useUpdateWallets",0,()=>{let e=(0,s.useRef)(new Map),t=(0,s.useRef)(new Map),a=(0,r.useSetAtom)(C.lobbyWalletsAtomSol),l=(0,r.useSetAtom)(C.lobbyWalletsAtomBnb),o=(0,r.useAtomValue)(i.myLobbyInfoAtom);(0,s.useEffect)(()=>{if(!o)return;let r=new Map,s=new Map;for(let e of o.members){let t=Object.keys(e.sharedWallets.sol?.sharedWalletBalances||{}),a=Object.keys(e.sharedWallets.bnb?.sharedWalletBalances||{});for(let s of t)r.set(s,e.userProfile.userId);for(let t of a)s.set(t,e.userProfile.userId)}e.current.size!==r.size&&(e.current=r,a(r)),t.current.size!==s.size&&(t.current=s,l(s))},[o,a,l])}],465836)},188754,e=>{"use strict";var t=e.i(247167),r=e.i(672464),s=e.i(750214),a=e.i(271645),l=e.i(500676),o=e.i(707716);e.i(490156);var n=e.i(542119),i=e.i(310487),c=e.i(60166),u=e.i(800473),d=e.i(555702),x=e.i(203320);e.s(["useSocialTransactionsWebsocket",0,()=>{let e=(0,r.useAtomValue)(n.userIdAtom),p=(0,r.useAtomValue)(n.usernameAtom),m=(0,r.useSetAtom)(u.lobbyAlertsAtom),f=(0,s.useAtomCallback)((0,a.useCallback)(e=>e(u.lobbyWalletsAtomSol),[])),h=(0,s.useAtomCallback)((0,a.useCallback)(e=>e(u.lobbyWalletsAtomBnb),[])),b=(0,r.useSetAtom)(c.lobbyChatMessagesAtom),g=d.FRIENDS_URL,y=(0,a.useMemo)(()=>{if(t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&e)return{"localhost-password":t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":e}},[e]),v=(0,r.useAtomValue)(u.lobbyAlertsAtom),w=(0,a.useRef)(new Set);(0,a.useEffect)(()=>{w.current=new Set(v.map(e=>e.pairAddress))},[v]);let j=(0,a.useCallback)(e=>{try{if("lobbyMemberTransaction"!==e.type)return;let t=e.transaction;if(!t||!Array.isArray(t)||t.length<2)return void console.error("Invalid transaction data structure");let r=t[0],s=0===r?"sol":"bnb",a=t[1],l="sol"===s?(0,i.convertToWalletTrackerTransaction)(a):(0,i.convertToWalletTrackerTransactionBnb)(a);"buy"===l.type&&m(e=>{if(!w.current.has(l.pairAddress))return e;let t=e.sort((e,t)=>t.timestamp-e.timestamp).findIndex(e=>e.tokenAddress===l.tokenAddress&&e.chain===s);if(-1===t)return e;let r=e[t],a=("sol"===s?f():h()).get(l.walletAddress);if(!a)return e;if(!r.holderIds?.includes(a)){let s=[...e];return s[t]={...r,holderIds:[...r.holderIds||[],a]},s}return e});let o="sol"===s?a[0]:a[1],n={t:"tx",ts:o,uid:e.userId,transaction:a,transactionCount:1};b(e=>(0,x.coalesceNewTransaction)(e,n))}catch(t){console.error("Error processing transaction message:",{messageData:e,error:t instanceof Error?t.message:t})}},[m,f,h,b]),{readyState:k}=(0,l.useWebSocketBase)({connectionType:o.ConnectionType.FRIENDS,url:e&&p?g:null,queryParams:y,reconnectAttempts:50,onError:e=>{console.error("WebSocket connection error:",{url:g,error:e.message,readyState:o.ReadyState[k],timestamp:new Date().toISOString()})},onMessage:j})}])},1589,648357,654337,83738,e=>{"use strict";var t=e.i(843476),r=e.i(48493),s=e.i(672464),a=e.i(271645),l=e.i(592846),o=e.i(458768),n=e.i(711858),i=e.i(569692),c=e.i(392335),u=e.i(555702),d=e.i(391735),x=e.i(404289),p=e.i(657688),m=e.i(716689),f=e.i(717744),h=e.i(914717),b=e.i(940096),g=e.i(419006),y=e.i(449885),v=e.i(741124),w=e.i(43351),j=e.i(115906),k=e.i(417082),N=e.i(222527),S=e.i(651422),A=e.i(309521),P=e.i(879197),C=e.i(800473),T=e.i(657421);let I=(0,a.memo)(function({lastPage:e,subpage:r,currentChain:l}){let n=(0,j.useRouter)(),i=(0,s.useSetAtom)(g.currentPerpAtom),c=(0,s.useSetAtom)(b.tabAtom),u=(0,a.useCallback)((e,t,r)=>{try{if("Unknown"===e)throw Error("Unknown page");let s="";switch(e){case"meme":if(!t)throw Error("Meme page requires subpage data");if(!t?.pairAddress)throw Error("Pair address not found in subpage");s=`/meme/${t.pairAddress}`;break;case"discover":if(t){if(!t?.tab)throw Error("Discover tab not found in subpage");c(t.tab)}s="/discover";break;case"perpetuals":if(t){if(!t?.currentPerp)throw Error("Perpetual not found in subpage");i(t.currentPerp)}s="/perpetuals";break;case"pulse":case"trackers":case"rewards":case"vision":case"yield":case"portfolio":s=`/${e}`;break;default:throw Error(`Unhandled page type: ${e}`)}if(r)s+=`?chain=${r}`;else throw Error("Chain not found");n.replace(s)}catch(e){console.error("Error mapping message to page:",e),o.default.error("Error mapping message to page")}},[c,i,n]),d=(0,a.useCallback)(t=>{e&&(t.stopPropagation(),u(e,r||void 0,l||void 0))},[e,r,l,u]),x=(0,a.useMemo)(()=>{if(!e)return null;switch(e){case"meme":if(!r)return null;try{return{type:"pair",name:r.ticker||"Pair",tokenAddress:r.tokenAddress,tokenTicker:r.ticker,tokenName:r.name,protocol:r.protocol,isMigrated:r.isMigrated}}catch{return null}case"perpetuals":if(!r)return null;try{return{type:"perp",name:r.currentPerp,imageUrl:`https://app.hyperliquid.xyz/coins/${r.currentPerp}.svg`}}catch{return null}case"discover":return{type:"page",icon:"ri-compass-3-line",name:"Discover"};case"pulse":return{type:"page",icon:"ri-pulse-line",name:"Pulse"};case"trackers":return{type:"page",icon:"ri-wallet-3-line",name:"Trackers"};case"vision":return{type:"page",icon:"ri-eye-line",name:"Vision"};case"portfolio":return{type:"page",icon:"ri-wallet-line",name:"Portfolio"};case"rewards":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Rewards"};case"yield":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Yield"};default:return null}},[e,r]),m=x?.type==="pair"&&x.protocol&&l?(0,A.getProtocolBadgeBorderWithChain)(x.protocol,x.isMigrated||!1,l):null,f=x?.type==="pair"&&x.protocol&&l?(0,A.getProtocolIconWithChain)(x.protocol,x.isMigrated||!1,l):null,h=(0,a.useMemo)(()=>l?"sol"===l?"bg-sol/35 border border-sol/65 backdrop-blur-[16px] backdrop-saturate-150":"bnb"===l?"bg-bnb/35 border border-bnb/65 backdrop-blur-[16px] backdrop-saturate-150":"bg-backgroundSecondary/80 border border-backgroundSecondary/65":"bg-backgroundSecondary/80",[l]);return x&&l?(0,t.jsxs)("button",{type:"button",onClick:d,className:`transition-brightness flex h-[24px] cursor-pointer flex-row items-center gap-[4px] rounded-full px-[4px] duration-[125ms] ease-in-out hover:brightness-110 ${h}`,children:[l&&(0,t.jsx)(p.default,{src:v.chainToInfoMap[l].icon,alt:l,width:14,height:14,className:"flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex h-[14px] flex-shrink-0 items-center",children:["pair"===x.type&&(0,t.jsxs)("div",{className:"relative h-[14px] w-[14px] rounded-[4px] bg-secondaryStroke",children:[(0,t.jsx)(S.default,{src:"sol"===l?`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${x.tokenAddress}.webp`:`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${x.tokenAddress}.webp`,alt:x.tokenName||"",width:14,height:14,tokenTicker:x.tokenTicker||x.tokenName||"",className:"absolute inset-0 z-10 max-h-[14px] max-w-[14px] rounded-[3px] bg-secondaryStroke object-cover",loading:"eager"}),(0,t.jsx)("div",{className:`absolute -inset-[1px] z-0 rounded-[4px] opacity-[0.35] ${m?.className||""}`,style:m?.style}),(0,t.jsx)("div",{className:`absolute bottom-[-2px] right-[-2px] z-30 flex h-[8px] w-[8px] items-center justify-center rounded-full p-[1px] shadow-sm ${m?.className||""}`,style:m?.style,children:(0,t.jsx)("div",{className:"absolute z-30 flex h-[6px] w-[6px] items-center justify-center rounded-full bg-background",children:(0,t.jsx)(S.default,{src:f||"",tokenTicker:x.tokenTicker||x.tokenName||"",alt:x.protocol||"",width:4,height:4,loading:"eager"})})})]}),"perp"===x.type&&(0,t.jsx)("div",{className:"relative h-[14px] w-[14px] overflow-hidden rounded-[2px]",children:(0,t.jsx)(p.default,{src:x.imageUrl,alt:x.name,width:14,height:14,className:"h-full w-full object-cover",loading:"eager"})}),"page"===x.type&&(0,t.jsx)("i",{className:`${x.icon} text-[12px] leading-none text-textSecondary`})]})]}):null}),M=(0,a.memo)(function({lastPresenceUpdateTimestamp:e,lastPage:r,subpage:i,isOnline:c,size:u="small",currentChain:d,className:x,smallChip:m=!1}){let f=(0,j.useRouter)(),h=(0,a.useMemo)(()=>m?20:"small"===u?16:18,[u,m]),I=(0,a.useMemo)(()=>m?12:"small"===u?13:14,[u,m]),M=(0,a.useMemo)(()=>c?"text-textPrimary":"text-textSecondary",[c]),$=(0,s.useSetAtom)(g.currentPerpAtom),B=(0,s.useSetAtom)(b.tabAtom),L=(0,a.useCallback)((e,t,r)=>{try{if("Unknown"===e)throw Error("Unknown page");let s="";switch(e){case"meme":if(!t)throw Error("Meme page requires subpage data");if(!t?.pairAddress)throw Error("Pair address not found in subpage");s=`/meme/${t.pairAddress}`;break;case"discover":if(t){if(!t?.tab)throw Error("Discover tab not found in subpage");B(t.tab)}s="/discover";break;case"perpetuals":if(t){if(!t?.currentPerp)throw Error("Perpetual not found in subpage");$(t.currentPerp)}s="/perpetuals";break;case"pulse":case"trackers":case"rewards":case"vision":case"yield":case"portfolio":s=`/${e}`;break;default:throw Error(`Unhandled page type: ${e}`)}if(r)s+=`?chain=${r}`;else throw Error("Chain not found");f.replace(s)}catch(e){console.error("Error mapping message to page:",e),o.default.error("Error mapping message to page")}},[B,$,f]),F=(0,a.useCallback)(e=>{r&&c&&(e.stopPropagation(),L(r,i||void 0,d||void 0))},[r,i,c,d,L]),U=(0,a.useMemo)(()=>{if(!r)return null;switch(r){case"meme":if(!i)return null;try{return{type:"pair",name:i.ticker||"Pair",tokenAddress:i.tokenAddress,tokenTicker:i.ticker,tokenName:i.name,protocol:i.protocol,isMigrated:i.isMigrated,pairAddress:i.pairAddress,price:i.price,supply:i.supply}}catch(e){return console.error("Error: user last page",e),null}case"perpetuals":if(!i)return null;try{return{type:"perp",name:i.currentPerp,imageUrl:`https://app.hyperliquid.xyz/coins/${i.currentPerp}.svg`,price:i.price}}catch{return null}case"discover":return{type:"discover",icon:"ri-compass-3-line",name:"Discover",subpage:i};case"pulse":return{type:"page",icon:"ri-pulse-line",name:"Pulse"};case"trackers":return{type:"page",icon:"ri-wallet-3-line",name:"Trackers"};case"vision":return{type:"page",icon:"ri-eye-line",name:"Vision"};case"portfolio":return{type:"page",icon:"ri-wallet-line",name:"Portfolio"};case"rewards":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Rewards"};case"yield":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Yield"};default:return null}},[r,i]),E=(0,s.useAtomValue)((0,a.useMemo)(()=>(0,C.lastActivityPairPriceAtom)(U?.pairAddress||"",U?.price||0),[U?.pairAddress,U?.price])),R=(0,s.useAtomValue)(U?.type==="pair"&&"bnb"===d?w.usdPerBnbAtom:w.usdPerSolAtom),_=(0,s.useSetAtom)(C.friendLastActivityPairPriceAtom),D=(0,a.useRef)(new Set),z=U?.type==="pair"&&U?.pairAddress&&d,{join:H,leave:W}=(0,y.useAxiomWebsocket)({roomsRef:D,enabled:!!z,onMessage:e=>{let{room:t,content:r}=e;if(t.startsWith("bnb|b-")||t.startsWith("b-")){let e=t.startsWith("bnb|b-")?t.slice(6):t.slice(2);_(t=>{let s=new Map(t);return s.set(e,r),s})}}});(0,a.useEffect)(()=>{if(z&&U?.pairAddress&&d){let e=(0,T.getRoomToJoin)(U.pairAddress,d);return H(e),()=>W(e)}},[z,U?.pairAddress,d,H,W]);let{displayStats:V,displayStatsValue:O,marketCapValue:q}=(0,a.useMemo)(()=>{if(U?.type==="pair"){if(E&&U.supply&&R){let e=E*Number(U.supply)*R;return{displayStats:"MC ",displayStatsValue:`$${(0,P.getFormattedNumber)(e,4)}`,marketCapValue:e}}return{displayStats:"",displayStatsValue:"",marketCapValue:null}}return U?.type==="perp"?null!=E?{displayStats:"",displayStatsValue:`${(0,P.getFormattedNumber)(E,4)}`,marketCapValue:null}:{displayStats:"",displayStatsValue:"",marketCapValue:null}:U?.type==="discover"&&U?.subpage?{displayStats:"",displayStatsValue:`${U.subpage?.tab}`,marketCapValue:null}:{displayStats:"",displayStatsValue:"",marketCapValue:null}},[U,E,R]),G=(0,a.useMemo)(()=>null===q?"text-textSecondary":q<=3e4?"text-primaryLightBlue":q<=15e4?"text-primaryYellow":"text-increase",[q]),{t:K}=(0,l.useTranslation)(),Y=U?.type==="pair"&&U.protocol&&d?(0,A.getProtocolBadgeBorderWithChain)(U.protocol,U.isMigrated||!1,d):null,X=U?.type==="pair"&&U.protocol&&d?(0,A.getProtocolIconWithChain)(U.protocol,U.isMigrated||!1,d):null,J=(0,a.useMemo)(()=>d?"sol"===d?"bg-sol/20 hover:bg-sol/30 border border-sol/40":"bnb"===d?"bg-bnb/20 hover:bg-bnb/30 border border-bnb/40":"bg-backgroundSecondary hover:bg-textPrimary/[0.05]":"bg-backgroundSecondary",[d]);if(!c&&0!==e)return(0,t.jsxs)("div",{className:"flex h-[40px] flex-row items-center justify-start gap-[4px] px-[8px] text-[12px] font-medium text-textPrimary opacity-40",children:[(0,t.jsx)("i",{className:"ri-time-line text-[12px]"}),(0,t.jsxs)("span",{children:["Active ",(0,t.jsx)(N.RelativeAge,{date:new Date(e)})," ago"]})]});if(!U)return null;let Q=(0,t.jsxs)("button",{type:"button",onClick:F,className:`flex flex-row items-center ${m?"gap-[4px]":"gap-[6px]"} min-w-0 ${m?"px-[6px]":"px-[8px]"} ${m?"h-[32px]":"h-[40px]"} rounded-full ${J} cursor-pointer transition-colors duration-150 ease-in-out ${x||""}`,children:[d&&!m&&(0,t.jsx)("div",{className:"flex flex-shrink-0 flex-row items-center gap-[4px]",children:(0,t.jsx)(p.default,{src:v.chainToInfoMap[d].icon,alt:d,width:18,height:18})}),"pair"===U.type?(0,t.jsx)("div",{className:"flex flex-shrink-0 flex-row items-center gap-[4px]",children:(0,t.jsx)(n.Tooltip,{content:K(U.isMigrated?"Migrated":U.protocol||""),position:"bottom",children:(0,t.jsxs)("div",{className:`relative ${m?"h-[20px] w-[20px]":"h-[28px] w-[28px]"} rounded-[4px] bg-secondaryStroke`,children:[(0,t.jsx)(S.default,{src:"sol"===d?`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${U.tokenAddress}.webp`:`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${U.tokenAddress}.webp`,alt:U.tokenName||"",width:m?20:28,height:m?20:28,tokenTicker:U.tokenTicker||U.tokenName||"",className:"absolute -inset-[0px] z-10 h-full w-full rounded-[3px] bg-secondaryStroke object-cover",loading:"eager"}),(0,t.jsx)("div",{className:`absolute -inset-[1px] z-0 rounded-[4px] opacity-[0.35] ${Y?.className||""}`,style:Y?.style}),(0,t.jsx)("div",{className:`absolute bottom-[-4px] right-[-4px] z-10 flex h-[12px] w-[12px] items-center justify-center rounded-full p-[2px] shadow-sm ${Y?.className||""}`,style:Y?.style,children:(0,t.jsx)("div",{className:"absolute z-30 flex h-[10px] w-[10px] items-center justify-center rounded-full bg-background",children:(0,t.jsx)(S.default,{src:X||"",tokenTicker:U.tokenTicker||U.tokenName||"",alt:U.protocol||"",width:6,height:6,loading:"eager"})})})]})})}):"perp"===U.type?(0,t.jsx)("div",{className:"flex flex-shrink-0 flex-row items-center gap-[4px]",children:(0,t.jsx)(k.EnlargeTokenImage,{tokenImage:U.imageUrl,tokenTicker:U.name,tokenName:U.name,children:(0,t.jsx)("div",{className:"duration-135 relative rounded-[4px] bg-secondaryStroke transition-all ease-in-out group-hover/token:opacity-80",style:{width:`${h}px`,height:`${h}px`},children:(0,t.jsx)(S.default,{src:U.imageUrl,alt:U.name,width:h,height:h,tokenTicker:U.name,className:"absolute -inset-[0px] z-10 h-full w-full rounded-[3px] bg-secondaryStroke object-cover",loading:"eager"})})})}):"page"===U.type?(0,t.jsx)("div",{className:"flex flex-shrink-0 flex-row items-center gap-[4px]",children:(0,t.jsx)("div",{className:"flex items-center justify-center",style:{width:`${m?20:h}px`,height:`${m?20:h}px`},children:(0,t.jsx)("i",{className:U.icon,style:{fontSize:`${m?16:h}px`}})})}):null,(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start",children:[(0,t.jsx)("span",{className:`${m?"text-[12px]":`text-[${I}px]`} ${M} max-h-[16px] max-w-full overflow-hidden truncate whitespace-nowrap font-medium`,children:m&&"pair"===U.type&&U.tokenTicker||U.name}),(!m||V||O)&&(0,t.jsxs)("span",{className:"text-[11px] max-h-[16px] max-w-full overflow-hidden truncate whitespace-nowrap font-medium",children:[V&&(0,t.jsx)("span",{className:"text-textSecondary",children:V}),(0,t.jsx)("span",{className:null!==q?G:"text-textSecondary",children:O})]})]})]});return m&&"pair"===U.type?(0,t.jsx)(n.Tooltip,{content:U.tokenName||U.name,position:"bottom",children:Q}):Q});e.s(["FriendActivityButton",0,M,"MiniatureActivityButton",0,I],648357);let $=(0,a.memo)(function({friend:e,isOnline:r,showOnline:s=!0,isWindowModal:l=!1,size:o=40}){let i=(0,a.useMemo)(()=>l?"bg-background":"bg-backgroundSecondary",[l]),c=(0,a.useMemo)(()=>l?"bg-backgroundTertiary":"bg-backgroundSecondary",[l]),u=(0,a.useMemo)(()=>r?"away"===e.presence?"bg-primaryOrange":"bg-primaryGreen":"border-[3px] border-textTertiary",[e.presence,r]);return(0,t.jsxs)("div",{className:`relative w-[${o}px] h-[${o}px] flex-shrink-0 overflow-visible rounded-full shadow-[0_6px_10px_-1px_rgba(0,0,0,0.15),0_4px_6px_-1px_rgba(0,0,0,0.06)] ${i}`,children:[(0,t.jsxs)("div",{className:"relative h-full w-full flex-shrink-0 overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(p.default,{src:e.userProfile.avatarUrl||(0,h.generateDefaultProfilePicture)(e.userProfile.username),alt:e.userProfile.username||"",width:o,height:o,className:"flex-shrink-0 object-cover",draggable:!1})]}),s&&(0,t.jsx)(n.Tooltip,{content:e.presence,position:"top",children:(0,t.jsx)("div",{className:`absolute bottom-[0px] right-[0px] z-[20] flex h-[16px] w-[16px] flex-shrink-0 items-center justify-center rounded-full ${c}`,children:(0,t.jsx)("div",{className:`h-[10px] w-[10px] rounded-full ${u}`})})})]})}),B=(0,a.memo)(function({friend:e,isWindowModal:r=!1,showBanners:l=!0,onUnfriendClick:u,onInviteToLobby:d,onRequestJoinLobby:x}){let b=(0,s.useSetAtom)(i.friendProfileDataAtom),g=(0,s.useAtomValue)(c.myLobbyInfoAtom),y=(0,s.useSetAtom)(m.socialProfileOpenAtom),v=(0,a.useMemo)(()=>!!g&&g.members.some(t=>t.userProfile.userId===e.userProfile.userId),[g,e.userProfile.userId]),w=(0,a.useMemo)(()=>!!g&&!!e.lobbyInfo&&e.lobbyInfo.lobbyId===g.lobbyId,[g,e.lobbyInfo]),j=(0,a.useCallback)(t=>{t.stopPropagation(),b(()=>({userProfile:e.userProfile,relationshipId:e.relationshipId,currentPage:e.currentPage,currentSubpage:e.currentSubpage,lastUpdatedTimestamp:e.lastUpdatedTimestamp,currentChain:e.currentChain,presence:e.presence})),y(!0)},[b,e]),k=(0,a.useMemo)(()=>r?"bg-background":"bg-backgroundSecondary",[r]),N=(0,a.useMemo)(()=>"offline"!==e.presence,[e.presence]),S=(0,a.useMemo)(()=>{let t=e.userProfile.color||"#FFFFFF",r=N?.35:.05;if(t.startsWith("#")){let e=t.slice(1),s=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16);return`rgba(${s}, ${a}, ${l}, ${r})`}return t},[e.userProfile.color,N]),A=(0,a.useMemo)(()=>{if(!e.lobbyInfo?.name)return"";let t=e.lobbyInfo.name;return t.length>10?`${t.slice(0,10)}...`:t},[e.lobbyInfo?.name]);return(0,t.jsxs)("div",{className:"group/kolrow relative flex flex-shrink-0 cursor-pointer flex-col overflow-hidden rounded-[12px] border border-white/[0.065] bg-backgroundSecondary",onClick:j,children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-x-[1px] -inset-y-[1px] z-[15] translate-y-[1px] rounded-[12px] border-[1px] border-white/[0.035]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[100] rounded-[12px] transition-all duration-100 group-hover/kolrow:bg-white/[0.02]"}),(0,t.jsxs)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] z-[0] opacity-[0.55] transition-opacity duration-100 group-hover/kolrow:opacity-[0.75]",children:[(0,t.jsxs)("div",{className:"absolute inset-0 h-full w-full overflow-hidden rounded-[12px] blur-[80px] brightness-[0.65] saturate-[1.3]",children:[e.userProfile.avatarUrl?(0,t.jsx)(p.default,{src:e.userProfile.avatarUrl,alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.style.visibility="hidden"},loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(p.default,{src:(0,h.generateDefaultProfilePicture)(e.userProfile.username),alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-10 h-[150px] bg-gradient-to-t from-backgroundSecondary to-transparent"})]}),(0,t.jsx)("div",{className:"absolute inset-0 scale-110 rounded-[12px] bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute h-[400px] w-[400px] rounded-full opacity-30 blur-[60px]",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute h-[300px] w-[300px] rounded-full opacity-25 blur-[50px]",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}})]}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[5] rounded-[12px] bg-gradient-to-br from-white/[0.02] to-transparent"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[10] rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)]"}),(0,t.jsxs)("div",{className:"relative z-[10] flex flex-col",children:[l&&(0,t.jsxs)("div",{className:`relative h-[52px] w-full ${k}`,children:[e.userProfile.bannerUrl?(0,t.jsx)(p.default,{src:e.userProfile.bannerUrl,alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1}):(0,t.jsx)(p.default,{src:(0,f.generateDefaultBanner)(e.userProfile.username),alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1}),(0,t.jsxs)("div",{className:"absolute right-[8px] top-[8px] z-[9999] flex flex-row items-center gap-[4px] opacity-0 group-hover/kolrow:opacity-100",children:[d&&!v&&(0,t.jsx)(n.Tooltip,{content:"Invite to lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] cursor-pointer flex-row items-center justify-center rounded-full bg-primaryBlueHover/20 transition-all duration-[125ms] ease-in-out hover:bg-primaryBlueHover/30",onClick:t=>{(t.stopPropagation(),e.relationshipId)?d(e.relationshipId):o.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[14px] text-primaryBlue transition-colors duration-[125ms] ease-in-out group-hover/btn:text-primaryBlueHover"})})}),x&&!w&&(0,t.jsx)(n.Tooltip,{content:"Request to join lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] cursor-pointer flex-row items-center justify-center rounded-full bg-primaryBlueHover/20 transition-all duration-[125ms] ease-in-out hover:bg-primaryBlueHover/30",onClick:t=>{(t.stopPropagation(),e.relationshipId)?x(e.relationshipId):o.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-login-box-line text-[14px] text-primaryBlue transition-colors duration-[125ms] ease-in-out group-hover/btn:text-primaryBlueHover"})})}),(0,t.jsx)(n.Tooltip,{content:"Unfriend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-decreaseHover/15",onClick:t=>{(t.stopPropagation(),e.relationshipId)?u(e.relationshipId,e.userProfile.username):o.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-minus-line text-[14px] text-decrease transition-colors duration-[125ms] ease-in-out group-hover/btn:text-decreaseHover"})})})]})]}),(0,t.jsxs)("div",{className:`relative flex flex-row items-center justify-between gap-[4px] p-[12px] ${l?"":"pt-[12px]"}`,style:{background:`linear-gradient(to right, transparent 50%, ${S})`},children:[l&&(0,t.jsx)("div",{className:"absolute left-0 right-0 top-0 h-[8px] overflow-hidden opacity-100",children:(0,t.jsx)("div",{className:"absolute inset-0 -top-[52px]",style:{maskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)"},children:e.userProfile.bannerUrl?(0,t.jsx)(p.default,{src:e.userProfile.bannerUrl,alt:"",fill:!0,className:"object-cover blur-md",draggable:!1}):(0,t.jsx)(p.default,{src:(0,f.generateDefaultBanner)(e.userProfile.username),alt:"",fill:!0,className:"object-cover blur-md",draggable:!1})})}),(0,t.jsxs)("div",{className:"flex min-h-[52px] flex-row items-center gap-[10px]",children:[(0,t.jsx)($,{friend:e,isOnline:N,isWindowModal:r}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsxs)("div",{className:"flex h-[28px] max-h-[28px] min-h-[28px] min-w-0 flex-row items-center gap-[6px]",children:[(0,t.jsx)(n.Tooltip,{content:e.userProfile.username,position:"top",quickShow:!1,children:(0,t.jsx)("span",{className:"truncate text-[16px] font-medium text-textPrimary opacity-90",children:e.userProfile.username.length>6?`${e.userProfile.username.slice(0,6)}...`:e.userProfile.username})}),!l&&(0,t.jsxs)("div",{className:"relative z-[9999] flex flex-row items-center gap-[4px] opacity-0 group-hover/kolrow:opacity-100",children:[d&&!v&&(0,t.jsx)(n.Tooltip,{content:"Invite to lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full transition-colors hover:bg-primaryBlueHover/15",onClick:t=>{(t.stopPropagation(),e.relationshipId)?d(e.relationshipId):o.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[14px] text-primaryBlue transition-colors group-hover/btn:text-primaryBlueHover"})})}),x&&!w&&(0,t.jsx)(n.Tooltip,{content:"Request to join lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full transition-colors hover:bg-primaryBlueHover/15",onClick:t=>{(t.stopPropagation(),e.relationshipId)?x(e.relationshipId):o.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-login-box-line text-[14px] text-primaryBlue transition-colors group-hover/btn:text-primaryBlueHover"})})}),(0,t.jsx)(n.Tooltip,{content:"Unfriend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-background/80 flex h-[28px] w-[28px] flex-shrink-0 flex-row items-center justify-center rounded-full hover:bg-decreaseHover/10 hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:t=>{(t.stopPropagation(),e.relationshipId)?u(e.relationshipId,e.userProfile.username):o.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-minus-line text-[14px] text-decrease transition-colors group-hover/btn:text-decreaseHover"})})})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[e.userProfile.socialLinks&&Object.values(e.userProfile.socialLinks).some(e=>null!==e)&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[e.userProfile.socialLinks?.twitterHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitterHandle.startsWith("http")?e.userProfile.socialLinks.twitterHandle:`https://x.com/${e.userProfile.socialLinks.twitterHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[24px] w-[24px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitter-x-line text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.youtubeHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.youtubeHandle.startsWith("http")?e.userProfile.socialLinks.youtubeHandle:`https://youtube.com/@${e.userProfile.socialLinks.youtubeHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[24px] w-[24px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-youtube-fill text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.twitchHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitchHandle.startsWith("http")?e.userProfile.socialLinks.twitchHandle:`https://twitch.tv/${e.userProfile.socialLinks.twitchHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[24px] w-[24px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitch-fill text-[14px] text-textPrimary/90"})})]}),e.lobbyInfo&&e.lobbyInfo.lobbyId!==e.userProfile.userId&&e.lobbyInfo.memberCount>1&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)("i",{className:"ri-team-line text-[12px] text-primaryBlueHover"}),(0,t.jsxs)("span",{className:"truncate text-[12px] text-textSecondary opacity-90",children:[e.lobbyInfo.memberCount,"  ",A]})]})]})]})]}),(0,t.jsx)("div",{className:"absolute right-[12px] z-[10] flex flex-row gap-[4px]",children:(0,t.jsx)(M,{lastPage:e.currentPage??null,subpage:e.currentSubpage??null,currentChain:e.currentChain||null,isOnline:N,lastPresenceUpdateTimestamp:e.lastUpdatedTimestamp,size:"small"})})]})]})]})});var L=e.i(751380),F=e.i(287052),U=e.i(481240);let E=(0,a.memo)(function({isWindowModal:e=!1,showBanners:r=!0}){let l=(0,s.useAtomValue)(c.myLobbyInfoAtom),o=(0,s.useAtomValue)(i.userProfileIdAtom),n=(0,a.useMemo)(()=>l?.leaderUserId===o,[l?.leaderUserId,o]),u=(0,a.useMemo)(()=>l?.members&&Array.isArray(l.members)?[...l.members].sort((e,t)=>{let r=e.userProfile.userId===l?.leaderUserId,s=t.userProfile.userId===l?.leaderUserId;return r&&!s?-1:!r&&s?1:0}):[],[l?.members,l?.leaderUserId]),d=(0,a.useMemo)(()=>{let e=l?.name??"Lobby";return e.length>28?`${e.slice(0,28)}...`:e},[l?.name]);return u.length?(0,t.jsxs)("div",{className:"flex flex-col gap-[8px] pb-[6px]",children:[(0,t.jsxs)("div",{className:"flex h-[28px] w-full flex-row items-center justify-between gap-[8px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[(0,t.jsx)("i",{className:"ri-team-line text-[16px] text-primaryBlueHover"}),(0,t.jsxs)("span",{className:"text-[14px] text-textSecondary",children:[d," ",u.length,"/10"]})]}),(0,t.jsx)(U.LeaveResetLobby,{})]}),(0,t.jsx)("div",{className:"custom-scrollbar flex flex-col gap-[12px] overflow-y-auto",children:u.map(s=>(0,t.jsx)(_,{member:s,isLeader:n,leaderUserId:l?.leaderUserId??"",isWindowModal:e,showBanners:r},s.userProfile.userId))})]}):(0,t.jsxs)("div",{className:"flex h-full flex-col gap-[8px]",children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center gap-[4px]",children:[(0,t.jsx)("i",{className:"ri-team-line text-[14px] text-primaryBlueHover"}),(0,t.jsxs)("span",{className:"text-[14px] text-textSecondary",children:[d," 0/10"]})]}),(0,t.jsx)("div",{className:"py-[16px] text-center text-[14px] text-textSecondary",children:"No members in lobby"})]})}),R=(0,a.memo)(function({chainTotal:e,displayWallets:r}){let{t:s}=(0,l.useTranslation)(),i=v.chainToInfoMap[e.chain],c=e.pnl>=0,u=(0,a.useCallback)(e=>{navigator.clipboard.writeText(e).then(()=>{o.default.success({message:s("Address copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-[16px] text-primaryBlue"})},{duration:1500})}).catch(()=>{o.default.error(s("Failed to copy to clipboard"))})},[s]),d=(0,a.useCallback)(e=>e.length<=10?e:`${e.slice(0,4)}...${e.slice(-3)}`,[]),x=r.filter(t=>t.chain===e.chain),m=x.length>0?(0,t.jsx)("div",{className:"-mx-[8px] -my-[4px]",onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),role:"presentation",children:(0,t.jsx)("div",{className:"custom-scrollbar max-h-[240px] overflow-y-auto",children:(0,t.jsx)("div",{className:"flex flex-col gap-[4px] px-[4px] pb-[6px] pt-[4px]",children:x.map(e=>{let r=v.chainToInfoMap[e.chain];return(0,t.jsxs)("div",{className:"group/wallet flex flex-row items-center justify-between gap-[8px] rounded-[8px] p-[8px] transition-colors duration-200 hover:bg-white/[0.02]",children:[(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-row items-center gap-[6px]",children:[(0,t.jsxs)("div",{className:"bg-backgroundPrimary/40 flex h-[26px] flex-shrink-0 flex-row items-center justify-start gap-[4px] rounded-full border border-textPrimary/[0.05] pl-[6px] pr-[8px]",children:[(0,t.jsx)(p.default,{src:r.icon,alt:r.full,width:16,height:16,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[16px] text-textSecondary opacity-90",dangerouslySetInnerHTML:{__html:(0,P.getFormattedNumber)(e.balance,4)}})]}),(0,t.jsx)("span",{className:"truncate text-[12px] font-normal leading-[16px] text-textTertiary opacity-70",children:d(e.walletAddress)})]}),(0,t.jsxs)("div",{className:"flex flex-shrink-0 flex-row items-center gap-[4px]",children:[(0,t.jsx)(n.Tooltip,{content:"Copy address",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),u(e.walletAddress)},className:"group/copy flex h-[28px] w-[28px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)("i",{className:"ri-file-copy-line text-[13px] text-textPrimary/70 group-hover/copy:text-textPrimary/90"})})}),(0,t.jsx)(n.Tooltip,{content:`Open in ${v.chainToInfoMap[e.chain].explorer.name}`,position:"top",children:(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),window.open(v.chainToInfoMap[e.chain].explorer.link({address:e.walletAddress}),"_blank")},className:"group/share flex h-[28px] w-[28px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)("i",{className:"ri-share-box-line text-[13px] text-textPrimary/70 group-hover/share:text-textPrimary/90"})})})]})]},`${e.chain}-${e.walletAddress}`)})})})}):(0,t.jsxs)("span",{className:"text-[12px] text-textSecondary",children:[i.full," wallets"]});return(0,t.jsx)(n.Tooltip,{content:m,position:"bottom",persistent:!0,vibrancy:!0,quickShow:!1,width:"auto",maxWidth:"248px",rounded:"12px",children:(0,t.jsxs)("div",{className:"bg-backgroundPrimary/40 hover:bg-backgroundPrimary/60 relative flex h-[28px] cursor-pointer flex-row items-center justify-start gap-[8px] rounded-full border-[2px] border-textPrimary/[0.05] px-[8px] transition-colors duration-200",onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),role:"presentation",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)("i",{className:"ri-wallet-line text-[14px] text-textTertiary opacity-90"}),(0,t.jsx)("span",{className:"text-[12px] font-medium text-textSecondary opacity-90",children:e.count})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[8px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)(p.default,{src:i.icon,alt:i.full,width:14,height:14,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"text-[12px] font-medium text-textSecondary opacity-90",dangerouslySetInnerHTML:{__html:(0,P.getFormattedNumber)(e.balance,4)}})]}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-[4px]",children:(0,t.jsx)("span",{className:`text-[12px] font-medium opacity-90 ${c?"text-increase":"text-decrease"}`,dangerouslySetInnerHTML:{__html:`${c?"+":""}${(0,P.getFormattedNumber)(e.pnl,4)}`}})})]})]})})}),_=(0,a.memo)(function({member:e,isLeader:r,leaderUserId:l,isWindowModal:o=!1,showBanners:c=!0}){let{transferOwnership:u,kickFromLobby:m}=(0,d.useLobbyApi)(),b=(0,s.useAtomValue)(i.userProfileIdAtom),{avatarBackground:g,avatarFallback:y}=(0,a.useMemo)(()=>{let t=(0,h.generateDefaultProfilePicture)(e.userProfile.username??e.userProfile.userId??"?");return{avatarBackground:e.userProfile.avatarUrl??t,avatarFallback:t}},[e.userProfile.avatarUrl,e.userProfile.username,e.userProfile.userId]),{chainTotals:v,displayWallets:w}=(0,a.useMemo)(()=>{let t=[],r=[];try{if(!e?.sharedWallets)return{chainTotals:t,displayWallets:r};if(e.sharedWallets.sol)try{let s=e.sharedWallets.sol,a=s?.sharedWalletBalances||{},l=s?.stats||{totalBalance:0,totalPnl:0},o=Object.keys(a);if(o.length>0){t.push({chain:"sol",balance:l.totalBalance??0,pnl:l.totalPnl??0,count:o.length});let e=l.totalBalance??0,s=l.totalPnl??0;for(let[t,l]of Object.entries(a)){let a=e>0?(l??0)/e*s:0;r.push({walletAddress:t,chain:"sol",balance:l??0,pnl:a})}}}catch(e){console.error("Error processing SOL wallets for member:",e)}if(e.sharedWallets.bnb)try{let s=e.sharedWallets.bnb,a=s?.sharedWalletBalances||{},l=s?.stats||{totalBalance:0,totalPnl:0},o=Object.keys(a);if(o.length>0){t.push({chain:"bnb",balance:l.totalBalance??0,pnl:l.totalPnl??0,count:o.length});let e=l.totalBalance??0,s=l.totalPnl??0;for(let[t,l]of Object.entries(a)){let a=e>0?(l??0)/e*s:0;r.push({walletAddress:t,chain:"bnb",balance:l??0,pnl:a})}}}catch(e){console.error("Error processing BNB wallets for member:",e)}}catch(e){console.error("Error processing member wallets:",e)}return{chainTotals:t,displayWallets:r}},[e?.sharedWallets]),j=(0,s.useAtomValue)(i.friendListAtom),{addFriend:k}=(0,x.useSocialTracker)(),N=(0,a.useMemo)(()=>j.has(e.userProfile.username),[j,e.userProfile.username]),S=(0,a.useCallback)(()=>{e.userProfile.username&&!N&&k(e.userProfile.username)},[k,e.userProfile.username,N]),A=(0,F.useRedirectToProfile)()(e.userProfile.userId),P=(0,a.useMemo)(()=>o?"bg-background":"bg-backgroundSecondary",[o]),C=(0,a.useMemo)(()=>"offline"!==e.presence,[e.presence]),T=(0,a.useMemo)(()=>{let t=e.userProfile.color||"#FFFFFF",r=C?.35:.05;if(t.startsWith("#")){let e=t.slice(1),s=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16);return`rgba(${s}, ${a}, ${l}, ${r})`}return t},[e.userProfile.color,C]),I=(0,a.useMemo)(()=>{let t=j.get(e.userProfile.username);return{userProfile:e.userProfile,relationshipId:t?.relationshipId??null,currentPage:e.currentPage,currentSubpage:e.currentSubpage,lastUpdatedTimestamp:e.lastUpdatedTimestamp,currentChain:e.currentChain,presence:e.presence}},[e,j]),B=(0,a.useMemo)(()=>e.userProfile.userId===b,[e.userProfile.userId,b]),{canFollowUser:U,handleFollowLobby:E,isFollowingUser:_}=(0,L.useFollowUser)(e);return(0,t.jsxs)("div",{className:"group/kolrow relative flex flex-shrink-0 cursor-pointer flex-col overflow-hidden rounded-[12px] border border-white/[0.065] bg-backgroundSecondary",onClick:A,children:[_&&(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-[1px] z-[99] animate-pulse rounded-[12px] border-[2px] border-primaryBlueHover"}),(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-x-[1px] -inset-y-[1px] z-[15] translate-y-[1px] rounded-[12px] border-[1px] border-white/[0.035]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[100] rounded-[12px] transition-all duration-100 group-hover/kolrow:bg-white/[0.02]"}),(0,t.jsxs)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] z-[0] opacity-[0.55] transition-opacity duration-100 group-hover/kolrow:opacity-[0.75]",children:[(0,t.jsxs)("div",{className:"absolute inset-0 h-full w-full overflow-hidden rounded-[12px] blur-[80px] brightness-[0.65] saturate-[1.3]",children:[e.userProfile.avatarUrl?(0,t.jsx)(p.default,{src:g,alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.style.visibility="hidden"},loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(p.default,{src:y,alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-10 h-[150px] bg-gradient-to-t from-backgroundSecondary to-transparent"})]}),(0,t.jsx)("div",{className:"absolute inset-0 scale-110 rounded-[12px] bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute h-[400px] w-[400px] rounded-full opacity-30 blur-[60px]",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute h-[300px] w-[300px] rounded-full opacity-25 blur-[50px]",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}})]}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[5] rounded-[12px] bg-gradient-to-br from-white/[0.02] to-transparent"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[10] rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)]"}),(0,t.jsxs)("div",{className:"relative z-[10] flex flex-col",children:[c&&(0,t.jsx)("div",{className:`relative h-[52px] w-full ${P}`,children:e.userProfile.bannerUrl?(0,t.jsx)(p.default,{src:e.userProfile.bannerUrl,alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1}):(0,t.jsx)(p.default,{src:(0,f.generateDefaultBanner)(e.userProfile.username),alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1})}),(0,t.jsxs)("div",{className:`relative flex flex-row items-center justify-between gap-[4px] p-[12px] ${c?"":"pt-[12px]"}`,style:{background:`linear-gradient(to right, transparent 50%, ${T})`},children:[c&&(0,t.jsx)("div",{className:"absolute left-0 right-0 top-0 h-[8px] overflow-hidden opacity-100",children:(0,t.jsx)("div",{className:"absolute inset-0 -top-[52px]",style:{maskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)"},children:e.userProfile.bannerUrl?(0,t.jsx)(p.default,{src:e.userProfile.bannerUrl,alt:"",fill:!0,className:"object-cover blur-md",draggable:!1}):(0,t.jsx)(p.default,{src:(0,f.generateDefaultBanner)(e.userProfile.username),alt:"",fill:!0,className:"object-cover blur-md",draggable:!1})})}),(0,t.jsxs)("div",{className:"flex max-h-[52px] min-h-[52px] flex-row items-center gap-[10px]",children:[(0,t.jsx)($,{friend:I,isOnline:C,isWindowModal:o}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsxs)("div",{className:"flex h-[28px] max-h-[28px] min-h-[28px] min-w-0 flex-row items-center gap-[6px]",children:[e.userProfile.userId===l?(0,t.jsx)(n.Tooltip,{content:`${e.userProfile.username} (Lobby Leader)`,position:"top",quickShow:!1,children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[(0,t.jsx)("i",{className:"ri-vip-crown-line flex-shrink-0 text-[14px] text-yellow-500"}),(0,t.jsx)("span",{className:`cursor-default truncate text-[16px] font-medium ${B?"text-primaryBlueHover":"text-textPrimary opacity-90"}`,children:e.userProfile.username.length>6?`${e.userProfile.username.slice(0,6)}...`:e.userProfile.username})]})}):(0,t.jsx)(n.Tooltip,{content:e.userProfile.username,position:"top",quickShow:!1,children:(0,t.jsx)("span",{className:`truncate text-[16px] font-medium ${B?"text-primaryBlueHover":"text-textPrimary opacity-90"}`,children:e.userProfile.username.length>6?`${e.userProfile.username.slice(0,6)}...`:e.userProfile.username})}),e.userProfile.socialLinks&&Object.values(e.userProfile.socialLinks).some(e=>null!==e)&&(0,t.jsxs)("div",{className:"flex flex-shrink-0 flex-row items-center gap-[4px]",children:[e.userProfile.socialLinks?.twitterHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitterHandle.startsWith("http")?e.userProfile.socialLinks.twitterHandle:`https://x.com/${e.userProfile.socialLinks.twitterHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[24px] w-[24px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitter-x-line text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.youtubeHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.youtubeHandle.startsWith("http")?e.userProfile.socialLinks.youtubeHandle:`https://youtube.com/@${e.userProfile.socialLinks.youtubeHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[24px] w-[24px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-youtube-fill text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.twitchHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitchHandle.startsWith("http")?e.userProfile.socialLinks.twitchHandle:`https://twitch.tv/${e.userProfile.socialLinks.twitchHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[24px] w-[24px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitch-fill text-[14px] text-textPrimary/90"})})]})]}),!B&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[(0,t.jsx)(n.Tooltip,{content:_?"Stop following":U?"Follow user":"Cannot follow user",position:"top",children:(0,t.jsx)("button",{type:"button",disabled:!U&&!_,className:`group/btn flex h-[28px] w-[28px] cursor-pointer flex-row items-center justify-center rounded-full transition-all duration-[125ms] ease-in-out ${_?"bg-primaryBlueHover/20 hover:bg-primaryBlueHover/30":"bg-gray-500/15 hover:bg-gray-500/20"} ${!U&&!_?"cursor-not-allowed opacity-50":""}`,onClick:e=>{e.stopPropagation(),E()},children:(0,t.jsx)("i",{className:`ri-crosshair-2-line text-[14px] transition-colors duration-[125ms] ease-in-out ${_?"text-primaryBlueHover":"text-white/80"}`})})}),r&&e.userProfile.userId!==b&&(0,t.jsx)(n.Tooltip,{content:"Transfer ownership",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:t=>{t.stopPropagation(),e.userProfile.userId&&u(e.userProfile.userId)},children:(0,t.jsx)("i",{className:"ri-vip-crown-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),!N&&(0,t.jsx)(n.Tooltip,{content:"Add friend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:e=>{e.stopPropagation(),S()},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),r&&e.userProfile.userId!==b&&(0,t.jsx)(n.Tooltip,{content:"Kick from lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[28px] w-[28px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:t=>{t.stopPropagation(),e.userProfile.userId&&m(e.userProfile.userId)},children:(0,t.jsx)("i",{className:"ri-user-unfollow-line text-[14px] text-decrease/80 transition-colors duration-[125ms] ease-in-out"})})})]})]})]}),e.userProfile.userId!==b&&(0,t.jsx)("div",{className:"absolute right-[12px] z-[10] flex flex-row gap-[4px]",children:(0,t.jsx)(M,{lastPage:e.currentPage??null,subpage:e.currentSubpage??null,currentChain:e.currentChain||null,isOnline:C,lastPresenceUpdateTimestamp:e.lastUpdatedTimestamp,size:"small"})})]})]}),v.length>0&&(0,t.jsx)("div",{className:"px-[12px] py-[8px]",children:(0,t.jsx)("div",{className:"flex min-w-0 flex-row items-center justify-between gap-[12px]",children:(0,t.jsx)("div",{className:"flex min-w-0 flex-1 flex-row flex-wrap items-center gap-[6px]",children:v.map(e=>(0,t.jsx)(R,{chainTotal:e,displayWallets:w},e.chain))})})})]})});var D=e.i(846932),z=e.i(750214),H=e.i(174080);e.i(645359);var W=e.i(121367),V=e.i(321207),O=e.i(458359),q=e.i(563150),G=e.i(695636),K=e.i(560985),Y=e.i(542119),X=e.i(846211),J=e.i(490257);function Q(e){let[t,r]=(0,a.useState)([]),[s,l]=(0,a.useState)(null),[o,n]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!0),[x,p]=(0,a.useState)(""),{socialApiGet:m}=(0,X.useRateLimitedSocialApi)(X.socialApiRateLimitAtom),f=(0,a.useRef)(""),h=(0,a.useRef)(!1),b=(0,z.useAtomCallback)((0,a.useCallback)(e=>e(Y.userIdAtom),[])),g="incoming"===e?"/incoming-friend-requests":"/outgoing-friend-requests",y=(0,a.useCallback)(async t=>{let s=t??x;if(f.current=s,!h.current){h.current=!0,n(!0);try{let e={};s.trim()&&(e.search=s.trim());let t=await m(g,e,b()??void 0);f.current===s&&(r(t.requests),l(t.nextCursor),d(null!==t.nextCursor))}catch(t){console.error(`Error fetching ${e} friend requests:`,t),f.current===s&&(r([]),d(!1))}finally{h.current=!1,n(!1)}}},[g,x,e,b,m]),v=(0,a.useCallback)(async()=>{if(u&&!o&&!i&&s){c(!0);try{let e={cursor:s};x.trim()&&(e.search=x.trim());let t=await m(g,e,b()??void 0);r(e=>{let r=new Set(e.map(e=>e.profile.userId)),s=t.requests.filter(e=>!r.has(e.profile.userId));return[...e,...s]}),l(t.nextCursor),d(null!==t.nextCursor)}catch(t){console.error(`Error fetching more ${e} friend requests:`,t)}finally{c(!1)}}},[s,g,u,o,i,x,e,b,m]),w=(0,a.useCallback)(e=>{p(e),l(null),d(!0)},[]),j=(0,a.useCallback)(()=>{r([]),l(null),d(!0),p(""),f.current=""},[]),k=(0,a.useCallback)(e=>{r(t=>t.filter(t=>t.relationshipId!==e))},[]),N=(0,a.useCallback)(e=>{r(t=>t.filter(t=>t.profile.userId!==e))},[]),S=(0,a.useCallback)(t=>{r(r=>{r.find(e=>e.profile.userId===t.profile.userId)&&J.relationshipEvents.emitCountChange(e,-1);let s=r.filter(e=>e.profile.userId!==t.profile.userId);if(f.current){let e=f.current.toLowerCase(),a=t.profile.username.toLowerCase(),l=t.requestUsername?.toLowerCase();if(!a.startsWith(e)&&!l?.startsWith(e))return s.length!==r.length?s:r}return[t,...s]})},[e]);return(0,a.useEffect)(()=>{let t="incoming"===e?J.relationshipEvents.onIncomingRequest(S):J.relationshipEvents.onOutgoingRequest(S);return()=>{t()}},[e,S]),(0,a.useEffect)(()=>{let t="incoming"===e?J.relationshipEvents.onRemoveIncomingRequest(N):J.relationshipEvents.onRemoveOutgoingRequest(N);return()=>{t()}},[e,N]),{items:t,isLoading:o,isFetchingMore:i,hasMore:u,search:x,setSearch:w,fetchInitial:y,fetchMore:v,reset:j,removeItem:k}}let Z=(0,a.memo)(function(){let{t:e}=(0,l.useTranslation)(),[n,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(""),p=(0,s.useSetAtom)(i.addFriendModalOpenAtom),m=(0,s.useAtomValue)(i.userProfileAtom),f=(0,s.useAtomValue)(i.addFriendModalInitialTabAtom),h=(0,s.useSetAtom)(i.addFriendModalInitialTabAtom),[b,g]=(0,a.useState)(f||"sent"),y=Q("incoming"),v=Q("outgoing"),[w,j]=(0,a.useState)([]),k=(0,a.useMemo)(()=>{let e=new Set,t=[];for(let r of w)e.has(r.profile.userId)||(e.add(r.profile.userId),t.push(r));for(let r of v.items)e.has(r.profile.userId)||(e.add(r.profile.userId),t.push(r));return t},[w,v.items]),N=function(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!0),[d,x]=(0,a.useState)(""),{socialApiGet:p}=(0,X.useRateLimitedSocialApi)(X.socialApiRateLimitAtom),m=(0,a.useRef)(""),f=(0,a.useRef)(!1),h=(0,z.useAtomCallback)((0,a.useCallback)(e=>e(Y.userIdAtom),[])),b=(0,a.useCallback)(async e=>{let r=e??d;if(m.current=r,!f.current){f.current=!0,o(!0);try{let e={};r.trim()&&(e.search=r.trim());let a=await p("/blocked-users",e,h()??void 0);m.current===r&&(t(a.users),s(a.nextCursor),u(null!==a.nextCursor))}catch(e){console.error("Error fetching blocked users:",e),m.current===r&&(t([]),u(!1))}finally{f.current=!1,o(!1)}}},[d,h,p]),g=(0,a.useCallback)(async()=>{if(c&&!l&&!n&&r){i(!0);try{let e={cursor:r};d.trim()&&(e.search=d.trim());let a=await p("/blocked-users",e,h()??void 0);t(e=>{let t=new Set(e.map(e=>e.userProfile.userId)),r=a.users.filter(e=>!t.has(e.userProfile.userId));return[...e,...r]}),s(a.nextCursor),u(null!==a.nextCursor)}catch(e){console.error("Error fetching more blocked users:",e)}finally{i(!1)}}},[r,c,l,n,d,h,p]),y=(0,a.useCallback)(e=>{x(e),s(null),u(!0)},[]),v=(0,a.useCallback)(()=>{t([]),s(null),u(!0),x(""),m.current=""},[]),w=(0,a.useCallback)(e=>{t(t=>t.filter(t=>t.relationshipId!==e))},[]),j=(0,a.useCallback)(e=>{t(t=>{let r=t.filter(t=>t.userProfile.userId!==e.userProfile.userId);if(m.current){let s=m.current.toLowerCase();if(!e.userProfile.username.toLowerCase().startsWith(s))return r.length!==t.length?r:t}return[e,...r]})},[]);return(0,a.useEffect)(()=>{let e=J.relationshipEvents.onBlockedUser(j);return()=>{e()}},[j]),{items:e,isLoading:l,isFetchingMore:n,hasMore:c,search:d,setSearch:y,fetchInitial:b,fetchMore:g,reset:v,removeItem:w}}(),{counts:S,fetchCounts:A,decrementCount:P,incrementCount:C}=function(){let[e,t]=(0,a.useState)(null),[r,s]=(0,a.useState)(!1),{socialApiGet:l}=(0,X.useRateLimitedSocialApi)(X.socialApiRateLimitAtom),o=(0,z.useAtomCallback)((0,a.useCallback)(e=>e(Y.userIdAtom),[])),n=(0,a.useCallback)(async()=>{s(!0);try{let e=await l("/relationship-counts",void 0,o()??void 0);t(e)}catch(e){console.error("Error fetching relationship counts:",e)}finally{s(!1)}},[o,l]),i=(0,a.useCallback)(e=>{t(t=>{if(!t)return t;let r=`${e}Count`;return{...t,[r]:Math.max(0,t[r]-1)}})},[]),c=(0,a.useCallback)(e=>{t(t=>{if(!t)return t;let r=`${e}Count`;return{...t,[r]:t[r]+1}})},[]);return(0,a.useEffect)(()=>{let e=J.relationshipEvents.onCountsUpdate(n);return()=>{e()}},[n]),(0,a.useEffect)(()=>{let e=J.relationshipEvents.onCountChange((e,r)=>{t(t=>{if(!t)return t;let s=`${e}Count`;return{...t,[s]:Math.max(0,t[s]+r)}})});return()=>{e()}},[]),{counts:e,isLoading:r,fetchCounts:n,decrementCount:i,incrementCount:c}}(),[T,I]=(0,a.useState)(""),[M,$]=(0,a.useState)(""),[B,L]=(0,a.useState)(""),F=(0,a.useRef)(null),U=(0,a.useRef)(null),E=(0,a.useRef)(null),R=(0,a.useRef)(null),_=(0,a.useRef)(null),Z=(0,a.useRef)(null),es=(0,a.useRef)(!1),ea=(0,r.useVirtualizer)({count:y.items.length,getScrollElement:()=>R.current,estimateSize:()=>76,overscan:3}),el=(0,r.useVirtualizer)({count:k.length,getScrollElement:()=>_.current,estimateSize:()=>76,overscan:3}),eo=(0,r.useVirtualizer)({count:N.items.length,getScrollElement:()=>Z.current,estimateSize:()=>76,overscan:3});(0,a.useEffect)(()=>{es.current||(es.current=!0,A())},[]);let en=(0,a.useCallback)(e=>{g(e),"incoming"!==e||0!==y.items.length||y.isLoading?"sent"!==e||0!==v.items.length||v.isLoading?"blocked"!==e||0!==N.items.length||N.isLoading||N.fetchInitial(B):v.fetchInitial(M):y.fetchInitial(T)},[y,v,N,T,M,B]);(0,a.useEffect)(()=>(F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{y.setSearch(T),y.fetchInitial(T),R.current&&(R.current.scrollTop=0)},300),()=>{F.current&&clearTimeout(F.current)}),[T]),(0,a.useEffect)(()=>(U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{v.setSearch(M),v.fetchInitial(M),_.current&&(_.current.scrollTop=0)},300),()=>{U.current&&clearTimeout(U.current)}),[M]),(0,a.useEffect)(()=>(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{N.setSearch(B),N.fetchInitial(B),Z.current&&(Z.current.scrollTop=0)},300),()=>{E.current&&clearTimeout(E.current)}),[B]);let ei=(0,a.useCallback)(()=>{let e=R.current;if(!e)return;let{scrollTop:t,scrollHeight:r,clientHeight:s}=e;t+s>=r-100&&y.hasMore&&!y.isLoading&&!y.isFetchingMore&&y.fetchMore()},[y]),ec=(0,a.useCallback)(()=>{let e=_.current;if(!e)return;let{scrollTop:t,scrollHeight:r,clientHeight:s}=e;t+s>=r-100&&v.hasMore&&!v.isLoading&&!v.isFetchingMore&&v.fetchMore()},[v]),eu=(0,a.useCallback)(()=>{let e=Z.current;if(!e)return;let{scrollTop:t,scrollHeight:r,clientHeight:s}=e;t+s>=r-100&&N.hasMore&&!N.isLoading&&!N.isFetchingMore&&N.fetchMore()},[N]),ed=(0,a.useCallback)(()=>{p(!1),h(null),d(""),I(""),$(""),L(""),es.current=!1},[p,h]);(0,a.useEffect)(()=>{f&&(g(f),h(null))},[f,h]);let ex=(0,a.useCallback)(e=>{n&&e.target===e.currentTarget&&(e.stopPropagation(),ed())},[n,ed]),{addFriend:ep,acceptFriendRequest:em,removeFriend:ef,updateUserProfile:eh,blockFriend:eb,unblockUser:eg}=(0,x.useSocialTracker)(),ey=(0,z.useAtomCallback)((0,a.useCallback)(e=>e(i.usernameToDataAtom),[])),ev=(0,a.useCallback)(async()=>{try{let e=ey().get(u);if(e&&("accepted"===e.relationshipType||"outgoing"===e.relationshipType))return void o.default.error("User already accepted or sent a friend request.");let{socialProfile:t,relationshipId:r}=await ep(u),{userId:s,username:a,avatarUrl:l,bannerUrl:n,color:i,socialLinks:c}=t,d={relationshipId:r,profile:{userId:s,username:a,avatarUrl:l,bannerUrl:n,color:i,socialLinks:c},createdAt:Date.now(),requestUsername:a},x=w.some(e=>e.profile.userId===s),p=v.items.some(e=>e.profile.userId===s);x||p||C("outgoing"),j(e=>{let t=e.filter(e=>e.profile.userId!==s);return[d,...t]})}catch{}finally{d("")}},[u,ep,ey,C,w,v.items]),ew=(0,a.useCallback)(async(e,t)=>{await em(e,t),y.removeItem(e),P("incoming")},[em,y,P]),ej=(0,a.useCallback)(async e=>{await ef(e),y.removeItem(e),P("incoming")},[ef,y,P]),ek=(0,a.useCallback)(async e=>{await ef(e),v.removeItem(e),j(t=>t.filter(t=>t.relationshipId!==e)),P("outgoing")},[ef,v,P]),eN=(0,a.useCallback)(async(e,t)=>{await eg(e,t),N.removeItem(t),P("blocked")},[eg,N,P]),eS=(0,a.useCallback)(async()=>{await eh({disableRequests:!m?.disableRequests})},[eh,m]),eA=(0,a.useCallback)(async(e,t)=>{await eb(e,t),y.removeItem(e),P("incoming")},[eb,y,P]),eP="incoming"===b?T:"sent"===b?M:B,eC="incoming"===b?I:"sent"===b?$:L,eT="incoming"===b?y.isLoading:"sent"===b?v.isLoading:N.isLoading,[eI,eM]=(0,s.useAtom)(q.userLobbySettingsAtom),e$=(0,a.useCallback)(()=>{eM(e=>({...e,disableFriendRequestToasts:!e.disableFriendRequestToasts}))},[eM]);return(0,H.createPortal)((0,t.jsx)(D.motion.div,{...O.ModalAnimationUtility.backdrop,className:"fixed inset-0 z-[200] flex items-center justify-center bg-[#090909]/40",onClick:ex,onMouseDown:e=>{e.target===e.currentTarget&&c(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{c(!1)})},children:(0,t.jsx)(D.motion.div,{className:"relative h-[calc(100vh-72px)] max-h-[880px] w-[452px]",onClick:e=>e.stopPropagation(),...O.ModalAnimationUtility.modal,children:(0,t.jsxs)("div",{className:"flex h-full min-h-0 w-full flex-col overflow-hidden rounded-[4px] border border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex h-[44px] w-full flex-row items-center justify-between border-b-[1px] border-b-secondaryStroke pl-[16px] pr-[12px]",children:[(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:e("Add Friend")}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:ed,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary transition-colors duration-150 ease-in-out group-hover:text-textPrimary"})})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"border-b border-secondaryStroke",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[16px] pb-[12px] pt-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsxs)("div",{className:"flex flex-row items-end gap-[8px] px-[16px]",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(K.TextInput,{placeholder:e("Enter friend's username..."),value:u,onChange:e=>d(e.toLowerCase()),onKeyDown:e=>{"Enter"===e.key&&ev()}})}),(0,t.jsx)("button",{type:"button",disabled:!u.trim(),onClick:ev,className:"flex h-[32px] items-center gap-[6px] rounded-full bg-primaryBlue px-[12px] transition-all duration-150 hover:bg-primaryBlue/80 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-primaryBlue",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:e("Send Request")})})]})}),(0,t.jsx)("div",{className:"flex w-full flex-row gap-[16px] px-[16px]",children:m?.username&&(0,t.jsx)(G.Switch,{checked:!0===m.disableRequests,onChange:eS,label:e("Disable incoming friend requests"),onlyButtonClickable:!0})}),(0,t.jsx)("div",{className:"flex w-full flex-row gap-[16px] px-[16px]",children:m?.username&&(0,t.jsx)(G.Switch,{checked:eI.disableFriendRequestToasts??!1,onChange:e$,label:e("Disable friend request toasts"),onlyButtonClickable:!0})})]}),(0,t.jsx)("div",{className:"px-[16px] pb-[3px]",children:(0,t.jsxs)(V.HorizontalScrollContainer,{children:[(0,t.jsx)(W.ButtonTab,{onClick:()=>en("sent"),selected:"sent"===b,height:"h-[36px]",isMobile:!1,isPill:!0,padding:"px-[12px]",filterNumber:S?.outgoingCount,children:e("Sent")}),(0,t.jsx)(W.ButtonTab,{onClick:()=>en("incoming"),selected:"incoming"===b,height:"h-[36px]",isMobile:!1,isPill:!0,padding:"px-[12px]",filterNumber:S?.incomingCount,children:e("Incoming")}),(0,t.jsx)(W.ButtonTab,{onClick:()=>en("blocked"),selected:"blocked"===b,height:"h-[36px]",isMobile:!1,isPill:!0,padding:"px-[12px]",filterNumber:S?.blockedCount,children:e("Blocked")})]})})]}),(0,t.jsx)("div",{className:"px-[16px] pb-[4px] pt-[16px]",children:(0,t.jsxs)("div",{className:"flex h-[28px] cursor-text flex-row items-center justify-start gap-[8px] overflow-hidden whitespace-nowrap rounded-full border-[1px] border-secondaryStroke pl-[12px] pr-[1px] font-normal transition-colors duration-[125ms] hover:bg-secondaryStroke/35",children:[(0,t.jsx)("input",{type:"text",value:eP,onChange:e=>eC(e.target.value),placeholder:e("Search by username..."),autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",className:"flex min-w-[0px] flex-1 bg-transparent text-[12px] font-medium text-textPrimary outline-none placeholder:text-textTertiary"}),eT&&eP&&(0,t.jsx)("div",{className:"flex h-[24px] w-[24px] items-center justify-center",children:(0,t.jsx)("i",{className:"ri-loader-4-line animate-spin text-[14px] text-textTertiary"})}),eP&&!eT&&(0,t.jsx)("button",{type:"button",onClick:()=>eC(""),className:"group flex h-[24px] w-[24px] min-w-[24px] max-w-[24px] cursor-pointer flex-row items-center justify-center rounded-[4px] rounded-r-full p-[4px] pr-[6px] transition-colors duration-[125ms] hover:bg-secondaryStroke/60",children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary transition-colors duration-[125ms] ease-in-out group-hover:text-textPrimary"})})]})}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:["incoming"===b&&(0,t.jsx)("div",{ref:R,className:`flex-1 overflow-y-auto transition-opacity duration-150 ${eT?"opacity-60":"opacity-100"}`,onScroll:ei,children:0===y.items.length&&y.isLoading?(0,t.jsx)("div",{className:"flex flex-col gap-[12px] p-[12px]",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(er,{type:"incoming"},r))}):0!==y.items.length||y.isLoading?(0,t.jsxs)("div",{style:{height:`${ea.getTotalSize()+24}px`,width:"100%",position:"relative"},children:[ea.getVirtualItems().map(e=>{let r=y.items[e.index];return(0,t.jsx)("div",{style:{position:"absolute",top:e.start+12,left:12,right:12,height:64},children:(0,t.jsx)(ee,{request:r,type:"incoming",onAccept:()=>ew(r.relationshipId,r.profile.username),onReject:()=>ej(r.relationshipId),onBlock:()=>eA(r.relationshipId,r.profile.username)})},r.relationshipId)}),y.isFetchingMore&&(0,t.jsx)("div",{className:"py-[8px] text-center text-[13px] text-textTertiary",style:{position:"absolute",bottom:8,left:0,right:0},children:"Loading more..."})]},`incoming-${y.items.length}-${T}`):(0,t.jsx)("div",{className:"py-[16px] text-center text-[13px] text-textTertiary",children:T?"No matching friend requests":"No incoming friend requests"})}),"sent"===b&&(0,t.jsx)("div",{ref:_,className:`flex-1 overflow-y-auto transition-opacity duration-150 ${eT?"opacity-60":"opacity-100"}`,onScroll:ec,children:0===k.length&&v.isLoading?(0,t.jsx)("div",{className:"flex flex-col gap-[12px] p-[12px]",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(er,{type:"sent"},r))}):0!==k.length||v.isLoading?(0,t.jsxs)("div",{style:{height:`${el.getTotalSize()+24}px`,width:"100%",position:"relative"},children:[el.getVirtualItems().map(e=>{let r=k[e.index];return(0,t.jsx)("div",{style:{position:"absolute",top:e.start+12,left:12,right:12,height:64},children:(0,t.jsx)(ee,{request:r,type:"sent",onReject:()=>ek(r.relationshipId)})},r.relationshipId)}),v.isFetchingMore&&(0,t.jsx)("div",{className:"py-[8px] text-center text-[13px] text-textTertiary",style:{position:"absolute",bottom:8,left:0,right:0},children:"Loading more..."})]},`outgoing-${k.length}-${M}`):(0,t.jsx)("div",{className:"py-[16px] text-center text-[13px] text-textTertiary",children:M?"No matching friend requests":"No sent friend requests"})}),"blocked"===b&&(0,t.jsx)("div",{ref:Z,className:`flex-1 overflow-y-auto transition-opacity duration-150 ${eT?"opacity-60":"opacity-100"}`,onScroll:eu,children:0===N.items.length&&N.isLoading?(0,t.jsx)("div",{className:"flex flex-col gap-[12px] p-[12px]",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(er,{type:"blocked"},r))}):0!==N.items.length||N.isLoading?(0,t.jsxs)("div",{style:{height:`${eo.getTotalSize()+24}px`,width:"100%",position:"relative"},children:[eo.getVirtualItems().map(e=>{let r=N.items[e.index];return(0,t.jsx)("div",{style:{position:"absolute",top:e.start+12,left:12,right:12,height:64},children:(0,t.jsx)(et,{user:r,onUnblock:()=>eN(r.userProfile.username,r.relationshipId)})},r.relationshipId)}),N.isFetchingMore&&(0,t.jsx)("div",{className:"py-[8px] text-center text-[13px] text-textTertiary",style:{position:"absolute",bottom:8,left:0,right:0},children:"Loading more..."})]},`blocked-${N.items.length}-${B}`):(0,t.jsx)("div",{className:"py-[16px] text-center text-[13px] text-textTertiary",children:B?"No matching blocked users":"No blocked users"})})]})]})]})})}),document.body)}),ee=(0,a.memo)(function({request:e,type:r,onAccept:s,onReject:a,onBlock:o}){let{t:i}=(0,l.useTranslation)(),c=e.profile.username,u=e.requestUsername,d=u&&u!==c;return(0,t.jsxs)("div",{className:"flex h-full flex-row items-center justify-between gap-[12px] overflow-hidden rounded-[8px] border border-secondaryStroke/50 p-[12px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-[10px]",children:[(0,t.jsxs)("div",{className:"relative h-[40px] w-[40px] flex-shrink-0 overflow-hidden rounded-full bg-backgroundTertiary",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(p.default,{src:e.profile.avatarUrl||(0,h.generateDefaultProfilePicture)(c),alt:c||"User",width:40,height:40,className:"object-cover",draggable:!1})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center gap-[6px]",children:(0,t.jsx)("div",{className:"truncate text-[14px] font-medium text-textPrimary",children:c||"Unknown User"})}),d&&(0,t.jsxs)("div",{className:"flex items-center gap-[4px] truncate text-[12px] text-textTertiary",children:[(0,t.jsx)("span",{className:"line-through opacity-60",children:u}),(0,t.jsx)("i",{className:"ri-arrow-right-line text-[10px]"}),(0,t.jsx)("span",{children:c})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-shrink-0 flex-row gap-[12px]",children:["incoming"===r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Tooltip,{content:i("Accept"),children:(0,t.jsx)("button",{type:"button",onClick:s,className:"group flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-increase/10 text-increase transition-colors duration-150 ease-in-out hover:bg-increase/20",children:(0,t.jsx)("i",{className:"ri-check-line text-[14px] text-increase transition-colors duration-150 ease-in-out group-hover:text-increase"})})}),(0,t.jsx)(n.Tooltip,{content:i("Reject"),children:(0,t.jsx)("button",{type:"button",onClick:a,className:"group flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-decrease/10 text-decrease transition-colors duration-150 ease-in-out hover:bg-decreaseHover/10",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-decrease transition-colors duration-150 ease-in-out group-hover:text-decreaseHover"})})}),(0,t.jsx)(n.Tooltip,{content:i("Block"),children:(0,t.jsx)("button",{type:"button",onClick:o,className:"group flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-backgroundTertiary text-textSecondary transition-colors duration-150 ease-in-out hover:bg-decreaseHover/10 hover:text-decreaseHover",children:(0,t.jsx)("i",{className:"ri-forbid-line text-[14px] text-textSecondary transition-colors duration-150 ease-in-out group-hover:text-decreaseHover"})})})]}),"sent"===r&&(0,t.jsx)(n.Tooltip,{content:i("Unsend"),children:(0,t.jsx)("button",{type:"button",onClick:a,className:"group flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-decrease/10 text-decrease transition-colors duration-150 ease-in-out hover:bg-decreaseHover/10",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-decrease transition-colors duration-150 ease-in-out group-hover:text-decreaseHover"})})})]})]})}),et=(0,a.memo)(function({user:e,onUnblock:r}){let{t:s}=(0,l.useTranslation)();return(0,t.jsxs)("div",{className:"flex h-full flex-row items-center justify-between gap-[12px] overflow-hidden rounded-[8px] border border-secondaryStroke/50 p-[12px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-[10px]",children:[(0,t.jsxs)("div",{className:"relative h-[40px] w-[40px] flex-shrink-0 overflow-hidden rounded-full bg-backgroundTertiary",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(p.default,{src:e.userProfile.avatarUrl||(0,h.generateDefaultProfilePicture)(e.userProfile.username),alt:e.userProfile.username||"User",width:40,height:40,className:"object-cover",draggable:!1})]}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("div",{className:"flex items-center gap-[6px]",children:(0,t.jsx)("div",{className:"truncate text-[14px] font-medium text-textPrimary",children:e.userProfile.username||"Unknown User"})})})]}),(0,t.jsx)("div",{className:"flex flex-shrink-0 flex-row gap-[12px]",children:(0,t.jsx)(n.Tooltip,{content:s("Unblock"),children:(0,t.jsx)("button",{type:"button",onClick:r,className:"group flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-decrease/10 text-decrease transition-colors duration-150 ease-in-out hover:bg-decreaseHover/10",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-decrease transition-colors duration-150 ease-in-out group-hover:text-decreaseHover"})})})})]})}),er=(0,a.memo)(function({type:e}){return(0,t.jsxs)("div",{className:"flex h-[64px] flex-row items-center justify-between gap-[12px] overflow-hidden rounded-[8px] border border-secondaryStroke/50 p-[12px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-[10px]",children:[(0,t.jsx)("div",{className:"h-[40px] w-[40px] flex-shrink-0 animate-pulse rounded-full bg-secondaryStroke/40"}),(0,t.jsx)("div",{className:"flex flex-col gap-[6px]",children:(0,t.jsx)("div",{className:"h-[14px] w-[100px] animate-pulse rounded-[4px] bg-secondaryStroke/40"})})]}),(0,t.jsxs)("div",{className:"flex flex-shrink-0 flex-row gap-[12px]",children:["incoming"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-[28px] w-[28px] animate-pulse rounded-full bg-secondaryStroke/40"}),(0,t.jsx)("div",{className:"h-[28px] w-[28px] animate-pulse rounded-full bg-secondaryStroke/40"}),(0,t.jsx)("div",{className:"h-[28px] w-[28px] animate-pulse rounded-full bg-secondaryStroke/40"})]}),("sent"===e||"blocked"===e)&&(0,t.jsx)("div",{className:"h-[28px] w-[28px] animate-pulse rounded-full bg-secondaryStroke/40"})]})]})}),es=(0,a.memo)(function({onClose:e,onConfirm:r,username:s}){let{t:o}=(0,l.useTranslation)(),[n,i]=(0,a.useState)(!1),c=(0,a.useCallback)(()=>{r(),e()},[r,e]),u=(0,a.useCallback)(t=>{n&&t.target===t.currentTarget&&e()},[n,e]);return(0,H.createPortal)((0,t.jsx)(D.motion.div,{...O.ModalAnimationUtility.backdrop,className:"fixed inset-0 z-[200] flex items-center justify-center bg-[#090909]/40",onClick:u,onMouseDown:e=>{e.target===e.currentTarget&&i(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{i(!1)})},children:(0,t.jsx)(D.motion.div,{className:"relative max-h-[880px] w-[452px]",onClick:e=>e.stopPropagation(),...O.ModalAnimationUtility.modal,children:(0,t.jsxs)("div",{className:"flex h-full w-full flex-col rounded-[4px] border-[1px] border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex h-[44px] w-full flex-row items-center justify-between border-b-[1px] border-b-secondaryStroke pl-[16px] pr-[12px]",children:[(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:o("Remove Friend")}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary"})})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[16px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsx)("div",{className:"flex w-full flex-row items-center justify-start gap-[16px]",children:(0,t.jsxs)("span",{className:"text-[14px] font-normal leading-[1.2rem] text-textSecondary",children:[o("Are you sure you want to remove")," ",(0,t.jsxs)("span",{className:"font-medium text-textPrimary",children:["@",s]})," ",o("as a friend? This action cannot be undone.")]})})})})}),(0,t.jsx)("div",{className:"flex h-[68px] w-full flex-row items-center justify-end border-t border-secondaryStroke/50 p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:c,className:"flex h-[32px] flex-1 cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-decrease px-[12px] transition-all duration-[125ms] hover:bg-decreaseHover",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:o("Remove Friend")})})})]})})}),document.body)});e.s(["UnfriendWarningModal",0,es],654337);let ea=(0,a.memo)(function({isOpen:e=!1,isWindowModal:p=!1}){let{t:m}=(0,l.useTranslation)(),f=(0,s.useAtomValue)(i.friendListAtom),h=(0,s.useAtomValue)(i.userIdToDataAtom),[b,g]=(0,a.useState)(""),[y,v]=(0,s.useAtom)(i.showFriendBannersAtom),[w,j]=(0,s.useAtom)(c.lobbyInvitesAtom),k=(0,s.useAtomValue)(c.lobbyRequestsAtom),N=(0,s.useAtomValue)(c.myLobbyInfoAtom),{removeFriend:S}=(0,x.useSocialTracker)(),A=(0,a.useRef)(null),{inviteToLobby:P,requestJoinLobby:C,acceptLobbyInvite:T,acceptLobbyRequest:I,declineLobbyRequest:M,promoteLobbyRequest:$}=(0,d.useLobbyApi)(),[L,F]=(0,a.useState)(!1),[U,R]=(0,a.useState)(null),[_,D]=(0,s.useAtom)(i.addFriendModalOpenAtom),z=(0,s.useSetAtom)(i.addFriendModalInitialTabAtom),H=(0,s.useAtomValue)(i.incomingFriendListAtom),W=(0,s.useAtomValue)(i.userProfileAtom),V=(0,a.useCallback)((e,t)=>{R({relationshipId:e,username:t}),F(!0)},[]),O=(0,a.useCallback)(async()=>{U&&(await S(U.relationshipId),F(!1),R(null))},[S,U]),q=(0,a.useCallback)(async e=>{await P(e)},[P]),G=(0,a.useCallback)(async e=>{await C(e)},[C]),K=(0,a.useCallback)(async e=>{await T(e)},[T]),Y=(0,a.useCallback)((e,t)=>{j(r=>{let s=new Map(r),a=`${e}-${t}`;return s.delete(a),s})},[j]),X=(0,a.useCallback)(async e=>{await I(e)},[I]),J=(0,a.useCallback)(async e=>{await M(e)},[M]),Q=(0,a.useCallback)(async e=>{let t=h.get(e);if(t){if(!t.relationshipId){console.warn("Friend relationship not found"),o.default.error("Friend relationship not found");return}await $(t.relationshipId)}else console.warn("Friend not found for requester:",e)},[$,h]),ee=(0,a.useMemo)(()=>[...f.values()].filter(e=>e.userProfile.username.toLowerCase().includes(b.toLowerCase())),[f,b]),{onlineAndAwayFriends:et,offlineFriends:er,offlineCount:ea,onlineCount:el}=(0,a.useMemo)(()=>{let e=[],t=[],r=new Set;return N?.members.forEach(e=>{r.add(e.userProfile.userId)}),ee.forEach(s=>{let a="offline"!==s.presence;0===b.length&&r.has(s.userProfile.userId)||(a?e.push(s):t.push(s))}),{onlineAndAwayFriends:e,offlineFriends:t,offlineCount:t.length,onlineCount:e.length}},[N,ee,b]),eo=(0,a.useMemo)(()=>H.size,[H]),en=(0,a.useMemo)(()=>eo>0&&W?.disableRequests!==!0,[eo,W?.disableRequests]),ei=(0,a.useCallback)(()=>{g("")},[]),ec=(0,a.useCallback)(()=>{z("incoming"),D(!0)},[D,z]),eu=(0,a.useMemo)(()=>N&&k.get(N.lobbyId)||[],[k,N]),ed=(0,a.useMemo)(()=>[...w.values()],[w]),ex=(0,s.useAtomValue)(i.userProfileIdAtom),ep=(0,a.useMemo)(()=>N?.leaderUserId===ex,[N,ex]),em=(0,a.useMemo)(()=>{let e=[];return 0===b.length&&N&&e.push({type:"lobby",key:"lobby-members"}),el>0&&(e.push({type:"online-divider",key:"online-divider"}),et.forEach(t=>{e.push({type:"friend",key:t.userProfile.userId,friend:t})})),ea>0&&(e.push({type:"offline-divider",key:"offline-divider"}),er.forEach(t=>{e.push({type:"friend",key:t.userProfile.userId,friend:t})})),e},[b,N,el,ea,et,er]),ef=(0,a.useCallback)(e=>{let t=em[e];if(!t)return 0;switch(t.type){case"lobby":if(N)return 36+N.members.length*(y?128:76)+12;return 200;case"online-divider":case"offline-divider":return 40;case"friend":return y?140:76;default:return 76}},[em,y,N]),eh=(0,r.useVirtualizer)({count:em.length,getScrollElement:()=>A.current,estimateSize:ef,overscan:3,useAnimationFrameWithResizeObserver:!0}),eb=eh.getVirtualItems(),eg=p?"border-secondaryStroke hover:bg-secondaryStroke/35":"border-primaryStroke hover:bg-primaryStroke/35",ey=p?"hover:bg-secondaryStroke/60":"hover:bg-primaryStroke/60",ev=p?"bg-backgroundTertiary":"bg-backgroundSecondary";return(0,t.jsx)("div",{className:`h-full ${ev} ${e?"shadow-[-4px_0_24px_-4px_rgba(0,0,0,0.2)] dark:shadow-[-4px_0_24px_-4px_rgba(0,0,0,0.4)]":""}`,children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-shrink-0 flex-col gap-[8px] px-[16px] pb-[4px]",children:[en&&(0,t.jsx)("div",{className:"flex w-full flex-row items-center gap-[16px] pt-[8px]",children:(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[m("You have")," ",(0,t.jsxs)("button",{type:"button",className:"cursor-pointer border-none bg-transparent p-0 font-medium text-primaryBlueHover hover:underline",onClick:ec,children:[eo," ",m("incoming")]})," ",m("friend requests")]})}),ed.length>0&&(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:ed.map(e=>(0,t.jsxs)("div",{className:"flex h-[64px] flex-row items-center gap-[12px] rounded-[12px] border border-primaryBlue/20 bg-primaryBlue/10 px-[12px]",children:[(0,t.jsx)("i",{className:"ri-team-line text-[24px] text-primaryBlue"}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-[4px]",children:[(0,t.jsxs)("span",{className:"truncate text-[14px] font-medium text-textPrimary",children:[e.inviterUsername," invited you to ",e.lobbyName.length>12?`${e.lobbyName.slice(0,12)}...`:e.lobbyName]}),(0,t.jsxs)("span",{className:"text-[12px] text-textSecondary opacity-90",children:[e.lobbyMemberCount," ",1===e.lobbyMemberCount?"member":"members"]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,t.jsx)(n.Tooltip,{content:"Dismiss",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:()=>Y(e.lobbyId,e.inviterUserId),className:"flex h-[28px] w-[28px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-textPrimary/90"})})}),(0,t.jsx)("button",{type:"button",onClick:()=>K(e.lobbyId),className:"h-[32px] whitespace-nowrap rounded-full bg-primaryBlue px-[12px] text-[14px] font-bold text-background transition-all duration-150 hover:bg-primaryBlue/80",children:"Join"})]})]},`${e.lobbyId}-${e.inviterUserId}`))}),eu.length>0&&(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:eu.map(e=>(0,t.jsxs)("div",{className:"flex h-[64px] flex-row items-center gap-[12px] rounded-[12px] border border-primaryBlue/20 bg-primaryBlue/10 px-[12px]",children:[(0,t.jsx)("i",{className:"ri-user-add-line text-[24px] text-primaryBlue"}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-[4px]",children:[(0,t.jsxs)("span",{className:"truncate text-[14px] font-medium text-textPrimary",children:[e.requesterUsername," requests to join"]}),e.referredByUsername&&(0,t.jsxs)("span",{className:"text-[12px] text-textSecondary opacity-90",children:["via ",e.referredByUsername]})]}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-[12px]",children:ep?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Tooltip,{content:"Dismiss",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:()=>J(e.requesterUserId),className:"flex h-[28px] w-[28px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-textPrimary/90"})})}),(0,t.jsx)("button",{type:"button",onClick:()=>X(e.requesterUserId),className:"h-[32px] whitespace-nowrap rounded-full bg-primaryBlue px-[12px] text-[14px] font-bold text-background transition-all duration-150 hover:bg-primaryBlue/80",children:"Accept"})]}):(0,t.jsx)("button",{type:"button",onClick:()=>Q(e.requesterUserId),className:"h-[32px] whitespace-nowrap rounded-full bg-primaryBlue px-[12px] text-[14px] font-bold text-background transition-all duration-150 hover:bg-primaryBlue/80",children:"Forward to Owner"})})]},e.requesterUserId))}),(0,t.jsxs)("div",{className:`flex w-full min-w-0 flex-row items-center gap-[8px] ${!en?"pt-[12px]":""}`,children:[(0,t.jsx)("div",{className:"min-w-0 flex-1",children:(0,t.jsxs)("div",{className:`group flex h-[32px] w-full min-w-0 cursor-text flex-row items-center justify-start gap-[8px] rounded-full border pl-[8px] pr-[2px] font-normal transition-colors duration-150 ${eg}`,children:[(0,t.jsx)("i",{className:"ri-search-2-line text-[16px] text-textPrimary/90 transition-colors duration-150 group-hover:text-textPrimary"}),(0,t.jsx)("input",{type:"text",placeholder:"Search friends...",value:b,onChange:e=>g(e.target.value),className:"min-w-0 flex-1 bg-transparent text-[14px] font-medium text-textPrimary outline-none placeholder:font-medium placeholder:text-textPrimary/60"}),b&&(0,t.jsx)("button",{type:"button",onClick:ei,className:`flex h-[24px] w-[24px] cursor-pointer flex-row items-center justify-center rounded-full p-[4px] pr-[4px] transition-colors duration-150 ${ey}`,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textPrimary/90 transition-colors duration-150 hover:text-textPrimary"})})]})}),(0,t.jsx)(n.Tooltip,{content:y?"Switch to list view":"Switch to card view",children:(0,t.jsx)("button",{type:"button",onClick:()=>v(!y),className:"flex h-[32px] min-h-[32px] w-[32px] flex-shrink-0 flex-row items-center justify-center gap-[8px] rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)("i",{className:`${y?"ri-list-check":"ri-gallery-view-2"} text-[16px] text-textPrimary`})})}),(0,t.jsx)("button",{type:"button",onClick:()=>D(!0),className:"ml-[8px] flex h-[32px] min-h-[32px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-primaryBlue px-[12px] transition-colors duration-150 hover:bg-primaryBlue/80",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:m("Add Friend")})})]})]}),(0,t.jsx)("div",{className:"min-h-0 flex-1 overflow-hidden",children:(0,t.jsx)("div",{ref:A,className:"h-full overflow-y-auto px-[12px] pb-[16px] pt-[12px] [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:(0,t.jsx)("div",{style:{height:`${eh.getTotalSize()}px`,width:"100%",position:"relative"},children:eb.map(e=>{let r=em[e.index];return r?(0,t.jsxs)("div",{"data-index":e.index,ref:eh.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:["lobby"===r.type&&(0,t.jsx)("div",{className:"mb-[12px]",children:(0,t.jsx)(E,{isWindowModal:p,showBanners:y})}),"online-divider"===r.type&&(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-between pb-[12px] pt-[4px]",children:[(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[el," ",m("Online")]}),(0,t.jsx)(n.Tooltip,{content:`Max ${u.MAX_FRIENDS} friends allowed`,position:"top",children:(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[f.size," / ",u.MAX_FRIENDS]})})]}),"offline-divider"===r.type&&(0,t.jsx)("div",{className:"flex w-full flex-row items-center gap-[16px] pb-[12px] pt-[4px]",children:(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[ea," ",m("Offline")]})}),"friend"===r.type&&(0,t.jsx)("div",{className:"mb-[12px]",children:(0,t.jsx)(B,{friend:r.friend,isWindowModal:p,showBanners:y,onUnfriendClick:V,onInviteToLobby:q,onRequestJoinLobby:G})})]},e.key):null})})})}),L&&U&&(0,t.jsx)(es,{onClose:()=>{F(!1),R(null)},onConfirm:O,username:U.username}),_&&(0,t.jsx)(Z,{})]})})});e.s(["FriendsRightSidebar",0,ea],1589),e.s(["FORCED_STATUS",0,["online","away","offline"]],83738)},337587,692298,e=>{"use strict";var t=e.i(843476),r=e.i(672464),s=e.i(271645);e.i(490156);var a=e.i(542119),l=e.i(716689),o=e.i(415823),n=e.i(391735),i=e.i(404289),c=e.i(227905),u=e.i(657421),d=e.i(465836),x=e.i(188754),p=e.i(1589),m=e.i(657688),f=e.i(174080),h=e.i(938943),b=e.i(592846),g=e.i(428522),y=e.i(173856),v=e.i(548656),w=e.i(458768),j=e.i(711858),k=e.i(973444),N=e.i(569692),S=e.i(392335),A=e.i(83738),P=e.i(846211),C=e.i(654337),T=e.i(648357),I=e.i(759919),M=e.i(616604),$=e.i(664727),B=e.i(432602),L=e.i(261980),F=e.i(971257),U=e.i(661756),E=e.i(832544);let R=({src:e,alt:s,label:a,color:l,className:o="",imageSize:n=14,launchPad:i=!0,protocol:c,migratedFrom:u})=>{let d=(0,r.useAtomValue)(E.isMobileAtom),{getProtocolBadgeBorder:x}=(0,U.useProtocolDisplay)(),p=e.startsWith("/images/")?e:`/images/${e}`,f=x(c||a,u?{migratedFrom:u}:null,0),h=l.startsWith("[#")&&l.endsWith("]"),b=h?l.slice(1,l.length-1):"",g=h?"":`border-${l}/35`,y=h?"":`bg-${l}/5`,v=h?"":`text-${l}/90`;return(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-[4px]",children:(0,t.jsx)("button",{className:`flex flex-row items-center justify-start gap-[4px] grayscale-[0] ${o} min-w-min max-w-none flex-shrink-0 cursor-default overflow-visible ${d?"active:scale-[0.98] active:opacity-[0.95]":""} `,type:"button",children:(0,t.jsxs)("div",{className:`relative border-[1px] ${!h?g:""} ${!h?y:""} flex h-[24px] flex-row items-center justify-start gap-[3px] rounded-full pl-[5px] pr-[7px]`,style:{...!h?{}:{borderColor:`${b}A6`,backgroundColor:`${b}0D`,color:`${b}E6`}},children:[!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`absolute inset-0 z-20 rounded-full opacity-[0.05] ${f.className} `,style:f.style}),(0,t.jsx)("div",{className:"absolute inset-0 z-10 rounded-full bg-backgroundTertiary"})]}),!i&&(0,t.jsx)("div",{className:`absolute -inset-[1px] z-0 rounded-full bg-transparent opacity-[0.45] ${f.className} `,style:f.style}),(0,t.jsx)(m.default,{className:"z-30",src:p,alt:s||a,width:n,height:n,loading:"eager"}),(0,t.jsx)("span",{className:` ${!h?v:""} z-30 text-nowrap text-[13px] font-medium`,style:h?{color:`${b}E6`}:{},children:a})]})})})},_=(0,s.memo)(function({presets:e}){let[r,a]=(0,s.useState)("protocols"),[l,o]=(0,s.useState)("protocols"),[n,i]=(0,s.useState)("protocols");return e?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[e.newPairs&&(0,t.jsx)(z,{title:"New Pairs",preset:e.newPairs,activeTab:r,setActiveTab:a}),e.finalStretch&&(0,t.jsx)(z,{title:"Final Stretch",preset:e.finalStretch,activeTab:l,setActiveTab:o}),e.migrated&&(0,t.jsx)(z,{title:"Migrated",preset:e.migrated,activeTab:n,setActiveTab:i})]}):null}),D=({label:e,min:r,max:s})=>null==r&&null==s?null:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[e,":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:null!=r&&null!=s?`${r} - ${s}`:null!=r?`Min: ${r}`:null!=s?`Max: ${s}`:""})]}),z=(0,s.memo)(function({title:e,preset:a,activeTab:l,setActiveTab:o}){let n=(0,r.useAtomValue)(N.userProfileAtom),c=(0,r.useAtomValue)(N.friendProfileDataAtom),u=(0,s.useMemo)(()=>c?null:n?.userId??null,[c,n]),{updateSharedPreset:d}=(0,i.useSocialTracker)(),x=(0,s.useMemo)(()=>"New Pairs"===e?"newPairs":"Final Stretch"===e?"finalStretch":"migrated",[e]),p=(0,s.useCallback)(()=>{d(x,null,"bnb")},[d,x]),{t:m}=(0,b.useTranslation)(),[,f]=(0,B.useEvmSettings)("pulseFilters",L.DEFAULT_ALL_BNB_FILTERS,F.validateAllEvmPulseFilters),h=(0,s.useCallback)(()=>{f(e=>({...e,[x]:a})),w.default.success(m("Preset applied to ")+e)},[f,x,a,e,m]),y=(0,s.useCallback)(()=>a?Object.values(a.protocols).filter(Boolean).length:0,[a]),v=(0,s.useCallback)(()=>{if(!a)return 0;let e=0;return a.dexPaid&&e++,(null!==a.age.min||null!==a.age.max)&&e++,(null!==a.top10Holders.min||null!==a.top10Holders.max)&&e++,(null!==a.devHolding.min||null!==a.devHolding.max)&&e++,(null!==a.snipers.min||null!==a.snipers.max)&&e++,(null!==a.holders.min||null!==a.holders.max)&&e++,(a.numDevMigrations?.min!==null||a.numDevMigrations?.max!==null)&&e++,(a.numDevCreations?.min!==null||a.numDevCreations?.max!==null)&&e++,e},[a]),j=(0,s.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.bondingCurve.min||null!==a.bondingCurve.max)&&e++,(null!==a.liquidity.min||null!==a.liquidity.max)&&e++,(null!==a.volume.min||null!==a.volume.max)&&e++,(null!==a.marketCap.min||null!==a.marketCap.max)&&e++,(null!==a.txns.min||null!==a.txns.max)&&e++,(null!==a.numBuys.min||null!==a.numBuys.max)&&e++,(null!==a.numSells.min||null!==a.numSells.max)&&e++,e},[a]),k=(0,s.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.twitterHandleReuses.min||null!==a.twitterHandleReuses.max)&&e++,(a.tweetAgeMins?.min!==null||a.tweetAgeMins?.max!==null)&&e++,a.twitterExists&&e++,a.website&&e++,a.telegram&&e++,a.atLeastOneSocial&&e++,e},[a]);return((0,s.useEffect)(()=>{let e={protocols:y(),audit:v(),metrics:j(),socials:k()};if(0===e[l]){let t=Object.keys(e).find(t=>e[t]>0);t&&o(t)}},[l,y,v,j,k,o]),a)?(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-[12px] border-[2px] border-white/5",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-x-[1px] -inset-y-[1px] z-[15] translate-y-[1px] rounded-[12px] border-[1px] border-white/[0.035]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[10] rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)]"}),(0,t.jsxs)("div",{className:"relative z-[15] flex flex-col gap-3 p-3 pt-[8px]",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,t.jsx)("div",{className:"text-[14px] font-medium text-textPrimary",children:e})}),(a.searchKeywords.length>0||a.excludeKeywords.length>0)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-b border-secondaryStroke/50 pb-2",children:[a.searchKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Search Keywords"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:a.searchKeywords.join(", ")})]}),a.excludeKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Exclude Keywords"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:a.excludeKeywords.join(", ")})]})]}),(0,t.jsxs)("div",{className:"flex flex-row flex-wrap gap-2",children:[y()>0&&(0,t.jsx)(g.default,{selected:"protocols"===l,onClick:()=>o("protocols"),height:"h-[40px]",filterNumber:y(),children:m("Protocols")}),v()>0&&(0,t.jsx)(g.default,{selected:"audit"===l,onClick:()=>o("audit"),height:"h-[40px]",filterNumber:v(),children:m("Audit")}),j()>0&&(0,t.jsx)(g.default,{selected:"metrics"===l,onClick:()=>o("metrics"),height:"h-[40px]",filterNumber:j(),children:m("$ Metrics")}),k()>0&&(0,t.jsx)(g.default,{selected:"socials"===l,onClick:()=>o("socials"),height:"h-[40px]",filterNumber:k(),children:m("Socials")})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:["protocols"===l&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.protocols["Fourmeme V2"]&&(0,t.jsx)(R,{color:"[#7ce660]",src:"/images/evm/protocols/fourmeme.svg",label:m("Four.meme"),protocol:"Fourmeme V2",launchPad:!0}),a.protocols.Binance&&(0,t.jsx)(R,{color:"[#F0B90B]",src:"/images/evm/protocols/binance.svg",label:m("Binance"),protocol:"Binance",launchPad:!0}),(a.protocols["Pancakeswap V2"]||a.protocols["Pancakeswap V3"]||a.protocols["Generic Pancakeswap V2"]||a.protocols["Generic Pancakeswap V3"])&&(0,t.jsx)(R,{color:"[#D1884F]",src:"/images/evm/protocols/pancake.svg",label:m("Pancakeswap"),protocol:"Pancakeswap V2",launchPad:!1}),(a.protocols["Uniswap V2"]||a.protocols["Uniswap V3"]||a.protocols["Uniswap V4"]||a.protocols["Generic Uniswap V2"]||a.protocols["Generic Uniswap V3"]||a.protocols["Generic Uniswap V4"])&&(0,t.jsx)(R,{color:"[#F50DB4]",src:"/images/evm/protocols/uniswap.svg",label:m("Uniswap"),protocol:"Uniswap V2",launchPad:!1})]}),"audit"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[a.dexPaid&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Dex Paid"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Enabled")})]}),(0,t.jsx)(D,{label:m("Age (mins)"),min:a.age.min,max:a.age.max}),(0,t.jsx)(D,{label:m("Top 10 Holders %"),min:a.top10Holders.min,max:a.top10Holders.max}),(0,t.jsx)(D,{label:m("Dev Holding %"),min:a.devHolding.min,max:a.devHolding.max}),(0,t.jsx)(D,{label:m("Snipers %"),min:a.snipers.min,max:a.snipers.max}),(0,t.jsx)(D,{label:m("Holders"),min:a.holders.min,max:a.holders.max}),(0,t.jsx)(D,{label:m("Dev Migrations"),min:a.numDevMigrations?.min,max:a.numDevMigrations?.max}),(0,t.jsx)(D,{label:m("Dev Pairs Created"),min:a.numDevCreations?.min,max:a.numDevCreations?.max})]}),"metrics"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(D,{label:m("B. curve %"),min:a.bondingCurve.min,max:a.bondingCurve.max}),(0,t.jsx)(D,{label:m("Liquidity ($)"),min:a.liquidity.min,max:a.liquidity.max}),(0,t.jsx)(D,{label:m("Volume ($)"),min:a.volume.min,max:a.volume.max}),(0,t.jsx)(D,{label:m("Market Cap ($)"),min:a.marketCap.min,max:a.marketCap.max}),(0,t.jsx)(D,{label:m("Txns"),min:a.txns.min,max:a.txns.max}),(0,t.jsx)(D,{label:m("Num Buys"),min:a.numBuys.min,max:a.numBuys.max}),(0,t.jsx)(D,{label:m("Num Sells"),min:a.numSells.min,max:a.numSells.max})]}),"socials"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(D,{label:m("Twitter Reuses"),min:a.twitterHandleReuses.min,max:a.twitterHandleReuses.max}),(0,t.jsx)(D,{label:m("Tweet Age (mins)"),min:a.tweetAgeMins?.min,max:a.tweetAgeMins?.max}),a.twitterExists&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Twitter"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]}),a.website&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Website"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]}),a.telegram&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Telegram"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]}),a.atLeastOneSocial&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("At Least One Social"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]})]})]}),(0,t.jsx)("div",{className:"relative z-[15] flex min-h-[4px] flex-1 flex-row items-center justify-center pb-[6px] pt-[10px]",children:u?(0,t.jsx)("button",{type:"button",className:"flex h-[32px] w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] pl-[10px] pr-[8px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:p,children:(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium text-textPrimary",children:m("Remove Preset")})}):(0,t.jsx)("button",{type:"button",className:"flex h-[32px] w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] pl-[10px] pr-[8px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:h,children:(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium text-textPrimary",children:m("Use Preset")})})})]})]}):null});var H=e.i(504764),W=e.i(323954),V=e.i(182781);let O=(0,s.memo)(function({presets:e}){let[r,a]=(0,s.useState)("protocols"),[l,o]=(0,s.useState)("protocols"),[n,i]=(0,s.useState)("protocols");return e?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[e.newPairs&&(0,t.jsx)(G,{title:"New Pairs",preset:e.newPairs,activeTab:r,setActiveTab:a}),e.finalStretch&&(0,t.jsx)(G,{title:"Final Stretch",preset:e.finalStretch,activeTab:l,setActiveTab:o}),e.migrated&&(0,t.jsx)(G,{title:"Migrated",preset:e.migrated,activeTab:n,setActiveTab:i})]}):null}),q=({label:e,min:r,max:s})=>null==r&&null==s?null:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[e,":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:null!=r&&null!=s?`${r} - ${s}`:null!=r?`Min: ${r}`:null!=s?`Max: ${s}`:""})]}),G=(0,s.memo)(function({title:e,preset:a,activeTab:l,setActiveTab:o}){let n=(0,r.useAtomValue)(N.userProfileAtom),c=(0,r.useAtomValue)(N.friendProfileDataAtom),u=(0,s.useMemo)(()=>c?null:n?.userId??null,[c,n]),{updateSharedPreset:d}=(0,i.useSocialTracker)(),x=(0,s.useMemo)(()=>"New Pairs"===e?"newPairs":"Final Stretch"===e?"finalStretch":"migrated",[e]),p=(0,s.useCallback)(()=>{d(x,null,"sol")},[d,x]),{t:m}=(0,b.useTranslation)(),[,f]=(0,V.useSettings)("pulseFilters",H.DEFAULT_FILTER_STATE_PULSE,W.isAllPulseFilters),h=(0,s.useCallback)(t=>{f(e=>({...e,[x]:t})),w.default.success(m("Preset applied to ")+e)},[f,x,e,m]),y=(0,s.useCallback)(()=>a?Object.values(a.protocols).filter(Boolean).length:0,[a]),v=(0,s.useCallback)(()=>{if(!a)return 0;let e=0;return a.dexPaid&&e++,a.mustEndInPump&&e++,(a.userCount?.min!=null||a.userCount?.max!=null)&&e++,(null!==a.age.min||null!==a.age.max)&&e++,(null!==a.top10Holders.min||null!==a.top10Holders.max)&&e++,(null!==a.devHolding.min||null!==a.devHolding.max)&&e++,(null!==a.snipers.min||null!==a.snipers.max)&&e++,(null!==a.insiders.min||null!==a.insiders.max)&&e++,(null!==a.bundle.min||null!==a.bundle.max)&&e++,(null!==a.holders.min||null!==a.holders.max)&&e++,(null!==a.botUsers.min||null!==a.botUsers.max)&&e++,(a.numMigrations?.min!==null||a.numMigrations?.max!==null)&&e++,e},[a]),j=(0,s.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.bondingCurve.min||null!==a.bondingCurve.max)&&e++,(null!==a.liquidity.min||null!==a.liquidity.max)&&e++,(null!==a.volume.min||null!==a.volume.max)&&e++,(null!==a.marketCap.min||null!==a.marketCap.max)&&e++,(a.fees?.min!==null||a.fees?.max!==null)&&e++,(null!==a.txns.min||null!==a.txns.max)&&e++,(null!==a.numBuys.min||null!==a.numBuys.max)&&e++,(null!==a.numSells.min||null!==a.numSells.max)&&e++,e},[a]),k=(0,s.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.twitter.min||null!==a.twitter.max)&&e++,a.twitterExists&&e++,a.website&&e++,a.telegram&&e++,a.atLeastOneSocial&&e++,e},[a]);return((0,s.useEffect)(()=>{let e={protocols:y(),audit:v(),metrics:j(),socials:k()};if(0===e[l]){let t=Object.keys(e).find(t=>e[t]>0);t&&o(t)}},[l,y,v,j,k,o]),a)?(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-[12px] border-[2px] border-white/5",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-x-[1px] -inset-y-[1px] z-[15] translate-y-[1px] rounded-[12px] border-[1px] border-white/[0.035]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[10] rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)]"}),(0,t.jsxs)("div",{className:"relative z-[15] flex flex-col gap-3 p-3 pt-[8px]",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,t.jsx)("div",{className:"text-[14px] font-medium text-textPrimary",children:e})}),(a.searchKeywords.length>0||a.excludeKeywords.length>0)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-b border-secondaryStroke/50 pb-2",children:[a.searchKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Search Keywords"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:a.searchKeywords.join(", ")})]}),a.excludeKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Exclude Keywords"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:a.excludeKeywords.join(", ")})]})]}),(0,t.jsxs)("div",{className:"flex flex-row flex-wrap gap-2",children:[y()>0&&(0,t.jsx)(g.default,{selected:"protocols"===l,onClick:()=>o("protocols"),height:"h-[40px]",filterNumber:y(),children:m("Protocols")}),v()>0&&(0,t.jsx)(g.default,{selected:"audit"===l,onClick:()=>o("audit"),height:"h-[40px]",filterNumber:v(),children:m("Audit")}),j()>0&&(0,t.jsx)(g.default,{selected:"metrics"===l,onClick:()=>o("metrics"),height:"h-[40px]",filterNumber:j(),children:m("$ Metrics")}),k()>0&&(0,t.jsx)(g.default,{selected:"socials"===l,onClick:()=>o("socials"),height:"h-[40px]",filterNumber:k(),children:m("Socials")})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:["protocols"===l&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.protocols.pump&&(0,t.jsx)(R,{color:"pump",src:"pump.svg",label:m("Pump")}),a.protocols.bonk&&(0,t.jsx)(R,{color:"bonk",src:"bonk.svg",label:m("Bonk")}),a.protocols.bonkers&&(0,t.jsx)(R,{color:"bonkers",src:"bonkers.svg",label:m("Bonkers")}),a.protocols.surge&&(0,t.jsx)(R,{color:"surge",src:"surge.svg",label:m("Surge")}),a.protocols.moonshotApp&&(0,t.jsx)(R,{color:"moonshotApp",src:"moonshot-new.svg",label:m("Moonshot")}),a.protocols.bags&&(0,t.jsx)(R,{color:"bags",src:"bags.svg",label:m("Bags")}),a.protocols.soar&&(0,t.jsx)(R,{color:"soar",src:"soar.svg",label:m("Soar")}),a.protocols.launchACoin&&(0,t.jsx)(R,{color:"launchACoin",src:"launch-a-coin.svg",label:m("Believe")}),a.protocols.jupiterStudio&&(0,t.jsx)(R,{color:"jupiterStudio",src:"jupstudio.svg",label:m("Jupiter Studio")}),a.protocols.moonshot&&(0,t.jsx)(R,{color:"moonshot",src:"moonit.svg",label:m("Moonit")}),a.protocols.boop&&(0,t.jsx)(R,{color:"boop",src:"boop.svg",label:m("Boop")}),a.protocols.launchLab&&(0,t.jsx)(R,{color:"launchlab",src:"launchlab.svg",label:m("LaunchLab")}),a.protocols.virtualCurve&&(0,t.jsx)(R,{color:"virtualCurve",src:"virtual-curve.svg",label:m("Dynamic BC")}),a.protocols.raydium&&(0,t.jsx)(R,{color:"[#C4D4FF]",src:"ray.svg",label:m("Raydium"),protocol:"Raydium V4",launchPad:!1}),a.protocols.meteoraAmm&&(0,t.jsx)(R,{color:"[#FFECE7]",src:"meteora.svg",label:m("Meteora AMM"),protocol:"Meteora AMM",launchPad:!1}),a.protocols.meteoraAmmV2&&(0,t.jsx)(R,{color:"[#FFECE7]",src:"meteora.svg",label:m("Meteora AMM V2"),protocol:"Meteora AMM V2",launchPad:!1}),a.protocols.pumpAmm&&(0,t.jsx)(R,{color:"[#A2A2A2]",src:"pump-amm-temp.svg",label:m("Pump AMM"),protocol:"Pump AMM",launchPad:!1}),a.protocols.orca&&(0,t.jsx)(R,{color:"orca",src:"orca.svg",label:m("Orca")}),a.protocols.wavebreak&&(0,t.jsx)(R,{color:"[#EDD583]",src:"orca-grad.svg",label:m("Wavebreak"),protocol:"Wavebreak",launchPad:!1})]}),"audit"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[a.dexPaid&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Dex Paid"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Enabled")})]}),a.mustEndInPump&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("CA ends in 'pump'"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Enabled")})]}),(0,t.jsx)(q,{label:m("Recent Visitors"),min:a.userCount?.min,max:a.userCount?.max}),(0,t.jsx)(q,{label:m("Age (mins)"),min:a.age.min,max:a.age.max}),(0,t.jsx)(q,{label:m("Top 10 Holders %"),min:a.top10Holders.min,max:a.top10Holders.max}),(0,t.jsx)(q,{label:m("Dev Holding %"),min:a.devHolding.min,max:a.devHolding.max}),(0,t.jsx)(q,{label:m("Snipers %"),min:a.snipers.min,max:a.snipers.max}),(0,t.jsx)(q,{label:m("Insiders %"),min:a.insiders.min,max:a.insiders.max}),(0,t.jsx)(q,{label:m("Bundle %"),min:a.bundle.min,max:a.bundle.max}),(0,t.jsx)(q,{label:m("Holders"),min:a.holders.min,max:a.holders.max}),(0,t.jsx)(q,{label:m("Pro Traders"),min:a.botUsers.min,max:a.botUsers.max}),(0,t.jsx)(q,{label:m("Dev Migrations"),min:a.numMigrations?.min,max:a.numMigrations?.max})]}),"metrics"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(q,{label:m("B. curve %"),min:a.bondingCurve.min,max:a.bondingCurve.max}),(0,t.jsx)(q,{label:m("Liquidity ($)"),min:a.liquidity.min,max:a.liquidity.max}),(0,t.jsx)(q,{label:m("Volume ($)"),min:a.volume.min,max:a.volume.max}),(0,t.jsx)(q,{label:m("Market Cap ($)"),min:a.marketCap.min,max:a.marketCap.max}),(0,t.jsx)(q,{label:m("Global Fees Paid (SOL)"),min:a.fees?.min,max:a.fees?.max}),(0,t.jsx)(q,{label:m("Txns"),min:a.txns.min,max:a.txns.max}),(0,t.jsx)(q,{label:m("Num Buys"),min:a.numBuys.min,max:a.numBuys.max}),(0,t.jsx)(q,{label:m("Num Sells"),min:a.numSells.min,max:a.numSells.max})]}),"socials"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(q,{label:m("Twitter Reuses"),min:a.twitter.min,max:a.twitter.max}),a.twitterExists&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Twitter"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]}),a.website&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Website"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]}),a.telegram&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("Telegram"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]}),a.atLeastOneSocial&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"min-w-[120px] text-[12px] text-textSecondary",children:[m("At Least One Social"),":"]}),(0,t.jsx)("span",{className:"text-[12px] text-textPrimary",children:m("Required")})]})]})]}),(0,t.jsx)("div",{className:"relative z-[15] flex min-h-[4px] flex-1 flex-row items-center justify-center pb-[6px] pt-[10px]",children:u?(0,t.jsx)("button",{type:"button",className:"flex h-[32px] w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] pl-[10px] pr-[8px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:p,children:(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium text-textPrimary",children:m("Remove Preset")})}):(0,t.jsx)("button",{type:"button",className:"flex h-[32px] w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] pl-[10px] pr-[8px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:()=>h(a),children:(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium text-textPrimary",children:m("Use Preset")})})})]})]}):null}),K=(0,s.memo)(function({sharedPresets:e,selectedChain:r}){return(0,s.useMemo)(()=>{if(!e)return!1;let t=e.sol&&(e.sol.newPairs||e.sol.finalStretch||e.sol.migrated),r=e.bnb&&(e.bnb.newPairs||e.bnb.finalStretch||e.bnb.migrated);return t||r},[e])&&e?(0,t.jsx)("div",{className:"flex h-full min-h-0 flex-1 flex-col gap-[6px] overflow-hidden",children:(0,t.jsx)("div",{className:"min-h-0 flex-1 overflow-y-auto [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:"sol"===r?(0,t.jsx)(O,{presets:e.sol}):(0,t.jsx)(_,{presets:e.bnb})})}):null});var Y=e.i(538701),X=e.i(101380),J=e.i(937491);let Q=(0,s.memo)(function({sharedTheme:e}){let{t:a}=(0,b.useTranslation)(),[l,o]=(0,r.useAtom)(Y.themeAtom),n=(0,r.useSetAtom)(Y.selectedPresetAtom),[i,c]=(0,V.useSettings)("customFontUrl",""),[u,d]=(0,s.useState)(null),x=(0,s.useMemo)(()=>e?(0,J.getCurrentThemeColors)(e.primaryColor,e.isBrighterTheme,e.colorOverrides):null,[e]),p=(0,s.useCallback)(()=>{if(e)try{let t={...l,fontUrl:i};if(d(t),!e.primaryColor||!/^#[0-9A-F]{6}$/i.test(e.primaryColor))return void w.default.error(a("Invalid primary color format"));if(e.colorOverrides){let t=["background","backgroundSecondary","backgroundTertiary","primaryStroke","secondaryStroke","borderSubtle","textPrimary","textSecondary","textTertiary","increase","decrease","increaseHover","decreaseHover","chartUp","chartDown","chartUpBorder","chartUpWick","chartDownBorder","chartDownWick","primaryGreen","primaryYellow","primaryOrange","primaryOrangeHover","primaryRed","primaryLightBlue"];for(let r of Object.keys(e.colorOverrides)){if(!t.includes(r))return void w.default.error(a("Invalid color override key: ")+r);let s=e.colorOverrides[r];if(s&&!/^#[0-9A-F]{6}$/i.test(s))return void w.default.error(a("Invalid color format for ")+r+": "+s)}}let r=e.backgroundType||"solid",s={primaryColor:e.primaryColor,isBrighterTheme:e.isBrighterTheme||!1,colorOverrides:e.colorOverrides||{}};"gradient"===r?o({...l,...s,backgroundType:"gradient",gradientStartColor:e.gradientStartColor||"#181c27",gradientEndColor:e.gradientEndColor||"#131722"}):o({...l,...s,backgroundType:"solid",chartBackgroundColor:e.chartBackgroundColor||e.colorOverrides?.backgroundSecondary||J.DEFAULT_COLORS.backgroundSecondary}),c(e.fontUrl||""),n("preset9"),w.default.success(a("Theme applied successfully"))}catch(e){console.error("Error applying theme:",e),w.default.error(a("Failed to apply theme"))}},[e,l,i,o,c,n,a]),m=(0,s.useCallback)(()=>{if(u)try{let e=u.backgroundType||"solid",t={primaryColor:u.primaryColor,isBrighterTheme:u.isBrighterTheme||!1,colorOverrides:u.colorOverrides||{}};"gradient"===e?o({...l,...t,backgroundType:"gradient",gradientStartColor:u.gradientStartColor||"#181c27",gradientEndColor:u.gradientEndColor||"#131722"}):o({...l,...t,backgroundType:"solid",chartBackgroundColor:u.chartBackgroundColor||u.colorOverrides?.backgroundSecondary||J.DEFAULT_COLORS.backgroundSecondary}),c(u.fontUrl||""),d(null),w.default.success(a("Theme reverted successfully"))}catch(e){console.error("Error reverting theme:",e),w.default.error(a("Failed to revert theme"))}},[u,l,o,c,a]);if(!e||!x)return null;let f=e.primaryColor||"#526FFF",h=(0,X.brightenHexColor)(f,10);return(0,t.jsx)("div",{className:"flex flex-col gap-[12px]",children:(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-[12px] border-[2px] border-white/5",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-x-[1px] -inset-y-[1px] z-[15] translate-y-[1px] rounded-[12px] border-[1px] border-white/[0.035]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[10] rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)]"}),(0,t.jsxs)("div",{className:"relative z-[15] flex flex-col gap-[12px] p-3",children:[(0,t.jsxs)("div",{className:"relative flex h-[180px] w-full flex-row overflow-hidden rounded-[4px]",children:[(0,t.jsx)("div",{className:"absolute inset-0 z-30 h-full w-full rounded-[4px]"}),(0,t.jsx)("div",{className:"absolute inset-0 z-20 h-full w-full rounded-[4px] border border-white/10"}),(0,t.jsx)("div",{className:"inset-0 z-10 flex h-full w-full flex-col items-center justify-center rounded-[4px] p-[12px] pb-[14px]",style:{background:`radial-gradient(circle at 70% 40%, ${h} 0%, ${f} 70%)`},children:(0,t.jsxs)("div",{className:"z-10 flex h-full w-full flex-col items-center justify-start gap-[8px] rounded-[4px]",style:{backgroundColor:x.background||"#090909"},children:[(0,t.jsx)("div",{className:"flex h-[14px] min-h-[13px] w-full flex-row border-b-[1px]",style:{borderBottomColor:x.primaryStroke||"#22242D"}}),(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-end gap-[4px] pr-[8px]",children:[(0,t.jsx)("div",{className:"flex h-[6px] w-[13px] flex-row items-center justify-center rounded-full",style:{backgroundColor:x.primaryStroke||"#22242D"}}),(0,t.jsx)("div",{className:"flex h-[6px] w-[13px] flex-row items-center justify-center rounded-full",style:{backgroundColor:f}})]}),(0,t.jsx)("div",{className:"flex h-full w-full flex-row px-[8px]",children:(0,t.jsx)("div",{className:"flex h-full w-full flex-row rounded-[4px] border",style:{borderColor:x.primaryStroke||"#22242D",backgroundColor:x.backgroundSecondary||"#101114"}})}),(0,t.jsx)("div",{className:"flex h-[9px] min-h-[9px] w-full flex-row border-t-[1px]",style:{borderTopColor:x.primaryStroke||"#22242D"}})]})})]}),(0,t.jsxs)("div",{className:"relative z-[15] flex min-h-[4px] flex-1 flex-row items-center justify-center gap-[12px] pb-[6px] pt-[10px]",children:[(0,t.jsx)("button",{type:"button",onClick:m,disabled:!u,className:`flex h-[32px] flex-1 flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] pl-[10px] pr-[8px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out ${u?"cursor-pointer bg-textPrimary/[0.05] text-textPrimary hover:bg-textPrimary/[0.1]":"cursor-not-allowed bg-textPrimary/[0.05] text-textTertiary opacity-50"}`,children:(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium",children:a("Undo")})}),(0,t.jsx)("button",{type:"button",className:"flex h-[32px] flex-1 items-center justify-center gap-[6px] whitespace-nowrap rounded-full px-[12px] transition-all duration-150 hover:opacity-80",style:{backgroundColor:f},onClick:p,children:(0,t.jsx)("span",{className:"truncate text-[14px] font-bold",style:{color:x.background||"#090909"},children:a("Use Theme")})})]})]})]})})});var Z=e.i(717744),ee=e.i(914717);let et=({userProfile:e,handleStatusChange:r,onClose:s})=>(0,t.jsx)("div",{className:"flex w-[96px] flex-col gap-[4px] p-[4px]",children:A.FORCED_STATUS.map(a=>{let l=e?.forcedStatus===a||!e?.forcedStatus&&"online"===a;return(0,t.jsxs)("button",{type:"button",className:`relative flex items-center gap-[8px] px-[12px] hover:bg-secondaryStroke/60 hover:opacity-100 hover:grayscale-0 ${l?"bg-secondaryStroke/40":"opacity-90 grayscale-[0.25]"} group h-[32px] w-full justify-start overflow-hidden rounded-[4px] text-left`,onClick:()=>{r(a),s?.()},children:[(0,t.jsx)("div",{className:"flex h-[14px] w-[14px] flex-shrink-0 items-center justify-center rounded-full bg-backgroundTertiary",children:(0,t.jsx)("div",{className:`h-[10px] w-[10px] rounded-full ${"offline"===a?"border-[2px] border-textTertiary":"away"===a?"bg-primaryOrange":"bg-primaryGreen"}`})}),(0,t.jsx)("span",{className:`text-[12px] font-medium capitalize leading-[16px] ${l?"text-textPrimary":"text-textSecondary"}`,children:a})]},a)})}),er=(0,s.memo)(function({setIsEditing:e,handleSave:r,handleCancel:s,isEditing:a,editedColor:l,setEditedColor:o,originalColor:n}){let{t:i}=(0,b.useTranslation)();return(0,t.jsx)("div",{className:"flex flex-row items-center gap-[6px]",children:a?(0,t.jsxs)(t.Fragment,{children:[l&&o&&(0,t.jsx)("div",{className:"flex h-[32px] max-w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] px-[10px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)(y.ColorPicker,{color:l,onChange:o,onReset:()=>o(n||"#000000"),label:""})}),(0,t.jsx)("button",{type:"button",className:"flex h-[32px] max-w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] px-[10px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:s,children:(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium text-textPrimary",children:i("Cancel")})}),(0,t.jsx)("button",{type:"button",className:"flex h-[32px] max-w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] px-[10px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:r,children:(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium text-textPrimary",children:i("Save")})})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(j.Tooltip,{content:"Edit Profile",position:"top",children:(0,t.jsxs)("button",{type:"button",className:"flex h-[32px] max-w-full flex-row items-center justify-center gap-[4px] rounded-full bg-textPrimary/[0.05] pl-[8px] pr-[10px] backdrop-blur-md hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:()=>e(!0),children:[(0,t.jsx)("i",{className:"ri-pencil-line flex-shrink-0 text-[14px] text-textPrimary/90"}),(0,t.jsx)("span",{className:"truncate whitespace-nowrap text-[14px] font-medium text-textPrimary",children:i("Edit")})]})})})})}),es=(0,s.memo)(function(){let e=(0,r.useAtomValue)(N.userProfileAtom),l=(0,r.useAtomValue)(a.userIdAtom),o=(0,r.useAtomValue)(N.friendProfileDataAtom),c=(0,r.useAtomValue)(S.myLobbyInfoAtom),{updateUserProfilePicture:u,updateUserBanner:d}=(0,i.useSocialTracker)(),{socialApiPost:x}=(0,P.useRateLimitedSocialApi)(P.socialApiRateLimitAtom),{t:p}=(0,b.useTranslation)(),{color:f,username:h,bio:y,avatarUrl:A,bannerUrl:B,socialLinks:L,currentPage:F,currentSubpage:U,currentChain:E,lastUpdatedTimestamp:R}=(0,s.useMemo)(()=>o&&o.userProfile.userId!==e?.userId?{userId:o.userProfile.userId,username:o.userProfile.username,avatarUrl:o.userProfile.avatarUrl,bannerUrl:o.userProfile.bannerUrl,color:o.userProfile.color||"#000000",socialLinks:o.userProfile.socialLinks,bio:null,currentPage:o.currentPage||"Unknown",currentChain:o.currentChain||null,currentSubpage:o.currentSubpage||null,lastUpdatedTimestamp:o.lastUpdatedTimestamp||0}:{userId:e?.userId,username:e?.username,avatarUrl:e?.avatarUrl,bannerUrl:e?.bannerUrl,color:e?.color||"#000000",socialLinks:{twitterHandle:e?.socialLinks?.twitterHandle||null,youtubeHandle:e?.socialLinks?.youtubeHandle||null,twitchHandle:e?.socialLinks?.twitchHandle||null},bio:e?.bio,currentPage:"Unknown",currentSubpage:null,lastUpdatedTimestamp:0,currentChain:null},[e,o]),_=(0,s.useMemo)(()=>null===o||o?.userProfile.userId===e?.userId,[o,e?.userId]),D=(0,s.useMemo)(()=>!!c&&!!o&&c.members.some(e=>e.userProfile.userId===o.userProfile.userId),[c,o]),[z,H]=(0,s.useState)(null),W=(0,s.useMemo)(()=>o&&z?z.bio:y,[o,z,y]),[V,O]=(0,s.useState)(!1),[q,G]=(0,s.useState)(h),[Y,X]=(0,s.useState)(W),[J,es]=(0,s.useState)(f||"#000000"),[el,eo]=(0,s.useState)(!1),[en,ei]=(0,s.useState)("profile"),{updateUserProfile:ec,addFriend:eu}=(0,i.useSocialTracker)();(0,s.useEffect)(()=>{G(h),X(W),es(f||"#000000")},[h,W,f]);let ed=(0,s.useCallback)(async()=>{try{ec({username:q,bio:Y??void 0,color:J})}catch{w.default.error("Error updating profile")}finally{O(!1)}},[q,Y,J,ec]),ex=(0,s.useCallback)(()=>{G(h),X(W),es(f||"#000000"),O(!1)},[h,W,f]),ep=(0,s.useCallback)(async e=>{try{await u(e)}catch(e){console.error("Error updating profile picture:",e)}finally{O(!1)}},[u]),em=(0,s.useCallback)(async e=>{try{await d(e)}catch(e){console.error("Error updating banner:",e)}finally{O(!1)}},[d]),ef=(0,s.useCallback)(()=>{ei("banner"),eo(!0)},[]),eh=(0,s.useCallback)(()=>{ei("profile"),eo(!0)},[]),eb=(0,s.useCallback)(async e=>{ec({forcedStatus:e})},[ec]),eg=(0,r.useAtomValue)(N.usernameToDataAtom),{removeFriend:ey}=(0,i.useSocialTracker)(),{inviteToLobby:ev,requestJoinLobby:ew}=(0,n.useLobbyApi)(),[ej,ek]=(0,s.useState)(!1),eN=(0,s.useCallback)(()=>{ek(!0)},[]),eS=(0,s.useCallback)(async()=>{if(o?.userProfile.username){let e=eg.get(o?.userProfile.username)?.relationshipId;if(!e)return void w.default.error("Friend not found");await ey(e)}else w.default.error("Friend not found")},[ey,eg,o?.userProfile.username]),eA=(0,s.useMemo)(()=>{if(!h)return!1;let e=eg.get(h);return e?.relationshipType==="accepted"},[eg,h]),eP=(0,s.useCallback)(()=>{h&&eu(h)},[eu,h]),eC=(0,r.useAtomValue)(N.sharedPresetsAtom),[eT,eI]=(0,s.useState)(null),eM=(0,r.useAtomValue)(N.sharedThemeAtom),[e$,eB]=(0,s.useState)(null),eL=(0,s.useMemo)(()=>{if(!eT)return!1;let e=eT.sol&&(eT.sol.newPairs||eT.sol.finalStretch||eT.sol.migrated),t=eT.bnb&&(eT.bnb.newPairs||eT.bnb.finalStretch||eT.bnb.migrated);return e||t},[eT]),eF=(0,s.useMemo)(()=>!!(eT?.sol&&(eT.sol.newPairs||eT.sol.finalStretch||eT.sol.migrated)),[eT]),eU=(0,s.useMemo)(()=>!!(eT?.bnb&&(eT.bnb.newPairs||eT.bnb.finalStretch||eT.bnb.migrated)),[eT]),eE=(0,s.useMemo)(()=>!!e$&&!!e$.primaryColor,[e$]),[eR,e_]=(0,s.useState)("Filters"),[eD,ez]=(0,s.useState)("sol");(0,s.useEffect)(()=>{eL&&!eE?e_("Filters"):eE&&!eL&&e_("Theme")},[eL,eE]),(0,s.useEffect)(()=>{eF&&!eU?ez("sol"):eU&&!eF?ez("bnb"):eF&&eU&&ez("sol")},[eF,eU]),(0,s.useEffect)(()=>{(async()=>{if(_)eI(eC||null),eB(eM||null);else{H(null);let{sharedPresets:e,sharedTheme:t,bio:r,forcedStatus:s}=await x("/get-shared-profile",{userId:o?.userProfile.userId},void 0,l??void 0);if(H({bio:r??null,forcedStatus:s??null}),t&&eB(t),e)try{eI({sol:{newPairs:e.sol?.newPairs||null,finalStretch:e.sol?.finalStretch||null,migrated:e.sol?.migrated||null},bnb:{newPairs:e.bnb?.newPairs||null,finalStretch:e.bnb?.finalStretch||null,migrated:e.bnb?.migrated||null}})}catch{console.error("Error parsing shared presets:",e),w.default.error("Error parsing shared presets")}}})()},[l,_,o,eC,eM,x]);let eH=(0,s.useMemo)(()=>_?e?.forcedStatus!=="offline":o?.presence!=="offline",[_,o?.presence,e?.forcedStatus]),eW=(0,s.useMemo)(()=>{if(_){let t=e?.forcedStatus;return"offline"===t?"border-[3px] border-textTertiary":"away"===t?"bg-primaryOrange":"bg-primaryGreen"}return eH?"away"===z?.forcedStatus?"bg-primaryOrange":"bg-primaryGreen":"border-[3px] border-textTertiary"},[_,e?.forcedStatus,z?.forcedStatus,eH]),eV=(0,s.useMemo)(()=>_?e?.forcedStatus||"online":eH?"away"===o?.presence?"away":"online":"offline",[_,e?.forcedStatus,o?.presence,eH]),eO=(0,s.useMemo)(()=>{let e=(V?J:f)||"#FFFFFF";if(e.startsWith("#")){let t=e.slice(1),r=parseInt(t.slice(0,2),16),s=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16);return`rgba(${r}, ${s}, ${a}, 0.20)`}return e},[V,J,f]);return!h&&_?(0,t.jsx)(ea,{}):e?(0,t.jsxs)("div",{className:"relative flex h-full w-full flex-col overflow-y-auto [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:[(0,t.jsxs)("div",{className:"group relative aspect-[3/1] w-full flex-shrink-0 overflow-hidden bg-background",children:[(0,t.jsx)(m.default,{src:B||(0,Z.generateDefaultBanner)(h),alt:h||"",fill:!0,className:"object-cover",draggable:!1}),_&&(0,t.jsx)("button",{type:"button",onClick:ef,className:"z-5 absolute inset-0 flex items-center justify-center bg-black/0 opacity-0 transition-all duration-200 group-hover:bg-black/50 group-hover:opacity-100",children:(0,t.jsx)("i",{className:"ri-camera-line text-[32px] text-white"})}),!_&&(0,t.jsxs)("div",{className:"absolute left-[8px] top-[8px] z-[20] flex flex-row items-center gap-[6px]",children:[!D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Tooltip,{content:"Invite to lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[32px] w-[32px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:e=>{e.stopPropagation();let t=eg.get(o?.userProfile.username||"")?.relationshipId;t&&ev(t)},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),(0,t.jsx)(j.Tooltip,{content:"Request to join lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[32px] w-[32px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:e=>{e.stopPropagation();let t=eg.get(o?.userProfile.username||"")?.relationshipId;t&&ew(t)},children:(0,t.jsx)("i",{className:"ri-login-box-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})})]}),eA?(0,t.jsx)(j.Tooltip,{content:"Remove Friend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[32px] w-[32px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:e=>{e.stopPropagation(),eN()},children:(0,t.jsx)("i",{className:"ri-user-minus-line text-[16px] text-decrease/80 transition-colors duration-[125ms] ease-in-out"})})}):(0,t.jsx)(j.Tooltip,{content:"Add Friend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn flex h-[32px] w-[32px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:e=>{e.stopPropagation(),eP()},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})})]})]}),(0,t.jsxs)("div",{className:"relative flex flex-shrink-0 flex-col px-[16px] pb-[18px]",children:[(0,t.jsxs)("div",{className:"pointer-events-none absolute -left-[16px] right-0 top-[0px] z-[0] h-[20px] overflow-hidden opacity-[1]",style:{maskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)"},children:[(0,t.jsx)("div",{className:"absolute inset-0 h-full w-full blur-[80px] brightness-[0.65] saturate-[1.3]",children:B?(0,t.jsx)(m.default,{src:B,alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.style.visibility="hidden"},loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(m.default,{src:(0,Z.generateDefaultBanner)(h),alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"})}),(0,t.jsx)("div",{className:"absolute inset-0 scale-110 bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute h-[400px] w-[400px] rounded-full opacity-30 blur-[60px]",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute h-[300px] w-[300px] rounded-full opacity-25 blur-[50px]",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}})]}),(0,t.jsxs)("div",{className:"pointer-events-none relative z-[10] -mt-[44px] mb-[6px] flex flex-row items-end gap-[8px]",children:[(0,t.jsxs)("div",{className:"relative flex-shrink-0 overflow-visible",children:[(0,t.jsxs)("div",{className:"group pointer-events-auto relative h-[88px] w-[88px] overflow-visible rounded-full shadow-lg",children:[(0,t.jsx)("div",{className:"absolute -inset-[4px] rounded-full bg-backgroundTertiary z-[0]"}),_&&(0,t.jsx)("button",{type:"button",onClick:eh,className:"pointer-events-auto absolute inset-0 z-10 flex items-center justify-center rounded-full bg-black/0 opacity-0 transition-all duration-200 group-hover:bg-black/50 group-hover:opacity-100",children:(0,t.jsx)("i",{className:"ri-camera-line text-[24px] text-white"})}),(0,t.jsxs)("div",{className:"relative z-[1] h-full w-full flex-shrink-0 overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:A||(0,ee.generateDefaultProfilePicture)(h),alt:h||"",width:88,height:88,className:"flex-shrink-0 object-cover"})]})]}),(0,t.jsx)(j.Tooltip,{content:_?p("Update Status"):eV,position:"top",children:(0,t.jsx)("div",{className:`pointer-events-auto absolute bottom-[4px] left-[44px] z-[20] flex h-[22px] flex-shrink-0 items-center justify-center gap-[4px] rounded-full border border-white/[0.035] bg-secondaryStroke px-[6px] ${_?"cursor-pointer hover:brightness-110":"cursor-default"} transition-brightness duration-150 ease-in-out`,children:_?(0,t.jsx)(v.Dropdown,{trigger:(0,t.jsxs)("div",{className:"pointer-events-auto flex cursor-pointer items-center gap-[5px]",children:[(0,t.jsx)("div",{className:"flex h-[14px] w-[14px] flex-shrink-0 items-center justify-center rounded-full bg-secondaryStroke",children:(0,t.jsx)("div",{className:`h-[10px] w-[10px] rounded-full ${eW}`})}),(0,t.jsx)("span",{className:"text-[12px] font-medium capitalize text-textSecondary",children:eV})]}),align:"left",position:"bottom",scrimColor:!1,children:(0,t.jsx)(et,{userProfile:e,handleStatusChange:eb})}):(0,t.jsxs)("div",{className:"flex items-center gap-[5px]",children:[(0,t.jsx)("div",{className:"flex h-[14px] w-[14px] flex-shrink-0 items-center justify-center rounded-full bg-secondaryStroke",children:(0,t.jsx)("div",{className:`h-[10px] w-[10px] rounded-full ${eW}`})}),(0,t.jsx)("span",{className:"text-[12px] font-medium capitalize text-textSecondary",children:eV})]})})})]}),(0,t.jsx)("div",{className:"pointer-events-auto flex h-[32px] max-h-[32px] min-h-[32px] min-w-0 flex-1 flex-row items-start justify-end",children:_?(0,t.jsx)(er,{setIsEditing:O,handleSave:ed,handleCancel:ex,isEditing:V,editedColor:J,setEditedColor:es,originalColor:f}):(0,t.jsx)(T.FriendActivityButton,{lastPage:F??null,subpage:U??null,currentChain:E,isOnline:eH,lastPresenceUpdateTimestamp:R,size:"small"})})]}),(0,t.jsx)("div",{className:"relative z-[10] flex h-[24px] max-h-[24px] min-h-[24px] flex-row items-center justify-between",children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[10px]",children:[V?(0,t.jsx)("input",{type:"text",value:q,onChange:e=>G(e.target.value),className:"h-[32px] w-fit border-b border-primaryStroke bg-transparent text-[16px] font-medium text-textPrimary outline-none transition-colors duration-150 focus:border-primaryBlue",placeholder:"Enter username"}):(0,t.jsx)(j.Tooltip,{content:p("Copy Username"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),h&&((0,k.handleCopy)(h),w.default.success({message:p("Username copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-[16px] text-primaryBlue"})},{duration:1500}))},className:"text-textPrimary transition-colors duration-[125ms] hover:text-primaryBlueHover",children:(0,t.jsx)("span",{className:"text-[16px] font-medium",children:h})})}),Object.values(L||{}).some(e=>null!==e)&&(0,t.jsxs)("div",{className:"flex max-h-[27px] flex-row items-center gap-[6px]",children:[L?.twitterHandle&&(0,t.jsx)("a",{href:L.twitterHandle.startsWith("http")?L.twitterHandle:`https://x.com/${L.twitterHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitter-x-line text-[16px] text-textPrimary/90"})}),L?.youtubeHandle&&(0,t.jsx)("a",{href:L.youtubeHandle.startsWith("http")?L.youtubeHandle:`https://youtube.com/@${L.youtubeHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-youtube-fill text-[16px] text-textPrimary/90"})}),L?.twitchHandle&&(0,t.jsx)("a",{href:L.twitchHandle.startsWith("http")?L.twitchHandle:`https://twitch.tv/${L.twitchHandle}`,target:"_blank",rel:"noopener noreferrer",className:"flex h-[28px] w-[28px] flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitch-fill text-[16px] text-textPrimary/90"})})]})]})}),(_||W)&&(0,t.jsx)("div",{className:"relative z-[10] mt-[12px] w-full",children:(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-[12px] border-[2px] border-white/5",children:[(0,t.jsxs)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] z-[0] opacity-[0.55]",children:[(0,t.jsx)("div",{className:"absolute inset-0 h-full w-full overflow-hidden rounded-[12px] blur-[80px] brightness-[0.65] saturate-[1.3]",children:B?(0,t.jsx)(m.default,{src:B,alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(m.default,{src:(0,Z.generateDefaultBanner)(h),alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"})}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-10 h-[150px] bg-gradient-to-t from-background to-transparent"})]}),(0,t.jsx)("div",{className:"absolute inset-0 z-[1] scale-110 rounded-[12px] bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute z-[1] h-[400px] w-[400px] rounded-full opacity-30 blur-[60px]",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute z-[1] h-[300px] w-[300px] rounded-full opacity-25 blur-[50px]",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[5] rounded-[12px] bg-gradient-to-br from-white/[0.02] to-transparent"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[10] rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)]"}),(0,t.jsx)("div",{className:"relative z-[15]",children:V?(0,t.jsxs)("div",{className:"relative",style:{background:`linear-gradient(to right, transparent 50%, ${eO})`},children:[(0,t.jsx)("textarea",{value:Y??"",onChange:e=>{e.target.value.length<=100&&X(e.target.value)},maxLength:100,className:"relative z-[15] w-full resize-none break-words border-0 bg-transparent px-[12px] pb-[10px] pt-[8px] text-[14px] text-textSecondary outline-none focus:border-0",placeholder:"Tell us about yourself...",rows:3}),(0,t.jsxs)("div",{className:"absolute bottom-[8px] right-[12px] z-[20] text-[12px] text-textTertiary",children:[Y?.length||0," / ",100]})]}):W?(0,t.jsx)("div",{className:"relative z-[15] break-words px-[12px] pb-[10px] pt-[8px] text-[14px] text-textSecondary",style:{background:`linear-gradient(to right, transparent 50%, ${eO})`},children:W}):_&&(0,t.jsx)("div",{className:"relative z-[15] break-words px-[12px] pb-[10px] pt-[8px] text-[14px] text-textTertiary",style:{background:`linear-gradient(to right, transparent 50%, ${eO})`},children:"Tell us about yourself..."})})]})}),_&&(0,t.jsxs)("div",{className:"relative z-[10] mt-[16px] w-full",children:[(0,t.jsxs)("div",{className:"mb-[6px] flex h-[28px] max-h-[28px] min-h-[28px] w-full flex-row items-center gap-[6px]",children:[(0,t.jsx)("i",{className:"ri-link-m text-[16px] text-primaryBlueHover"}),(0,t.jsx)("span",{className:"text-[14px] text-textSecondary",children:p("Link Accounts")})]}),(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-[12px] border-[2px] border-white/5 p-[4px]",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-x-[1px] -inset-y-[1px] z-[15] translate-y-[1px] rounded-[12px] border-[1px] border-white/[0.035]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[10] rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)]"}),(0,t.jsx)("div",{className:"relative z-[15]",children:(0,t.jsx)(M.ProfileSocialLinks,{isUser:_})})]})]})]}),ej&&o&&(0,t.jsx)(C.UnfriendWarningModal,{onClose:()=>ek(!1),onConfirm:eS,username:o.userProfile.username}),(0,t.jsx)(I.UploadImageModal,{isOpen:el,onClose:()=>eo(!1),imageUploadSize:"banner"===en?I.bannerImageSize:I.profileImageSize,onUpload:"banner"===en?em:ep,title:"banner"===en?"Upload Banner":"Upload Profile Picture"}),(0,t.jsxs)("div",{className:"flex flex-col gap-[12px] px-[16px] pb-[20px]",children:[eL&&eE&&(0,t.jsxs)("div",{className:"flex h-[32px] max-h-[32px] min-h-[32px] flex-shrink-0 flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[8px]",children:[(0,t.jsx)(g.default,{selected:"Filters"===eR,onClick:()=>e_("Filters"),height:"h-[40px]",children:p("Filters")}),(0,t.jsx)(g.default,{selected:"Theme"===eR,onClick:()=>e_("Theme"),height:"h-[40px]",children:p("Theme")})]}),"Filters"===eR&&(0,t.jsx)($.ChainSelector,{selectedChain:eD,onChainChange:ez,hasSolPresets:eF,hasBnbPresets:eU})]}),(eL&&!eE||eL&&eE&&"Filters"===eR)&&eT&&(0,t.jsx)("div",{className:"flex flex-col px-[0px]",children:(0,t.jsx)(K,{sharedPresets:eT,selectedChain:eD})}),(eE&&!eL||eL&&eE&&"Theme"===eR)&&e$&&(0,t.jsx)("div",{className:"flex flex-col px-[0px]",children:(0,t.jsx)(Q,{sharedTheme:e$})})]})]}):(0,t.jsx)("div",{className:"flex h-full flex-col items-center justify-center",children:(0,t.jsx)("span",{className:"text-[14px] text-textSecondary",children:"Loading..."})})}),ea=(0,s.memo)(function(){let{t:e}=(0,b.useTranslation)(),[l,n]=(0,s.useState)(!1),c=(0,r.useAtomValue)(a.userIdAtom),u=(0,r.useAtomValue)(a.usernameAtom),{data:d}=(0,o.useSocialInfo)(c??"",u),{initializeSocialData:x}=(0,i.useSocialTracker)();return(0,s.useEffect)(()=>{d&&x(d)},[d,x]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-[16px] px-[24px]",children:[(0,t.jsxs)("div",{className:"flex max-w-[400px] flex-col items-center gap-[8px] text-center",children:[(0,t.jsx)("div",{className:"text-[18px] font-medium tracking-[-0.02rem] text-textSecondary",children:e("No username set")}),(0,t.jsx)("div",{className:"text-[14px] leading-[20px] text-textTertiary",children:e("Please set your username to continue")})]}),(0,t.jsx)("button",{type:"button",onClick:()=>n(!0),className:"flex h-[32px] cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-primaryBlue px-[12px] transition-all duration-[150ms] hover:bg-primaryBlue/80 hover:brightness-110",children:(0,t.jsx)("span",{className:"text-[16px] font-bold text-background",children:e("Set Username")})})]}),l&&(0,f.createPortal)((0,t.jsx)(h.EditReferralModal,{onClose:()=>n(!1),onSuccess:()=>n(!1)}),document.body)]})});e.s(["ProfileBody",0,es,"UserWithoutProfile",0,ea],692298);var el=e.i(60166),eo=e.i(555702),en=e.i(247167),ei=e.i(500676),ec=e.i(707716),eu=e.i(361319),ed=e.i(88653),ex=e.i(846932),ep=e.i(458359);let em=(0,s.memo)(function({setInputMessage:e,isWindowModal:a=!1}){let[l,o]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),d=(0,r.useAtomValue)(E.isMobileAtom),x=(0,s.useRef)(null),[p,m]=(0,s.useState)({style:{},origin:"origin-bottom-left",animateY:-4}),h=d?280:320,b=d?350:400;(0,s.useEffect)(()=>(i(!0),()=>i(!1)),[]);let g=(0,s.useCallback)(()=>{if(!x.current)return null;let e=x.current.getBoundingClientRect(),t=window.innerWidth,r=window.innerHeight,s=e.top,a=r-e.bottom,l=s>=b+8,o=a>=b+8,n=e.left+e.width/2-h/2;n+h>t-8&&(n=t-h-8),n<8&&(n=8);let i={position:"fixed",left:n,zIndex:9999};return l||!o&&s>a?(i.bottom=r-e.top+8,{style:i,origin:"origin-bottom",animateY:4}):(i.top=e.bottom+8,{style:i,origin:"origin-top",animateY:-4})},[h,b]);(0,s.useEffect)(()=>{if(!l)return void u(!1);let e=g();e&&(m(e),u(!0));let t=()=>{let e=g();e&&m(e)};return window.addEventListener("scroll",t,!0),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",t)}},[l,g]),(0,s.useEffect)(()=>{if(!l)return;let e=e=>{"Escape"===e.key&&o(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[l]);let y=(0,s.useCallback)(()=>o(!1),[]),v=(0,s.useCallback)(t=>{e(e=>{let r=e+t.emoji;return r.length>eo.MAX_MESSAGE_LENGTH?e:r})},[e]),w=(0,s.useCallback)(()=>{o(e=>!e)},[]),j=(0,t.jsx)(ed.AnimatePresence,{children:l&&c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ex.motion.div,{...ep.ModalAnimationUtility.backdrop,className:"fixed inset-0 z-[9998] bg-transparent",onClick:y}),(0,t.jsx)(ex.motion.div,{initial:{opacity:0,y:p.animateY},animate:{opacity:1,y:0},exit:{opacity:0,y:p.animateY},transition:{duration:.15,ease:"easeOut"},style:p.style,className:p.origin,children:(0,t.jsx)("div",{className:"overflow-hidden rounded-[12px] border border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_12px_0_rgba(0,0,0,0.4),0_8px_24px_0_rgba(0,0,0,0.3)]",children:(0,t.jsx)(eu.default,{onEmojiClick:v,width:d?280:320,height:d?350:400,theme:eu.Theme.DARK,emojiStyle:eu.EmojiStyle.APPLE,searchPlaceholder:"Search emoji...",previewConfig:{showPreview:!1},skinTonesDisabled:!0,lazyLoadEmojis:!0,style:{"--epr-emoji-size":d?"22px":"26px","--epr-bg-color":"transparent","--epr-category-navigation-button-size":"24px","--epr-search-input-bg-color":"var(--color-primaryStroke)","--epr-search-input-text-color":"var(--color-textPrimary)","--epr-search-input-placeholder-color":"var(--color-textTertiary)","--epr-category-label-bg-color":"var(--color-backgroundTertiary)","--epr-hover-bg-color":"var(--color-secondaryStroke)","--epr-focus-bg-color":"var(--color-secondaryStroke)","--epr-text-color":"var(--color-textSecondary)","--epr-category-icon-active-color":"var(--color-textPrimary)",border:"none"}})})})]})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{ref:x,type:"button",onClick:w,className:`group flex items-center justify-center ${a?"w-[24px] h-[24px]":"w-[28px] h-[28px]"} rounded-full transition-colors duration-[125ms] ease-in-out ${a?"hover:bg-secondaryStroke":"hover:bg-primaryStroke"}`,"aria-label":"Open emoji picker",children:(0,t.jsx)("i",{className:`ri-emotion-line ${a?"text-[16px]":"text-[18px]"} transition-colors duration-[125ms] ease-in-out ${l?"text-textPrimary":"text-textTertiary group-hover:text-textSecondary"} group-hover:text-textPrimary`})}),n&&(0,f.createPortal)(j,document.body)]})}),ef=(0,s.memo)(function({isWindowModal:e=!1,onMobileFocus:l}){let{t:o}=(0,b.useTranslation)(),[n,i]=(0,s.useState)(""),[c,u]=(0,s.useState)(!1),d=(0,s.useRef)(null),x=(0,r.useSetAtom)(el.lobbyChatMessagesAtom),p=(0,r.useAtomValue)(N.userProfileIdAtom),{safeSendMessageToFriendWebsocketJson:m,canSendMessage:f}=(()=>{let e=(0,r.useAtomValue)(a.userIdAtom),t=(0,r.useAtomValue)(a.usernameAtom),[l,o]=(0,r.useAtom)(el.lastMessageSentTimestampAtom),n=(0,s.useCallback)(()=>{if(0===l.length)return!0;let e=l[0];return e<Date.now()-el.BURST_MESSAGE_INTERVAL?(o([]),!0):e<Date.now()-el.NON_BURST_MESSAGE_INTERVAL?(o(e=>e.slice(3)),!0):l.length<el.BURST_MAX_MESSAGE_IN_WINDOW},[l,o]),i=eo.FRIENDS_URL,c=(0,s.useMemo)(()=>{if(en.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&e)return{"localhost-password":en.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":e}},[e]),{sendJsonMessage:u,readyState:d}=(0,ei.useWebSocketBase)({connectionType:ec.ConnectionType.FRIENDS,url:e&&t?i:null,queryParams:c,reconnectAttempts:50,onError:e=>{console.error("WebSocket connection error:",{url:i,error:e.message,readyState:ec.ReadyState[d],timestamp:new Date().toISOString()})}}),x=(0,s.useCallback)(e=>{if(d===ec.ReadyState.OPEN)if(n())o(e=>[Date.now(),...e]),u(e);else throw w.default.error("You are sending messages too fast"),Error("You are sending messages too fast");else throw Error("Not leader. Can not aquire leader tab status.")},[u,d,n,o]);return{canSendMessage:n,safeSendMessageToFriendWebsocketJson:x,readyState:d}})(),h=(0,s.useCallback)(async()=>{let e=n.trim();if(e&&!c&&p){if(e.length>eo.MAX_MESSAGE_LENGTH)return void w.default.error(o("Message is too long"));if(!f())return void w.default.error(o("You are sending messages too fast"));u(!0);try{let e=Date.now(),t=Math.floor(0x1000000*Math.random());x(r=>[...r,{t:"chat",ts:e,uid:p,m:n.trim(),pending:!0,clientId:t}]),m({type:"chatMessage",message:n.trim(),clientId:t}),i(""),d.current?.focus()}catch(e){console.error("Failed to send message:",e),w.default.error(o("Failed to send message"))}finally{u(!1)}}},[n,c,p,f,o,x,m]),g=(0,s.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},[h]),y=e?"w-[24px] h-[24px]":"w-[28px] h-[28px]",v=e?"text-[12px]":"text-[14px]",j=e?"bg-secondaryStroke":"bg-primaryStroke",k=`flex flex-1 flex-row items-center py-[3px] pr-[3px] pl-[12px] ${e?"bg-secondaryStroke/50 border-secondaryStroke hover:bg-secondaryStroke/70":"bg-primaryStroke/50 border-primaryStroke hover:bg-primaryStroke/70"} border hover:cursor-text hover:border-textPrimary/10 focus-within:bg-primaryStroke/70 focus-within:border-textPrimary/10 rounded-full transition-all duration-[125ms] ease-in-out gap-[8px]`;return(0,t.jsx)("div",{className:"flex flex-row items-center p-[12px] pt-[0px]",children:(0,t.jsxs)("div",{className:k,children:[(0,t.jsx)("input",{ref:d,type:"text",value:n,onChange:e=>i(e.target.value),onKeyDown:g,onFocus:l,placeholder:"Send a message...",disabled:c,className:"h-full flex-1 bg-transparent text-[14px] text-textPrimary placeholder-textTertiary outline-none disabled:opacity-50",maxLength:eo.MAX_MESSAGE_LENGTH}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)(em,{setInputMessage:i,isWindowModal:e}),(0,t.jsx)("button",{type:"button",onClick:h,disabled:!n.trim()||c,className:`${y} flex flex-shrink-0 items-center justify-center rounded-full transition-colors duration-[125ms] ease-in-out ${!n.trim()||c?`${j} pointer-events-none text-textPrimary/35`:"bg-primaryBlue text-background hover:bg-primaryBlueHover"}`,children:(0,t.jsx)("i",{className:`ri-arrow-up-line ${v} ${c?"animate-pulse":""}`})})]})]})})});var eh=e.i(48493),eb=e.i(750214),eg=e.i(203320),ey=e.i(851388),ev=e.i(923850),ew=e.i(93913),ej=e.i(828641),ek=e.i(879197);let eN=({imageUrl:e,tokenName:r,isOpen:a,onClose:l})=>{let[o,n]=(0,s.useState)(!1);return(0,f.createPortal)((0,t.jsx)(ed.AnimatePresence,{children:a&&(0,t.jsxs)(ex.motion.div,{...ep.ModalAnimationSettings.backdrop,className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[(0,t.jsx)(ex.motion.div,{...ep.ModalAnimationSettings.backdrop,className:"absolute inset-0 bg-[#090909]/80 backdrop-blur-[2px]",onClick:e=>{o&&e.target===e.currentTarget&&l()},onMouseDown:e=>{e.target===e.currentTarget&&n(!0)},onMouseUp:()=>{requestAnimationFrame(()=>n(!1))}}),(0,t.jsxs)(ex.motion.div,{...ep.ModalAnimationSettings.modal,className:"pointer-events-auto relative z-50 flex w-[90%] max-w-[750px] flex-col overflow-hidden rounded-[12px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{type:"button",className:"group/btn absolute right-[8px] top-[8px] z-20 flex h-[32px] w-[32px] cursor-pointer flex-row items-center justify-center rounded-full bg-gray-500/15 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",onClick:e=>{e.stopPropagation(),l()},children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})}),(0,t.jsxs)("div",{className:"relative aspect-[28/19] w-full overflow-hidden rounded-[12px]",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-10 rounded-[12px] border-[1px] border-white/10"}),(0,t.jsx)(m.default,{src:e,alt:`PnL for ${r}`,fill:!0,draggable:!1,className:"select-none object-cover",unoptimized:!0,priority:!0})]})]})]})}),document.body)},eS=(0,s.memo)(function({message:e,isWindowModal:a=!1}){let{uid:l,totalPnl:o,totalInvested:n,totalPosition:i,tokenName:c,tokenTicker:u,tokenImage:d,pnlCurrency:x,chain:p,pairAddress:f,username:h,rewardsLevel:b}=e,g=(0,r.useAtomValue)(S.lobbyUserMapAtom).get(l),[y,v]=(0,s.useState)(null),[w,j]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!1),A=(0,s.useCallback)(()=>{y&&N(!0)},[y]),P=g?.userProfile?.avatarUrl||null,C=g?.userProfile?.bannerUrl||null,T=g?.userProfile?.username||h,I="sol"===p?`/meme/${f}?chain=sol`:`/meme/${f}?chain=bnb`,M=e=>e.length<=10?e:`${e.slice(0,6)}...${e.slice(-4)}`;if((0,s.useEffect)(()=>{(async()=>{if(!w&&!y){j(!0);try{let e=o>=0,t=n>0?o/n*100:0,r="NATIVE"===x?"sol"===p?" SOL":" BNB":"",s=(e,t=!1)=>{let s=t&&e>=0?"+":e<0?"-":"";return"USD"===x?`${s}$${(0,ek.getFormattedNumber)(Math.abs(e),4,!0)}`:`${s}${(0,ek.getFormattedNumber)(Math.abs(e),4,!0)}${r}`},a=await (0,ej.generateTokenPnl)({tokenTicker:u||"Unknown",tokenName:c||"Unknown Token",tokenImage:d||"/images/pnl-templates/default-token.jpg",usdBought:s(n),usdPosition:s(i),pnlString:s(o,!0),pnlPercentageString:`${e?"+":""}${t.toFixed(2)}%`,isPositivePnl:e,referralCode:T,profileImage:P,currency:"USD"===x?"USD":"sol"===p?"SOL":"BNB",template:C?"custom":"katana",customTemplateUrl:C,customTextColor:"#FFFFFF",customPositiveColor:"#00D87A",customNegativeColor:"#FF3B3B",showPnlRectangle:!0,rectangleTextColor:"#FFFFFF",useBoldFont:!1,useTextShadows:!0,rewardsLevel:b||0,nativeToken:p});v(a)}catch(e){console.error("Error generating PnL image:",e),v(null)}finally{j(!1)}}})()},[o,n,i,c,u,d,x,p,T,P,C,b,y,w]),w&&!y)return(0,t.jsx)("div",{className:`aspect-[28/19] w-full animate-pulse rounded-[12px] ${a?"bg-secondaryStroke/50":"bg-primaryStroke/50"}`});if(y)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative w-full overflow-hidden rounded-[12px]",children:[(0,t.jsxs)("div",{className:"relative aspect-[28/19] w-full cursor-pointer",onClick:A,children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-[12px] border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:y,alt:`PnL for ${c}`,fill:!0,className:"object-cover",unoptimized:!0,draggable:!1})]}),(0,t.jsxs)(ew.default,{url:I,className:"group absolute bottom-[6px] right-[6px] z-20 flex h-[28px] items-center gap-[4px] overflow-hidden rounded-[6px] px-[6px] backdrop-blur-[16px] backdrop-saturate-[1.5] transition-all duration-[125ms] ease-in-out hover:bg-white/[0.125]",children:[(0,t.jsx)("div",{className:"absolute inset-0 z-0 bg-backgroundSecondary/60"}),(0,t.jsx)("i",{className:"ri-link relative z-[2] text-[12px] text-primaryBlueHover transition-colors duration-[125ms] ease-in-out group-hover:text-primaryBlueHover"}),(0,t.jsx)("span",{className:"relative z-[2] text-[12px] font-medium text-textSecondary transition-colors duration-[125ms] ease-in-out group-hover:text-primaryBlueHover",children:M(f)})]})]}),(0,t.jsx)(eN,{imageUrl:y,tokenName:c,isOpen:k,onClose:()=>N(!1)})]});let $=o>=0,B=e=>{if("USD"===x)return`$${Math.abs(e).toFixed(2)}`;let t="sol"===p?" SOL":" BNB";return`${Math.abs(e).toFixed(4)}${t}`};return(0,t.jsxs)("div",{className:"flex max-w-[400px] flex-col gap-[8px] rounded-[8px] bg-backgroundTertiary p-[16px]",children:[(0,t.jsxs)("div",{className:"mb-[8px] flex items-center gap-[8px]",children:[d&&(0,t.jsx)(m.default,{src:d,alt:c,width:32,height:32,className:"h-[32px] w-[32px] rounded-full object-cover",unoptimized:!0,draggable:!1}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-[14px] font-semibold text-textPrimary",children:c}),(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:["$",u]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-[4px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-[12px] text-textTertiary",children:"PnL"}),(0,t.jsxs)("span",{className:`text-[14px] font-bold ${$?"text-increase":"text-decrease"}`,children:[$?"+":"",B(o)]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-[12px] text-textTertiary",children:"Invested"}),(0,t.jsx)("span",{className:"text-[14px] text-textPrimary",children:B(n)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-[12px] text-textTertiary",children:"Position"}),(0,t.jsx)("span",{className:"text-[14px] text-textPrimary",children:B(i)})]})]}),(0,t.jsx)("div",{className:"mt-[8px] border-t border-textPrimary/10 pt-[8px]",children:(0,t.jsx)("span",{className:"text-[11px] italic text-textTertiary",children:"Failed to generate PnL image"})}),(0,t.jsx)("div",{className:"mt-[8px] flex justify-end",children:(0,t.jsxs)(ew.default,{url:I,className:"group inline-flex items-center gap-[6px] text-[12px] text-textTertiary transition-colors hover:text-textPrimary",children:[(0,t.jsx)("i",{className:"ri-link text-[12px] group-hover:text-textPrimary"}),(0,t.jsx)("span",{className:"font-mono",children:M(f)})]})})]})});var eA=e.i(222527),eP=e.i(800473),eC=e.i(287052),eT=e.i(741124),eI=e.i(115906),eM=e.i(776827),e$=e.i(417082),eB=e.i(538560),eL=e.i(157613),eF=e.i(651422),eU=e.i(309521);let eE=new Map([["buy","bought"],["sell","sold"],["add","added liquidity to"],["remove","removed liquidity from"]]),eR=(0,s.memo)(function({message:e}){let r,[a,l]=(0,s.useState)(!1),{t:o}=(0,b.useTranslation)(),n=(0,s.useMemo)(()=>{var t,r;return(r=t=e.transaction).length>28&&1===r[0]?{chain:"bnb",timestamp:t[1],walletAddress:t[2],signature:t[3],pairAddress:t[5],tokenAddress:t[6],totalCurrency:t[10],totalUsd:t[11],type:t[14],tokenName:t[19],tokenTicker:t[20],tokenImage:t[21],protocol:t[24],isMigrated:t[25]}:{chain:"sol",timestamp:t[0],walletAddress:t[1],signature:t[2],pairAddress:t[4],tokenAddress:t[5],totalCurrency:t[10],totalUsd:t[11],type:t[13],tokenName:t[18],tokenTicker:t[19],tokenImage:t[20],protocol:t[23],isMigrated:t[24]}},[e.transaction]),{className:i,style:c}=(0,eU.getProtocolBadgeBorderWithChain)(n.protocol,n.isMigrated,n.chain),u=(0,eU.getProtocolIconWithChain)(n.protocol,n.isMigrated,n.chain),d=eT.chainToInfoMap[n.chain],x=(0,s.useMemo)(()=>a?{type:"pair",fetchLiquidity:!0,pairAddress:n.pairAddress,tokenAddress:n.tokenAddress}:null,[n.pairAddress,n.tokenAddress,a]),p="buy"===n.type.toLowerCase(),f="sell"===n.type.toLowerCase(),h=p?"text-increase":f?"text-decrease":"text-textSecondary";return(0,t.jsxs)(eM.Link,{to:`/meme/${n.pairAddress}?chain=${n.chain}`,className:`relative flex flex-col gap-[6px] rounded-[12px] border p-[12px] py-[8px] transition-colors duration-0 ease-in-out ${p?"bg-increase/5 border-increase/10 hover:bg-increase/[0.09]":f?"bg-decrease/5 border-decrease/15 hover:bg-decrease/[0.09]":"bg-primaryStroke/35 border-primaryStroke/50"}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,t.jsx)("span",{className:`text-[14px] font-medium ${h} capitalize`,children:eE.get(n.type.toLowerCase())}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[8px]",children:[(0,t.jsx)(e$.EnlargeTokenImage,{tokenImage:n.tokenImage||"",tokenTicker:n.tokenTicker,tokenName:n.tokenName,position:"bottom",delay:.125,showOnMobile:!1,children:(0,t.jsxs)("div",{className:"duration-135 relative h-[20px] w-[20px] rounded-[4px] bg-secondaryStroke transition-all ease-in-out hover:opacity-80",children:[(0,t.jsx)(eF.default,{src:n.tokenImage??"",alt:n.tokenName,width:20,height:20,tokenTicker:n.tokenTicker??n.tokenName,className:"absolute -inset-[0px] z-10 h-full w-full rounded-[3px] bg-secondaryStroke object-cover",loading:"eager"}),(0,t.jsx)("div",{className:`absolute -inset-[1px] z-0 rounded-[4px] opacity-[0.35] ${i||""}`,style:c}),(0,t.jsx)("div",{className:`absolute bottom-[-4px] right-[-4px] z-10 flex h-[12px] w-[12px] items-center justify-center rounded-full p-[2px] shadow-sm ${i||""}`,style:c,children:(0,t.jsx)("div",{className:"absolute z-30 flex h-[10px] w-[10px] items-center justify-center rounded-full bg-background",children:(0,t.jsx)(eF.default,{src:u,tokenTicker:n.tokenTicker??n.tokenName,alt:n.protocol,width:6,height:6,loading:"eager"})})})]})}),(0,t.jsx)("div",{className:"flex min-w-0 flex-1 flex-col",children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)(eM.Link,{to:`/meme/${n.pairAddress}?chain=${n.chain}`,className:"group/name flex min-w-0 flex-row items-center gap-[4px]",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("span",{className:"duration-135 truncate text-[14px] font-medium text-textPrimary transition-all group-hover/name:text-textPrimary/80 group-hover/name:underline",children:(r=n.tokenTicker??n.tokenName)&&r.length>10?`${r.slice(0,10)}...`:r})}),(0,t.jsx)(j.Tooltip,{content:o("Copy token address"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(0,k.handleCopy)(n.tokenAddress),w.default.success({message:o("Address copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-[14px] text-primaryBlue"})},{duration:1500})},className:"flex-shrink-0 cursor-pointer transition-colors duration-[125ms]",children:(0,t.jsx)("i",{className:"ri-file-copy-fill text-[14px] text-textTertiary transition-colors duration-[125ms] hover:text-primaryBlueHover"})})})]})})]}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-[6px]",children:(0,t.jsxs)("div",{className:"flex items-center gap-[4px]",children:[(0,t.jsx)(m.default,{src:d.icon,alt:d.ticker,width:14,height:14,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:`whitespace-nowrap text-[12px] font-medium ${h}`,dangerouslySetInnerHTML:{__html:(0,ek.getFormattedNumber)(n.totalCurrency,4)}}),e.transactionCount>1&&(0,t.jsxs)("span",{className:"text-[12px] font-medium text-textSecondary",children:["/ ",e.transactionCount," tx"]})]})})]}),a&&x&&(0,t.jsx)("div",{className:"absolute right-[8px] top-1/2 -translate-y-1/2",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:"sol"===n.chain?(0,t.jsx)(eL.QuickBuyButtonSol,{pairInfo:x,size:"24px",icon:!0,padding:"4px",hideUnit:!0,showLabel:!1,snipe:!1,pulse:!1,rounded:"999px",keyType:"default",width:"",height:"",seeThrough:!1,transparentStyle:!1,isSecond:!1,isPulse:!1,color:"primaryBlue",shouldRedirect:!1}):(0,t.jsx)(eB.QuickBuyButtonBnb,{pairInfo:x,size:"24px",icon:!0,padding:"4px",hideUnit:!0,showLabel:!1,pulse:!1,rounded:"999px",keyType:"default",width:"",height:"",seeThrough:!1,transparentStyle:!1,isSecond:!1,isPulse:!1,color:"primaryBlue",shouldRedirect:!1})})]})});var e_=e.i(43351);let eD=(0,s.memo)(function({message:e,isWindowModal:r=!1}){return e.frozenData?(0,t.jsx)(ez,{message:e,isWindowModal:r}):(0,t.jsx)(eH,{message:e,isWindowModal:r})}),ez=(0,s.memo)(function({message:e,isWindowModal:a=!1}){let{t:l}=(0,b.useTranslation)(),o=(0,eI.useRouter)(),n="bnb"===e.chain,i=(0,r.useAtomValue)(n?e_.usdPerBnbAtom:e_.usdPerSolAtom),c=(0,s.useMemo)(()=>e.frozenData?{price:e.frozenData.ath,ATH:e.frozenData.ath}:{price:0,ATH:0},[e.frozenData]),u=(0,s.useCallback)(()=>{o.push(`/meme/${e.pairAddress}?chain=${e.chain}`)},[o,e.pairAddress,e.chain]),d=e.mc,x=e.tokenSupply,p=(0,s.useMemo)(()=>0===c.ATH?d:c.ATH*i*x,[c.ATH,i,x,d]),f=(0,s.useMemo)(()=>(p-d)/d*100,[p,d]),h=async()=>{try{await navigator.clipboard.writeText(e.tokenAddress),w.default.success({message:l("Address copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-[16px] text-primaryBlue"})})}catch(e){console.error("Failed to copy:",e),w.default.error("Failed to copy address")}},{className:g,style:y}=(0,eU.getProtocolBadgeBorderWithChain)(e.proto,e.isMigrated,e.chain),v=eT.chainToInfoMap[e.chain],k=(0,eU.getProtocolIconWithChain)(e.proto,e.isMigrated,e.chain);return(0,t.jsxs)("div",{className:`${a?"bg-secondaryStroke/35 hover:bg-secondaryStroke/65 border-secondaryStroke":"bg-primaryStroke/35 hover:bg-primaryStroke/65 border-primaryStroke"} flex w-full cursor-pointer flex-col gap-[12px] rounded-[12px] border p-[12px] pb-[14px] transition-colors duration-0 ease-in-out`,onClick:u,children:[(0,t.jsxs)("div",{className:"flex h-[32px] max-h-[32px] min-h-[32px] w-full flex-row items-center gap-[10px]",children:[(0,t.jsx)(e$.EnlargeTokenImage,{tokenImage:e.tokenImage,tokenTicker:e.tokenTicker,tokenName:e.tokenName,position:"bottom",delay:.125,showOnMobile:!1,children:(0,t.jsx)(eM.Link,{to:`/meme/${e.pairAddress}?chain=${e.chain}`,className:"group/token relative h-[36px] w-[36px] flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"duration-135 relative h-[36px] w-[36px] rounded-[4px] bg-secondaryStroke transition-opacity group-hover/token:opacity-80",children:[(0,t.jsx)(eF.default,{src:e.tokenImage,alt:e.tokenName,width:36,height:36,tokenTicker:e.tokenTicker,className:"absolute -inset-[0px] z-10 h-full w-full rounded-[3px] bg-secondaryStroke object-cover",loading:"eager"}),(0,t.jsx)("div",{className:`absolute -inset-[1px] z-0 rounded-[4px] opacity-[0.35] ${g||""}`,style:y}),(0,t.jsx)("div",{className:`absolute bottom-[-4px] right-[-4px] z-20 flex h-[14px] w-[14px] items-center justify-center rounded-full p-[2px] shadow-sm ${g||""}`,style:y,children:(0,t.jsx)("div",{className:"absolute z-30 flex h-[12px] w-[12px] items-center justify-center rounded-full bg-background",children:(0,t.jsx)(eF.default,{src:k,tokenTicker:e.tokenTicker,alt:e.proto,width:8,height:8,loading:"eager"})})})]})})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-[2px]",children:[(0,t.jsxs)("div",{className:"flex h-[24px] flex-row items-center gap-[6px]",children:[(0,t.jsxs)("div",{className:"flex flex-1 flex-row items-center gap-[4px]",children:[(0,t.jsx)(eM.Link,{to:`/meme/${e.pairAddress}?chain=${e.chain}`,className:"group/name flex min-w-0 flex-row items-center gap-[4px]",children:(0,t.jsx)("span",{className:"duration-135 text-[14px] font-medium text-textPrimary transition-all group-hover/name:text-textPrimary/80 group-hover/name:underline",children:e.tokenTicker.length>10?`${e.tokenTicker.slice(0,10)}...`:e.tokenTicker})}),(0,t.jsx)(j.Tooltip,{content:l("Copy token address"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),h()},className:"flex-shrink-0 cursor-pointer transition-colors duration-[125ms]",children:(0,t.jsx)("i",{className:"ri-file-copy-fill text-[14px] text-textTertiary transition-colors duration-[125ms] hover:text-primaryBlueHover"})})})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-end gap-[12px]",children:(0,t.jsxs)("span",{className:"flex-shrink-0 text-[14px] font-medium",children:[(0,t.jsx)("span",{className:"mb-[-1.6px] text-[12px] text-textSecondary",children:"ATH "}),(0,t.jsx)("span",{className:`${p<=3e4?"text-primaryLightBlue":p<=15e4?"text-primaryYellow":"text-increase"}`,dangerouslySetInnerHTML:{__html:`$${(0,ek.getFormattedNumber)(p,4)}`}})]})})]}),(0,t.jsxs)("div",{className:"flex h-[20px] flex-row items-center gap-[12px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)(m.default,{src:v.icon,alt:v.ticker,width:14,height:14,className:"rounded-full"}),(0,t.jsx)("span",{className:"text-[11px] text-textSecondary",children:"At MC"}),(0,t.jsx)("span",{className:"text-[11px] font-medium text-primaryBlueHover",dangerouslySetInnerHTML:{__html:`$${(0,ek.getFormattedNumber)(d,4)}`}})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-row items-center justify-end gap-[4px]",children:[(0,t.jsx)("i",{className:"ri-checkbox-circle-line text-[12px] text-primaryBlueHover"}),(0,t.jsx)("span",{className:"text-[11px] font-medium text-primaryBlueHover",children:"Complete"})]})]})]})]}),(0,t.jsx)("div",{className:"mt-[4px] flex flex-row items-center gap-[12px]",children:(0,t.jsxs)("div",{className:"flex h-[8px] min-w-0 flex-1 items-center gap-[4px]",children:[(0,t.jsx)("div",{className:"relative h-[4px] flex-1 overflow-hidden rounded-l-full rounded-r-none bg-textTertiary/10",children:(0,t.jsx)("div",{className:"absolute right-0 top-0 h-full bg-decrease",style:{width:f<0?`${Math.min(Math.abs(f),100)}%`:"0%"}})}),(0,t.jsx)("div",{className:"flex min-w-[48px] flex-row items-center justify-center gap-[4px]",children:(0,t.jsxs)("span",{className:`text-[12px] font-medium ${f>=0?"text-increase":"text-decrease"}`,children:[f>=0?"+":"",f.toFixed(1),"%"]})}),(0,t.jsx)("div",{className:"relative h-[4px] flex-1 overflow-hidden rounded-l-none rounded-r-full bg-textTertiary/10",children:(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full bg-increase",style:{width:f>=0?`${Math.min(f,100)}%`:"0%"}})})]})})]})}),eH=(0,s.memo)(function({message:e}){let{t:a}=(0,b.useTranslation)(),l=(0,eI.useRouter)(),o=(0,r.useAtomValue)(e_.usdPerSolAtom),n=(0,r.useAtomValue)(e_.usdPerBnbAtom),{isMigrated:i,pairAddress:c}=(0,r.useAtomValue)((0,s.useMemo)(()=>(0,eP.isTokenMigratedAtom)(e.tokenAddress,e.isMigrated,e.pairAddress),[e.tokenAddress,e.isMigrated,e.pairAddress])),u=(0,r.useAtomValue)((0,s.useMemo)(()=>(0,eP.alertPriceByPairAtom)(c,e.feedItemId??e.ts.toString()),[c,e.feedItemId,e.ts])),d=(0,s.useMemo)(()=>e.live?{price:e.live.liveAth,ATH:e.live.liveAth}:u,[e.live,u]),x=(0,s.useCallback)(()=>{l.push(`/meme/${c}?chain=${e.chain}`)},[l,c,e.chain]),p=e.mc,f=e.tokenSupply,h=(0,s.useMemo)(()=>({type:"pair",fetchLiquidity:!0,pairAddress:c,tokenAddress:e.tokenAddress}),[c,e.tokenAddress]),g=(0,s.useMemo)(()=>{if(0===d.price)return p;let t="bnb"===e.chain?n:o;return d.price*t*f},[d.price,e.chain,n,o,f,p]),y=(0,s.useMemo)(()=>{if(0===d.ATH)return p;let t="bnb"===e.chain?n:o;return d.ATH*t*f},[d.ATH,e.chain,n,o,f,p]),v=(0,s.useMemo)(()=>(g-p)/p*100,[g,p]),k=async()=>{try{await navigator.clipboard.writeText(e.tokenAddress),w.default.success({message:a("Address copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-[16px] text-primaryBlue"})})}catch(e){console.error("Failed to copy:",e),w.default.error("Failed to copy address")}},{className:N,style:S}=(0,eU.getProtocolBadgeBorderWithChain)(e.proto,i,e.chain),A=eT.chainToInfoMap[e.chain],P=(0,eU.getProtocolIconWithChain)(e.proto,i,e.chain);return(0,t.jsxs)("div",{className:"bg-primaryBlue/5 hover:bg-primaryBlue/[0.08] border-primaryBlue/20 flex w-full cursor-pointer flex-col gap-[12px] rounded-[12px] border p-[12px] pb-[14px] transition-colors duration-0 ease-in-out",onClick:x,children:[(0,t.jsxs)("div",{className:"flex h-[32px] max-h-[32px] min-h-[32px] w-full flex-row items-center gap-[10px]",children:[(0,t.jsx)(e$.EnlargeTokenImage,{tokenImage:e.tokenImage,tokenTicker:e.tokenTicker,tokenName:e.tokenName,position:"bottom",delay:.125,showOnMobile:!1,children:(0,t.jsx)(eM.Link,{to:`/meme/${c}?chain=${e.chain}`,className:"group/token relative h-[36px] w-[36px] flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"duration-135 relative h-[36px] w-[36px] rounded-[4px] bg-secondaryStroke transition-opacity group-hover/token:opacity-80",children:[(0,t.jsx)(eF.default,{src:e.tokenImage,alt:e.tokenName,width:36,height:36,tokenTicker:e.tokenTicker,className:"absolute -inset-[0px] z-10 h-full w-full rounded-[3px] bg-secondaryStroke object-cover",loading:"eager"}),(0,t.jsx)("div",{className:`absolute -inset-[1px] z-0 rounded-[4px] opacity-[0.35] ${N||""}`,style:S}),(0,t.jsx)("div",{className:`absolute bottom-[-4px] right-[-4px] z-20 flex h-[14px] w-[14px] items-center justify-center rounded-full p-[2px] shadow-sm ${N||""}`,style:S,children:(0,t.jsx)("div",{className:"absolute z-30 flex h-[12px] w-[12px] items-center justify-center rounded-full bg-background",children:(0,t.jsx)(eF.default,{src:P,tokenTicker:e.tokenTicker,alt:e.proto,width:8,height:8,loading:"eager"})})})]})})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-[2px]",children:[(0,t.jsxs)("div",{className:"flex h-[24px] flex-row items-center gap-[6px]",children:[(0,t.jsxs)("div",{className:"flex flex-1 flex-row items-center gap-[4px]",children:[(0,t.jsx)(eM.Link,{to:`/meme/${c}?chain=${e.chain}`,className:"group/name flex min-w-0 flex-row items-center gap-[4px]",children:(0,t.jsx)("span",{className:"duration-135 text-[14px] font-medium text-textPrimary transition-all group-hover/name:text-textPrimary/80 group-hover/name:underline",children:e.tokenTicker.length>10?`${e.tokenTicker.slice(0,10)}...`:e.tokenTicker})}),(0,t.jsx)(j.Tooltip,{content:a("Copy token address"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),k()},className:"flex-shrink-0 cursor-pointer transition-colors duration-[125ms]",children:(0,t.jsx)("i",{className:"ri-file-copy-fill text-[14px] text-textTertiary transition-colors duration-[125ms] hover:text-primaryBlueHover"})})})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center justify-end gap-[12px]",children:(0,t.jsxs)("span",{className:"flex-shrink-0 text-[14px] font-medium",children:[(0,t.jsx)("span",{className:"mb-[-1.6px] text-[12px] text-textSecondary",children:"MC "}),(0,t.jsx)("span",{className:`${g<=3e4?"text-primaryLightBlue":g<=15e4?"text-primaryYellow":"text-increase"}`,dangerouslySetInnerHTML:{__html:`$${(0,ek.getFormattedNumber)(g,4)}`}})]})})]}),(0,t.jsxs)("div",{className:"flex h-[20px] flex-row items-center gap-[12px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)(m.default,{src:A.icon,alt:A.ticker,width:14,height:14,className:"rounded-full"}),(0,t.jsx)("span",{className:"text-[11px] text-textSecondary",children:"At MC"}),(0,t.jsx)("span",{className:"text-[11px] font-medium text-primaryBlueHover",dangerouslySetInnerHTML:{__html:`$${(0,ek.getFormattedNumber)(p,4)}`}})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-row items-center justify-end gap-[4px]",children:[(0,t.jsx)("span",{className:"text-[11px] text-textSecondary",children:"ATH"}),(0,t.jsx)("span",{className:`text-[11px] font-medium ${y<=3e4?"text-primaryLightBlue":y<=15e4?"text-primaryYellow":"text-increase"}`,dangerouslySetInnerHTML:{__html:`$${(0,ek.getFormattedNumber)(y,4)}`}})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-[4px] flex flex-row items-center gap-[12px]",children:[(0,t.jsxs)("div",{className:"flex h-[8px] min-w-0 flex-1 items-center gap-[4px]",children:[(0,t.jsx)("div",{className:"relative h-[4px] flex-1 overflow-hidden rounded-l-full rounded-r-none bg-primaryBlue/10",children:(0,t.jsx)("div",{className:"absolute right-0 top-0 h-full bg-decrease",style:{width:v<0?`${Math.min(Math.abs(v),100)}%`:"0%"}})}),(0,t.jsx)("div",{className:"flex min-w-[48px] flex-row items-center justify-center gap-[4px]",children:(0,t.jsxs)("span",{className:`text-[12px] font-medium ${v>=0?"text-increase":"text-decrease"}`,children:[v>=0?"+":"",v.toFixed(1),"%"]})}),(0,t.jsx)("div",{className:"relative h-[4px] flex-1 overflow-hidden rounded-l-none rounded-r-full bg-primaryBlue/10",children:(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full bg-increase",style:{width:v>=0?`${Math.min(v,100)}%`:"0%"}})})]}),(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),children:"sol"===e.chain?(0,t.jsx)(eL.QuickBuyButtonSol,{pairInfo:h,size:"24px",padding:"4px",icon:!0,hideUnit:!0,showLabel:!1}):(0,t.jsx)(eB.QuickBuyButtonBnb,{pairInfo:h,size:"24px",padding:"4px",icon:!0,hideUnit:!0,showLabel:!1,fetchLatestSwapInfo:!0})})]})]})});var eW=e.i(563150);let eV=/\.(png|jpg|jpeg|gif|webp|svg|bmp|ico)(\?.*)?$/i,eO=["i.imgur.com","pbs.twimg.com","media.discordapp.net"],eq=/^https?:\/\/[^\s<>"{}|\\^`[\]]+$/i,eG=(0,s.memo)(function({url:e}){let{t:r}=(0,b.useTranslation)(),[a,l]=(0,s.useState)(!1),[o,n]=(0,s.useState)(!1);return(0,t.jsx)("span",{className:"break-all",children:e})}),eK=({message:e})=>{let a=(e=>{let t=e.trim();if(eq.test(t)&&(e=>{if(eV.test(e))return!0;try{let t=new URL(e).hostname;return eO.some(e=>t.includes(e))}catch{return!1}})(t))return[{type:"image",url:t}];let r=[],s=e.matchAll(/https?:\/\/[^\s<>"{}|\\^`[\]]+/gi),a=0;for(let t of s){let s=t.index??0;s>a&&r.push({type:"text",content:e.slice(a,s)}),r.push({type:"link",url:t[0]}),a=s+t[0].length}return a<e.length&&r.push({type:"text",content:e.slice(a)}),0===r.length&&r.push({type:"text",content:e}),r})(e),[l,o]=(0,s.useState)(null),n=(0,r.useAtomValue)(eW.userLobbySettingsAtom).showLinksAsClickable,i=(0,s.useCallback)((e,t)=>{e.preventDefault(),o(t)},[]),c=(0,s.useCallback)(()=>{l&&(window.open(l,"_blank","noopener,noreferrer"),o(null))},[l]),u=(0,s.useCallback)(()=>{o(null)},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:a.map((e,r)=>"image"===e.type?(0,t.jsx)(eG,{url:e.url},`img-${e.url}`):"link"===e.type?n?(0,t.jsx)("button",{type:"button",onClick:t=>i(t,e.url),className:"font-inherit cursor-pointer break-all border-none bg-transparent p-0 text-left text-primaryBlueHover hover:underline",children:e.url},`link-${e.url}-${r}`):(0,t.jsx)("span",{className:"break-all text-textSecondary",children:e.url},`link-${e.url}-${r}`):(0,t.jsx)("span",{className:"text-textSecondary",children:e.content},`text-${e.content}-${r}`))}),(0,t.jsx)(eY,{isOpen:!!l,url:l??"",onConfirm:c,onClose:u})]})},eY=(0,s.memo)(function({isOpen:e,url:a,onConfirm:l,onClose:o}){let{t:n}=(0,b.useTranslation)(),[i,c]=(0,s.useState)(!1),[u,d]=(0,r.useAtom)(eW.userLobbySettingsAtom),x=u.showWarningsOnLinks,p=(0,s.useCallback)(()=>{d(e=>({...e,showWarningsOnLinks:!e.showWarningsOnLinks}))},[d]),m=(0,s.useCallback)(e=>{i&&e.target===e.currentTarget&&o()},[i,o]),h=(0,s.useMemo)(()=>a.startsWith("https://axiom.trade"),[a]);return!e||"u"<typeof document?null:!x||h?(l(),null):(0,f.createPortal)((0,t.jsx)(ex.motion.div,{...ep.ModalAnimationUtility.backdrop,className:"fixed inset-0 z-[200] flex items-center justify-center bg-[#090909]/40",onClick:m,onMouseDown:e=>{e.target===e.currentTarget&&c(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{c(!1)})},children:(0,t.jsx)(ex.motion.div,{className:"relative max-h-[880px] w-[452px]",onClick:e=>e.stopPropagation(),...ep.ModalAnimationUtility.modal,children:(0,t.jsxs)("div",{className:"flex h-full w-full flex-col rounded-[4px] border-[1px] border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex h-[44px] w-full flex-row items-center justify-between border-b-[1px] border-b-secondaryStroke pl-[16px] pr-[12px]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-[8px]",children:[(0,t.jsx)("i",{className:"ri-alert-line text-[16px] text-yellow-500"}),(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:n("External Link Warning")})]}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:o,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary"})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[12px]",children:[(0,t.jsx)("span",{className:"text-[14px] font-normal leading-[1.4rem] text-textSecondary",children:n("You're about to visit an external website. Be cautiousmalicious sites may attempt to:")}),(0,t.jsxs)("ul",{className:"list-inside list-disc space-y-[4px] text-[13px] leading-[1.4rem] text-textSecondary",children:[(0,t.jsx)("li",{children:n("Trick you into signing malicious transactions")}),(0,t.jsx)("li",{children:n("Ask you to enter your seed phrase or private key")}),(0,t.jsx)("li",{children:n("Request wallet permissions to drain your funds")})]}),(0,t.jsx)("span",{className:"text-[13px] font-medium leading-[1.4rem] text-textSecondary",children:n("Never enter your seed phrase on any website.")})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-[4px] rounded-[4px] border border-secondaryStroke/50 bg-backgroundSecondary p-[12px]",children:[(0,t.jsx)("span",{className:"text-[11px] uppercase tracking-wider text-textSecondary",children:n("Destination")}),(0,t.jsx)("span",{className:"break-all font-mono text-[13px] text-textPrimary",children:a})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-end gap-[8px] border-t border-secondaryStroke/50 p-[16px]",children:[(0,t.jsx)("button",{type:"button",onClick:o,className:"flex h-[32px] cursor-pointer items-center justify-center rounded-full border border-secondaryStroke px-[12px] transition-all duration-[125ms] hover:bg-secondaryStroke/20",children:(0,t.jsx)("span",{className:"text-[13px] font-medium text-textSecondary",children:n("Cancel")})}),(0,t.jsx)("button",{type:"button",onClick:()=>{p(),l()},className:"flex h-[32px] cursor-pointer items-center justify-center rounded-full border border-secondaryStroke px-[12px] transition-all duration-[125ms] hover:bg-secondaryStroke/20",children:(0,t.jsx)("span",{className:"text-[13px] font-medium text-textSecondary",children:n("Don't Warn Again")})}),(0,t.jsx)("button",{type:"button",onClick:l,className:"flex h-[32px] cursor-pointer items-center justify-center rounded-full bg-increase px-[12px] transition-all duration-[125ms] hover:bg-increaseHover",children:(0,t.jsx)("span",{className:"text-[13px] font-bold text-background",children:n("Continue")})})]})]})})}),document.body)}),eX=(0,s.memo)(function({icon:e,label:r}){return(0,t.jsx)(j.Tooltip,{content:r,position:"top",children:(0,t.jsx)("div",{className:"flex h-[18px] w-[18px] flex-shrink-0 items-center justify-center rounded-[4px] bg-primaryBlue/10",children:(0,t.jsx)("i",{className:`${e} text-[12px] text-primaryBlue`})})})}),eJ=(0,s.memo)(function({message:e,isWindowModal:a=!1,isConsecutive:l=!1}){let o=(0,r.useAtomValue)(S.lobbyUserMapAtom),n=(0,r.useAtomValue)(eP.lobbyAlertsAtom),i=(0,r.useAtomValue)(el.messageAuthorsAtom),c=(0,r.useAtomValue)(N.userProfileIdAtom),u=(0,r.useAtomValue)(N.userProfileAtom),d=(0,eC.useRedirectToProfile)(),x=(0,s.useMemo)(()=>{if("call"!==e.t)return[];let t=n.find(t=>t.pairAddress===e.pairAddress&&(t.feedItemId===e.feedItemId||t.timestamp===e.ts));if(!t?.holderIds||0===t.holderIds.length)return[];let r=[];for(let e of t.holderIds){let t=i.get(e),s=o.get(e),a={username:t?.username||s?.userProfile.username||"Unknown",avatarUrl:t?.avatarUrl||s?.userProfile.avatarUrl||null,userId:e};r.push(a)}return r},[e,n,o,i]),{userId:p,messageText:f,timestamp:h,isPending:b,messageType:g}=(0,s.useMemo)(()=>"chat"===e.t?{userId:e.uid,messageText:e.m,timestamp:e.ts,isPending:e.pending||!1,messageType:"chat"}:"sharePnl"===e.t?{userId:e.uid,messageText:e.m,timestamp:e.ts,isPending:!1,messageType:"sharePnl"}:"call"===e.t?{userId:e.uid,messageText:"",timestamp:e.ts,isPending:!1,messageType:"call"}:"tx"===e.t?{userId:e.uid,messageText:"",timestamp:e.ts,isPending:!1,messageType:"activity"}:{userId:"",messageText:"",timestamp:0,isPending:!1,messageType:"unknown"},[e]),y=(0,s.useMemo)(()=>p===c,[p,c]),v=(0,s.useMemo)(()=>{if(y)return{username:u?.username||"You",avatarUrl:u?.avatarUrl||null};let e=o.get(p);if(e)return{username:e.userProfile.username,avatarUrl:e.userProfile.avatarUrl};let t=i.get(p);return t?{username:t.username,avatarUrl:t.avatarUrl}:{username:"Unknown",avatarUrl:null}},[y,u,o,p,i]),w=v.username,k=v.avatarUrl,A=(0,s.useCallback)(e=>{d(p)(e)},[d,p]),P=b?"opacity-65":"",C=(0,s.useMemo)(()=>a?"hover:bg-secondaryStroke/20":"hover:bg-primaryStroke/40",[a]),T="px-[16px] pt-[3px] pb-[2px]",I=a?"gap-[8px]":"gap-[12px]",M=l?a?"-mt-[8px]":"-mt-[12px]":"",$=(0,s.useMemo)(()=>{let e;return"chat"===g&&!!(e=f.replace(/\s/g,""))&&/^(?:[\u{1F300}-\u{1F9FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F000}-\u{1F02F}]|[\u{1F0A0}-\u{1F0FF}]|[\u{1F100}-\u{1F1FF}]|[\u{1F200}-\u{1F2FF}]|[\u{1FA00}-\u{1FA6F}]|[\u{1FA70}-\u{1FAFF}]|[\u{231A}-\u{231B}]|[\u{23E9}-\u{23F3}]|[\u{23F8}-\u{23FA}]|[\u{25AA}-\u{25AB}]|[\u{25B6}]|[\u{25C0}]|[\u{25FB}-\u{25FE}]|[\u{2614}-\u{2615}]|[\u{2648}-\u{2653}]|[\u{267F}]|[\u{2693}]|[\u{26A1}]|[\u{26AA}-\u{26AB}]|[\u{26BD}-\u{26BE}]|[\u{26C4}-\u{26C5}]|[\u{26CE}]|[\u{26D4}]|[\u{26EA}]|[\u{26F2}-\u{26F3}]|[\u{26F5}]|[\u{26FA}]|[\u{26FD}]|[\u{2702}]|[\u{2705}]|[\u{2708}-\u{270D}]|[\u{270F}]|[\u{2712}]|[\u{2714}]|[\u{2716}]|[\u{271D}]|[\u{2721}]|[\u{2728}]|[\u{2733}-\u{2734}]|[\u{2744}]|[\u{2747}]|[\u{274C}]|[\u{274E}]|[\u{2753}-\u{2755}]|[\u{2757}]|[\u{2763}-\u{2764}]|[\u{2795}-\u{2797}]|[\u{27A1}]|[\u{27B0}]|[\u{27BF}]|[\u{2934}-\u{2935}]|[\u{2B05}-\u{2B07}]|[\u{2B1B}-\u{2B1C}]|[\u{2B50}]|[\u{2B55}]|[\u{3030}]|[\u{303D}]|[\u{3297}]|[\u{3299}]|[\u{FE0F}]|[\u{200D}])+$/u.test(e)},[g,f])?a?"text-[21px]":"text-[22px]":a?"text-[13px]":"text-[14px]";return l&&"chat"===g?(0,t.jsxs)("div",{className:`flex flex-row ${I} ${T} ${C} ${M}`,children:[(0,t.jsx)("div",{style:{width:32},className:"flex-shrink-0"}),(0,t.jsx)("div",{className:"flex min-w-0 flex-1 flex-col gap-[0px]",children:(0,t.jsx)("div",{className:`${$} ${P} whitespace-pre-wrap break-words text-textSecondary`,children:(0,t.jsx)(eK,{message:f})})})]}):"activity"===g&&"tx"===e.t?(0,t.jsxs)("div",{className:`flex flex-col gap-[4px] ${T} ${C} ${M}`,children:[(0,t.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-start gap-[4px]",children:[(0,t.jsx)("div",{className:"relative h-[20px] w-[20px] flex-shrink-0 cursor-pointer self-center transition-all duration-[125ms] hover:brightness-110",onClick:A,children:(0,t.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:k||(0,ee.generateDefaultProfilePicture)(w),alt:w,width:20,height:20,className:"h-full w-full object-cover",draggable:!1})]})}),(0,t.jsx)("span",{className:`${a?"text-[13px]":"text-[14px]"} cursor-pointer font-medium text-textPrimary hover:underline`,onClick:A,children:w}),(0,t.jsx)("div",{className:"flex flex-row gap-[4px]",children:(0,t.jsx)(eX,{icon:"ri-pulse-line",label:"Activity"})}),(0,t.jsx)("span",{className:`${a?"text-[11px]":"text-[12px]"} font-medium text-textTertiary`,children:(0,t.jsx)(eA.RelativeAge,{date:new Date(h)})})]}),(0,t.jsx)(eR,{message:e})]}):"call"===g&&"call"===e.t?(0,t.jsxs)("div",{className:`flex flex-col gap-[4px] ${T} ${C} ${M}`,children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-[4px]",children:(0,t.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-[4px]",children:[(0,t.jsx)("div",{className:"relative h-[20px] w-[20px] flex-shrink-0 cursor-pointer self-center transition-all duration-[125ms] hover:brightness-110",onClick:A,children:(0,t.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:k||(0,ee.generateDefaultProfilePicture)(w),alt:w,width:20,height:20,className:"h-full w-full object-cover",draggable:!1})]})}),(0,t.jsx)("span",{className:`${a?"text-[13px]":"text-[14px]"} cursor-pointer font-medium text-textPrimary hover:underline`,onClick:A,children:w}),(0,t.jsx)("div",{className:"flex flex-row gap-[4px]",children:(0,t.jsx)(eX,{icon:"ri-megaphone-line",label:"Alert"})}),(0,t.jsx)("span",{className:`${a?"text-[11px]":"text-[12px]"} font-medium text-textTertiary`,children:(0,t.jsx)(eA.RelativeAge,{date:new Date(h)})})]})}),(0,t.jsx)(eD,{message:e,isWindowModal:a}),x.length>0&&(0,t.jsxs)("div",{className:"flex h-[28px] max-h-[28px] min-h-[28px] w-full flex-row items-center justify-start gap-[4px]",children:[(0,t.jsx)(j.Tooltip,{content:`Bought by ${x.slice(0,8).map(e=>e.username).join(", ")}${x.length>8?` +${x.length-8} more`:""}`,position:"top",children:(0,t.jsx)("div",{className:"items-center rounded-full bg-primaryStroke/65 p-[4px]",children:(0,t.jsx)("div",{className:"flex flex-row",children:x.slice(0,8).map((e,r)=>(0,t.jsx)("div",{className:`relative rounded-full ${r>0?"-ml-[6px]":""}`,style:{zIndex:10-r,...r<x.slice(0,8).length-1&&{maskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)",WebkitMaskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)"}},children:(0,t.jsxs)("div",{className:"relative h-[20px] w-[20px] overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[1] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:e.avatarUrl||(0,ee.generateDefaultProfilePicture)(e.username),alt:e.username||"",width:20,height:20,className:"h-[20px] w-[20px] rounded-full object-cover",draggable:!1})]})},e.userId))})})}),(0,t.jsx)("span",{className:"text-[11px] font-normal text-textTertiary",children:"Bought"})]})]}):(0,t.jsxs)("div",{className:`flex flex-row ${I} ${T} ${C} ${M}`,children:[(0,t.jsx)("div",{className:"relative flex-shrink-0 cursor-pointer transition-all duration-[125ms] ease-in-out hover:brightness-110",style:{width:32,height:32},onClick:A,children:(0,t.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:k||(0,ee.generateDefaultProfilePicture)(w),alt:w,width:32,height:32,className:"h-full w-full object-cover",draggable:!1})]})}),(0,t.jsxs)("div",{className:`flex min-w-0 flex-1 flex-col gap-[0px] ${a?"-mt-[2px]":"-mt-[4px]"}`,children:[(0,t.jsxs)("div",{className:"flex flex-row flex-wrap items-baseline gap-[4px]",children:[(0,t.jsx)("span",{className:`${a?"text-[13px]":"text-[14px]"} cursor-pointer font-medium text-textPrimary hover:underline`,onClick:A,children:w}),(0,t.jsx)("span",{className:`${a?"text-[11px]":"text-[12px]"} font-medium text-textTertiary`,children:(0,t.jsx)(eA.RelativeAge,{date:new Date(h)})})]}),"sharePnl"===g&&"sharePnl"===e.t?(0,t.jsx)(eS,{message:e,isWindowModal:a}):"call"===g&&"call"===e.t?(0,t.jsx)(eD,{message:e,isWindowModal:a}):(0,t.jsx)("div",{className:`${$} ${P} whitespace-pre-wrap break-words text-textSecondary`,children:(0,t.jsx)(eK,{message:f})})]})]})}),eQ=(0,s.memo)(function({isWindowModal:e=!1}){let{loadPrevious:l,isFetchingPrevious:o,hasMore:n}=(()=>{let[e,t]=(0,r.useAtom)(el.lastChatCursorAtom),l=(0,r.useSetAtom)(el.messageAuthorsAtom),o=(0,r.useSetAtom)(el.lobbyChatMessagesAtom),{socialApiGet:n}=(0,P.useRateLimitedSocialApi)(P.socialApiRateLimitAtom),[i,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(!1),x=(0,s.useRef)(!1),p=(0,eb.useAtomCallback)((0,s.useCallback)(e=>e(a.userIdAtom),[]));return(0,s.useEffect)(()=>{d(null!==e)},[e]),{loadPrevious:(0,s.useCallback)(async()=>{if(!u||i||!e||x.current)return null;x.current=!0,c(!0);try{let r=await n("/lobby/feed",{cursor:e,limit:100},p()??void 0);t(r.nextCursor??null),d(null!==r.nextCursor);let s=r.items?.length?(0,ey.convertFeedToMessages)(r.items):[],a=r.messageAuthors??[];return a.length&&l(e=>{let t=new Map(e);for(let e of a)t.set(e.userId,e);return t}),o(e=>[...(0,eg.coalesceTransactionsAll)(s),...e]),s}catch(e){return console.error("Failed to fetch paginated chat:",e),null}finally{x.current=!1,c(!1)}},[p,u,i,e,t,l,o,n]),isFetchingPrevious:i,hasMore:u}})(),i=(0,r.useAtomValue)(el.lobbyChatMessagesAtom),c=(0,s.useRef)(null),u=(0,s.useRef)(""),d=(0,s.useRef)(null),x=(0,r.useAtomValue)(el.lobbySearchQueryAtom),p=(0,r.useAtomValue)(el.showLobbyActivityAtom),m=(0,r.useAtomValue)(el.showLobbyAlertsAtom),f=(0,r.useAtomValue)(el.showLobbyMessageAtom),h=(0,r.useAtomValue)(el.messageAuthorsAtom),b=(0,s.useMemo)(()=>{if(x)return x&&x.trim()?i.filter(e=>((e,t,r)=>{if(!e)return!0;let s=e.toLowerCase().trim();if(!s)return!0;let a=r.get(t.uid);if(a?.username.toLowerCase().includes(s))return!0;switch(t.t){case"chat":return t.m.toLowerCase().includes(s);case"call":return t.tokenTicker.toLowerCase().includes(s)||t.tokenName.toLowerCase().includes(s)||t.tokenAddress.toLowerCase().includes(s)||t.pairAddress.toLowerCase().includes(s);case"sharePnl":return t.tokenTicker.toLowerCase().includes(s)||t.tokenName.toLowerCase().includes(s)||t.tokenAddress.toLowerCase().includes(s)||t.pairAddress.toLowerCase().includes(s)||t.m.toLowerCase().includes(s);case"tx":{var l,o;let e=(o=l=t.transaction).length>28&&1===o[0]?{tokenTicker:l[20]??"",tokenName:l[19]??"",tokenAddress:l[6]??"",pairAddress:l[5]??""}:{tokenTicker:l[19]??"",tokenName:l[18]??"",tokenAddress:l[5]??"",pairAddress:l[4]??""};return e.tokenTicker.toLowerCase().includes(s)||e.tokenName.toLowerCase().includes(s)||e.tokenAddress.toLowerCase().includes(s)||e.pairAddress.toLowerCase().includes(s)}default:return!1}})(x,e,h)):i;return i},[x,i,h]),g=b.map((e,t)=>{let r=t>0?b[t-1]:null;if(!p&&"tx"===e.t||!m&&"call"===e.t||!f&&("chat"===e.t||"sharePnl"===e.t))return null;let s=!!(r&&r.uid===e.uid&&"chat"===e.t&&"chat"===r.t&&e.ts-r.ts<3e5);return{message:e,isConsecutive:s}}).filter(e=>null!==e),y=(0,s.useMemo)(()=>[...g].toReversed(),[g]),v=e?6:12,w=e?8:12,k=e?28:32,N=n?y.length+1:y.length,S=(0,eh.useVirtualizer)({count:N,getScrollElement:()=>c.current,getItemKey:e=>{let t=y[e]?.message;if(!t)return e;if("tx"===t.t){let e=t.transaction;return`${t.t}-${t.uid}-${t.ts}-${(0,ev.getTransactionSignature)(e)}`}return`${t.t}-${t.uid}-${t.ts}`},estimateSize:e=>{let t=y[e]?.message;if(!t)return 0;let r=y[e]?.isConsecutive;switch(t.t){case"chat":case"tx":if(r)return 25;return 50;case"sharePnl":return 516;case"call":return 120;default:return 75}},overscan:12}),A=S.getVirtualItems(),C=(0,s.useMemo)(()=>{if(0===A.length||!n||o)return!1;let e=A[A.length-1];return e.index>=y.length-1||e.end>=S.getTotalSize()-200},[A,y.length,n,o,S]),T=`${A.length}-${y.length}-${n}-${o}`;C&&u.current!==T&&(u.current=T,l());let[I,M]=(0,s.useState)(!1),$=(0,s.useRef)(null),B=(0,s.useCallback)(()=>{c.current&&c.current.scrollTo({top:0,behavior:"smooth"})},[]),L=(0,s.useCallback)(e=>{if(c.current){let e=d.current;e&&c.current.removeEventListener("wheel",e);let t=$.current;t&&c.current.removeEventListener("scroll",t)}if(c.current=e,e){let t=t=>{t.preventDefault(),e.scrollTop-=t.deltaY};e.addEventListener("wheel",t,{passive:!1}),d.current=t;let r=()=>{M(e.scrollTop>300)};e.addEventListener("scroll",r,{passive:!0}),$.current=r}else d.current=null,$.current=null},[]);return(0,t.jsxs)("div",{className:"relative h-full w-full",children:[(0,t.jsxs)("div",{ref:L,className:"scrollbar-thin scrollbar-thumb-secondaryStroke/50 scrollbar-track-transparent flex h-full scale-y-[-1] flex-col overflow-y-auto",style:{display:"block",overflowY:"auto",contain:"strict",width:"100%",height:"100%"},children:[o&&(0,t.jsx)("div",{className:"flex h-full scale-y-[-1] items-center justify-center px-[12px] text-[13px] text-textTertiary",children:"Loading..."}),0===i.length?(0,t.jsx)("div",{className:"flex h-full scale-y-[-1] items-center justify-center px-[12px] text-[13px] text-textTertiary",children:"No messages yet. Start the conversation!"}):(0,t.jsx)("div",{style:{height:`${S.getTotalSize()+w+k}px`,width:"100%",position:"relative",paddingTop:`${w}px`,paddingBottom:`${k}px`},children:A.map(r=>{let s=r.index>=y.length,a=y[r.index];return(0,t.jsx)("div",{"data-index":r.index,ref:S.measureElement,style:{position:"absolute",transform:`translateY(${r.start+w}px) scaleY(-1)`,top:0,left:0,width:"100%",paddingBottom:`${v}px`},children:s?(0,t.jsx)("div",{className:"flex items-center justify-center py-[8px] text-[12px] text-textTertiary",children:n?"Loading older messages":null}):(0,t.jsx)(eJ,{message:a.message,isWindowModal:e,isConsecutive:a.isConsecutive})},r.key)})})]}),(0,t.jsx)(ed.AnimatePresence,{children:I&&(0,t.jsx)(ex.motion.div,{className:"absolute bottom-[24px] left-0 right-0 z-10 mx-auto w-fit origin-bottom",initial:{opacity:0,scale:.85,y:8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.85,y:8},transition:{duration:.25,ease:[.32,.72,0,1]},children:(0,t.jsx)(j.Tooltip,{content:"Jump to bottom",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:B,children:(0,t.jsxs)("div",{className:"relative cursor-pointer overflow-hidden rounded-full shadow-[0_4px_20px_rgba(0,0,0,0.15)] backdrop-blur-[16px] backdrop-saturate-[1.5] transition-all duration-[125ms] hover:brightness-110",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-[1px] z-[10] rounded-full border-[1px] border-white/[0.125]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-[1px] z-[10] rounded-full border-[1px] border-white/[0.09] blur-[4px]"}),(0,t.jsx)("div",{className:"absolute inset-0 z-[5] h-full w-full bg-background opacity-60"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[6] scale-110 rounded-full bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[8px]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"relative z-[15] flex h-[32px] w-[32px] items-center justify-center",children:(0,t.jsx)("i",{className:"ri-arrow-down-line text-[14px] text-textPrimary/80"})})]})})})})})]})}),eZ={messages:"ri-chat-4-line",alerts:"ri-megaphone-line",activity:"ri-pulse-line"},e0=["messages","alerts","activity"],e1=e=>e.charAt(0).toUpperCase()+e.slice(1),e2=(0,s.memo)(function({isActive:e,icon:r,tooltip:s,onClick:a}){return(0,t.jsx)(j.Tooltip,{content:s,position:"top",children:(0,t.jsx)("button",{type:"button",className:`hover:duration-125 group flex h-[28px] min-w-[28px] flex-1 cursor-pointer items-center justify-center rounded-full border-[1px] hover:transition-colors hover:ease-in-out ${e?"grayscale-0 border-primaryBlue/35 bg-primaryBlue/5 text-primaryBlue/90 hover:border-primaryBlue/45 hover:bg-primaryBlue/10 hover:text-primaryBlue":"grayscale-[0.35] opacity-65 border-primaryBlue/25 bg-transparent text-primaryBlue/65 hover:border-primaryBlue/35 hover:bg-primaryBlue/5 hover:text-primaryBlue/75"}`,onClick:a,children:(0,t.jsx)("i",{className:`${r} text-[14px]`})})})}),e4=(0,s.memo)(function({}){let{t:e}=(0,b.useTranslation)(),[a,l]=(0,r.useAtom)(el.showLobbyMessageAtom),[o,n]=(0,r.useAtom)(el.showLobbyActivityAtom),[i,c]=(0,r.useAtom)(el.showLobbyAlertsAtom),[u,d]=(0,r.useAtom)(eW.lobbyMembersExpandedAtom),x=(0,s.useMemo)(()=>{let e=[];return a&&e.push("messages"),i&&e.push("alerts"),o&&e.push("activity"),e},[a,i,o]),p=(0,s.useCallback)(e=>{1===x.length&&x.includes(e)||("messages"===e?l(!a):"alerts"===e?c(!i):"activity"===e&&n(!o))},[a,i,o,x,l,c,n]);return(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[12px] px-[12px] pb-[4px] pt-[12px]",children:[(0,t.jsx)("div",{className:"flex flex-1 flex-row items-center gap-[8px]",children:e0.map(r=>{let s="messages"===r&&a||"alerts"===r&&i||"activity"===r&&o;return(0,t.jsx)(e2,{isActive:s,icon:eZ[r],tooltip:e(s?`Hide ${e1(r)}`:`Show ${e1(r)}`),onClick:()=>p(r)},r)})}),(0,t.jsx)(j.Tooltip,{content:u?"Collapse lobby":"Expand lobby",children:(0,t.jsx)("button",{type:"button",onClick:()=>d(!u),className:"flex h-[28px] w-[28px] flex-shrink-0 flex-row items-center justify-center rounded-full bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:duration-150 hover:ease-in-out",children:(0,t.jsx)("i",{className:`ri-arrow-${u?"up":"down"}-s-line text-[16px] text-textPrimary transition-transform duration-150`})})})]})}),e5=(0,s.memo)(function({isWindowModal:e=!1}){let a=(0,r.useAtomValue)(E.isMobileAtom),l=(0,s.useRef)(null),o=(0,s.useCallback)(()=>{a&&setTimeout(()=>{l.current?.scrollIntoView({behavior:"smooth",block:"end"})},300)},[a]),n=e?"from-backgroundTertiary via-backgroundTertiary/80 to-transparent":"from-backgroundSecondary via-backgroundSecondary/80 to-transparent";return(0,t.jsxs)("div",{ref:l,className:"relative h-full w-full",children:[(0,t.jsxs)("div",{className:"bg-backgroundPrimary absolute inset-0 flex flex-col",children:[(0,t.jsx)(e4,{isWindowModal:e}),(0,t.jsxs)("div",{className:"relative mb-[48px] min-h-0 flex-1",children:[(0,t.jsx)(eQ,{isWindowModal:e}),(0,t.jsx)("div",{className:`pointer-events-none absolute inset-x-0 top-0 z-10 h-[12px] bg-gradient-to-b ${n}`}),(0,t.jsx)("div",{className:`pointer-events-none absolute inset-x-0 bottom-0 z-10 h-[24px] bg-gradient-to-t ${n}`})]})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-20",children:(0,t.jsx)(ef,{isWindowModal:e,onMobileFocus:o})})]})});var e6=e.i(830222),e3=e.i(751380),e8=e.i(622435);let e7=(0,s.memo)(function({isWindowModal:e=!1}){let a=(0,r.useAtomValue)(S.myLobbyInfoAtom),o=(0,s.useMemo)(()=>a?.members??[],[a?.members]),n=(0,s.useMemo)(()=>o.length>=10,[o.length]),[i,c]=(0,s.useState)(!1),u=(0,r.useSetAtom)(l.socialFriendsOpenAtom),d=(0,s.useCallback)(()=>{u(!0)},[u]),x=a?.banner??null,p=(0,r.useAtomValue)(eW.lobbyMembersExpandedAtom),f=(0,eC.useRedirectToProfile)(),h=(0,r.useAtomValue)(N.userProfileIdAtom),b=a?.leaderUserId===h;return(0,t.jsxs)("div",{className:"flex w-full flex-col gap-[6px]",children:[(0,t.jsx)("div",{className:`relative w-full ${p?"p-[12px] pb-[16px]":"px-[12px] pb-[8px] pt-[4px]"}`,children:p?(0,t.jsxs)("div",{className:"relative flex flex-shrink-0 flex-wrap justify-center gap-[16px] overflow-hidden rounded-[12px] px-[12px] pb-[12px] pt-[12px] shadow-[0_8px_40px_rgba(0,0,0,0.25)] backdrop-blur-[16px] backdrop-saturate-[1.5]",children:[(0,t.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] z-[10] translate-y-[1px] rounded-[12px] border-[1px] border-white/[0.125]"}),(0,t.jsx)("div",{className:"absolute inset-[1px] z-[10] rounded-[10px] border-[1px] border-white/[0.09] blur-[4px]"}),(0,t.jsxs)("div",{className:"absolute -inset-x-[520px] inset-y-[0px] z-[10] rounded-[12px] border-[1px] border-white/[0.035] opacity-[0.40]",children:[(0,t.jsxs)("div",{className:"absolute inset-0 h-full w-full overflow-hidden rounded-[12px] blur-[100px] brightness-[0.65] saturate-[1.3]",children:[x?(0,t.jsx)(m.default,{src:x,alt:"Lobby banner background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.src="/images/default-profile-pic.png"},loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)("div",{className:"absolute inset-0 h-full w-full bg-transparent"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-10 h-[520px] bg-gradient-to-t from-backgroundSecondary to-transparent"})]}),(0,t.jsx)("div",{className:"absolute inset-0 scale-110 rounded-[12px] bg-gradient-to-b from-white/[0.1] via-white/0 to-transparent blur-[20px]",style:{mixBlendMode:"overlay"}})]}),(0,t.jsx)("div",{className:"absolute inset-0 z-10 h-full w-full bg-backgroundSecondary/35"}),(0,t.jsxs)("div",{className:"relative z-[20] flex w-full flex-shrink-0 flex-wrap justify-center gap-x-[16px] gap-y-[12px]",children:[o.map(r=>(0,t.jsx)(te,{member:r,isWindowModal:e},r.userProfile.userId)),!n&&(0,t.jsx)("div",{className:"mb-[12px] mt-[6px]",children:(0,t.jsx)(j.Tooltip,{content:"Add Member",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:d,className:"duration-125 group flex h-[40px] w-[40px] flex-shrink-0 cursor-pointer items-center justify-center rounded-full border-[2px] border-dashed border-textTertiary/65 transition-all ease-in-out hover:border-textSecondary/70 hover:opacity-80",children:(0,t.jsx)("i",{className:"ri-add-line duration-125 text-[24px] text-textTertiary/65 transition-all ease-in-out group-hover:text-textSecondary/70"})})})})]})]}):(0,t.jsx)("div",{className:"relative flex flex-1 flex-row items-center justify-start gap-[8px]",children:(0,t.jsxs)("div",{className:"relative items-center overflow-hidden rounded-full p-[4px] shadow-[0_4px_20px_rgba(0,0,0,0.15)] backdrop-blur-[16px] backdrop-saturate-[1.5]",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-[1px] z-[10] rounded-full border-[1px] border-white/[0.125]"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-[1px] z-[10] rounded-full border-[1px] border-white/[0.09] blur-[4px]"}),(0,t.jsx)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] z-[5] opacity-[0.40]",children:(0,t.jsx)("div",{className:"absolute inset-0 h-full w-full overflow-hidden rounded-full blur-[40px] brightness-[0.65] saturate-[1.3]",children:x?(0,t.jsx)(m.default,{src:x,alt:"Lobby banner background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.src="/images/default-profile-pic.png"},loading:"eager",draggable:!1,sizes:"50px"}):(0,t.jsx)("div",{className:"absolute inset-0 h-full w-full bg-transparent"})})}),(0,t.jsx)("div",{className:"absolute inset-0 z-[8] h-full w-full rounded-full bg-backgroundSecondary/35"}),(0,t.jsx)("div",{className:"relative z-[20] flex flex-row",children:o.map((e,r)=>(0,t.jsx)(j.Tooltip,{content:(0,t.jsx)(e9,{member:e,isLeader:a?.leaderUserId===e.userProfile.userId,isCurrentUserLeader:b,isCurrentUser:h===e.userProfile.userId}),position:"top",persistent:!0,vibrancy:!0,rounded:"12px",px:8,width:"auto",minWidth:"320px",maxWidth:"500px",quickShow:!1,children:(0,t.jsx)("button",{type:"button",className:`relative cursor-pointer rounded-full transition-all duration-150 ease-in-out hover:brightness-110 ${r>0?"-ml-[6px]":""}`,style:{zIndex:10-r,...r<o.length-1&&{maskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)",WebkitMaskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)"}},onClick:f(e.userProfile.userId),children:(0,t.jsxs)("div",{className:"relative h-[20px] w-[20px] overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[1] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:e.userProfile.avatarUrl||(0,ee.generateDefaultProfilePicture)(e.userProfile.username),alt:e.userProfile.username,width:20,height:20,className:`h-[20px] w-[20px] rounded-full object-cover ${"offline"===e.presence?"opacity-50":""}`,draggable:!1})]})})},e.userProfile.userId))})]})})}),i&&(0,t.jsx)(e8.LobbySettingsModal,{onClose:()=>c(!1),isWindowModal:e})]})}),e9=(0,s.memo)(function({member:e,isLeader:a,isCurrentUserLeader:l,isCurrentUser:o}){let{kickFromLobby:i,transferOwnership:c}=(0,n.useLobbyApi)(),{canFollowUser:u,handleFollowLobby:d}=(0,e3.useFollowUser)(e),x=(0,r.useAtomValue)(S.followedLobbyUserAtom)===e.userProfile.userId,p=(0,s.useMemo)(()=>{if(!e.currentPage)return null;switch(e.currentPage){case"meme":if(!e.currentSubpage)return null;try{let t=e.currentSubpage;return{type:"pair",name:t.ticker||"Pair",tokenAddress:t.tokenAddress,tokenTicker:t.ticker,tokenName:t.name,protocol:t.protocol,isMigrated:t.isMigrated,price:t.price,supply:t.supply}}catch{return null}case"perpetuals":if(!e.currentSubpage)return null;try{let t=e.currentSubpage;return{type:"perp",name:t.currentPerp,imageUrl:`https://app.hyperliquid.xyz/coins/${t.currentPerp}.svg`,price:t.price}}catch{return null}case"discover":return{type:"page",icon:"ri-compass-3-line",name:"Discover",subpage:e.currentSubpage};case"pulse":return{type:"page",icon:"ri-pulse-line",name:"Pulse"};case"trackers":return{type:"page",icon:"ri-wallet-3-line",name:"Trackers"};case"vision":return{type:"page",icon:"ri-eye-line",name:"Vision"};case"portfolio":return{type:"page",icon:"ri-wallet-line",name:"Portfolio"};case"rewards":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Rewards"};case"yield":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Yield"};default:return null}},[e.currentPage,e.currentSubpage]),f=p?.type==="pair"&&p.protocol&&e.currentChain?(0,eU.getProtocolBadgeBorderWithChain)(p.protocol,p.isMigrated||!1,e.currentChain):null,h=p?.type==="pair"&&p.protocol&&e.currentChain?(0,eU.getProtocolIconWithChain)(p.protocol,p.isMigrated||!1,e.currentChain):null,b=(0,r.useAtomValue)(eW.userLobbySettingsAtom),g=(0,r.useAtomValue)(eT.currentChainAtom),y=b.showBalanceInUsd,v=(0,r.useAtomValue)(e_.usdPerSolAtom),w=(0,r.useAtomValue)(e_.usdPerBnbAtom),k="sol"===g?e.sharedWallets?.sol?.stats||{totalBalance:0,totalPnl:0}:e.sharedWallets?.bnb?.stats||{totalBalance:0,totalPnl:0},N="sol"===g?v:w,A=y?k.totalBalance*N:k.totalBalance,P=y?k.totalPnl*N:k.totalPnl,C=P>=0,T=eT.chainToInfoMap[g];return(0,t.jsxs)("div",{className:"flex min-h-[42px] flex-row items-center gap-[8px]",children:[(0,t.jsxs)("div",{className:"flex min-w-[60px] flex-col items-center gap-0",children:[(0,t.jsx)("span",{className:"text-[11px] font-normal text-textTertiary",children:"User"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[a&&(0,t.jsx)("i",{className:"ri-vip-crown-line text-[12px] text-amber-500"}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[18px] text-textPrimary",children:e.userProfile.username})]})]}),(0,t.jsx)("div",{className:"h-[24px] w-[1px] bg-secondaryStroke/50"}),(0,t.jsxs)("div",{className:"flex min-w-[60px] flex-col items-center gap-0",children:[(0,t.jsx)("span",{className:"text-[11px] font-normal text-textTertiary",children:"Balance"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[!y&&(0,t.jsx)(m.default,{src:T.icon,alt:T.ticker,width:12,height:12}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[18px] text-textSecondary",dangerouslySetInnerHTML:{__html:y?`$${(0,ek.getFormattedNumber)(A,4,!0)}`:(0,ek.getFormattedNumber)(A,4,!0)}})]})]}),(0,t.jsx)("div",{className:"h-[24px] w-[1px] bg-secondaryStroke/50"}),(0,t.jsxs)("div",{className:"flex min-w-[60px] flex-col items-center gap-0",children:[(0,t.jsx)("span",{className:"text-[11px] font-normal text-textTertiary",children:"PnL"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[!y&&(0,t.jsx)(m.default,{src:T.icon,alt:T.ticker,width:12,height:12}),(0,t.jsx)("span",{className:`${C?"text-increase":"text-decrease"} text-[12px] font-medium leading-[18px]`,dangerouslySetInnerHTML:{__html:y?`${C?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(P),4,!0)}`:`${C?"+":"-"}${(0,ek.getFormattedNumber)(Math.abs(P),4,!0)}`}})]})]}),(0,t.jsx)("div",{className:"h-[24px] w-[1px] bg-secondaryStroke/50"}),(0,t.jsxs)("div",{className:"flex min-w-[60px] flex-col items-center gap-0",children:[(0,t.jsx)("span",{className:"text-[11px] font-normal text-textTertiary",children:"Activity"}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-[4px]",children:e.isOnline&&p?(0,t.jsxs)(t.Fragment,{children:["pair"===p.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative h-[16px] w-[16px] overflow-visible rounded-[3px] bg-secondaryStroke",children:[(0,t.jsx)(eF.default,{src:"sol"===e.currentChain?`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${p.tokenAddress}.webp`:`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${p.tokenAddress}.webp`,alt:p.tokenName||"",width:16,height:16,tokenTicker:p.tokenTicker||p.tokenName||"",className:"absolute inset-0 z-10 rounded-[2px] bg-secondaryStroke object-cover",loading:"eager"}),(0,t.jsx)("div",{className:`absolute -inset-[1px] z-0 rounded-[3px] opacity-[0.35] ${f?.className||""}`,style:f?.style}),h&&(0,t.jsx)("div",{className:`absolute bottom-[-3px] right-[-3px] z-30 flex h-[10px] w-[10px] items-center justify-center rounded-full p-[1px] shadow-sm ${f?.className||""}`,style:f?.style,children:(0,t.jsx)("div",{className:"absolute z-30 flex h-[8px] w-[8px] items-center justify-center rounded-full bg-background",children:(0,t.jsx)(eF.default,{src:h,tokenTicker:p.tokenTicker||p.tokenName||"",alt:p.protocol||"",width:6,height:6,className:"object-cover",loading:"eager"})})})]}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[18px] text-textSecondary",children:p.tokenTicker||p.name})]}),"perp"===p.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eF.default,{src:p.imageUrl,alt:p.name,width:14,height:14,tokenTicker:p.name,className:"rounded-[2px] bg-secondaryStroke object-cover",loading:"eager"}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[18px] text-textSecondary",children:p.name})]}),"page"===p.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:`${p.icon} text-[14px] text-textSecondary`}),(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[18px] text-textSecondary",children:p.name})]})]}):(0,t.jsx)("span",{className:"text-[12px] font-medium leading-[18px] text-textTertiary",children:e.isOnline?"Active":"Offline"})})]}),!o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"h-[24px] w-[1px] bg-secondaryStroke/50"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)(j.Tooltip,{content:u?x?"Stop following":"Follow user":"Cannot follow user",position:"top",delay:.1,children:(0,t.jsx)("button",{type:"button",disabled:!u,onClick:d,className:`flex h-[24px] w-[24px] cursor-pointer items-center justify-center rounded-[4px] transition-all ${x?"bg-primaryBlueHover/20 hover:bg-primaryBlueHover/30":"bg-white/[0.06] hover:bg-white/[0.12]"} ${!u?"cursor-not-allowed opacity-50":""}`,children:(0,t.jsx)("i",{className:`ri-crosshair-2-line text-[14px] transition-colors duration-[125ms] ease-in-out ${x?"text-primaryBlueHover":"text-white/80"}`})})}),l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Tooltip,{content:"Transfer ownership",position:"top",delay:.1,children:(0,t.jsx)("button",{type:"button",onClick:()=>c(e.userProfile.userId),className:"flex h-[24px] w-[24px] cursor-pointer items-center justify-center rounded-[4px] bg-white/[0.06] transition-all hover:bg-white/[0.12]",children:(0,t.jsx)("i",{className:"ri-vip-crown-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),(0,t.jsx)(j.Tooltip,{content:"Kick from lobby",position:"top",delay:.1,children:(0,t.jsx)("button",{type:"button",onClick:()=>i(e.userProfile.userId),className:"flex h-[24px] w-[24px] cursor-pointer items-center justify-center rounded-[4px] bg-white/[0.06] transition-all hover:bg-white/[0.12]",children:(0,t.jsx)("i",{className:"ri-user-unfollow-line text-[14px] text-decrease/80 transition-colors duration-[125ms] ease-in-out"})})})]})]})]})]})}),te=(0,s.memo)(function({member:e,isWindowModal:a=!1}){let l=(0,r.useAtomValue)(S.myLobbyInfoAtom),o=(0,r.useAtomValue)(N.userProfileIdAtom),n=(0,eC.useRedirectToProfile)(),{isFollowingUser:i}=(0,e3.useFollowUser)(e),c="away"===e.presence,{isCurrentUserLeader:u,isCurrentUser:d,statusDotWrapperBgClass:x,statusDotColorClass:p,avatarBorderColorClass:f}=(0,s.useMemo)(()=>{let t=l?.leaderUserId===o,r=e.userProfile.userId===o,s="offline"!==e.presence,n=a?"bg-backgroundTertiary":"bg-backgroundSecondary",i=s?"away"===e.presence?"bg-primaryOrange":"bg-primaryGreen":"border-[3px] border-textTertiary";return{isCurrentUserLeader:t,isCurrentUser:r,statusDotWrapperBgClass:n,isOnline:s,statusDotColorClass:i,avatarBorderColorClass:c?"border-[2px] border-primaryOrange":""}},[l?.leaderUserId,o,e.userProfile.userId,e.presence,a,c,i]),{generatePathMessage:h}=(0,e6.useGeneratePath)(),{currentPage:b,currentSubpage:g,currentChain:y}=(0,s.useMemo)(()=>{if(e.userProfile.userId===o){let e=h();return{currentPage:e?.page??null,currentSubpage:e?.subpage??null,currentChain:e?.chain??null}}return{currentPage:e.currentPage,currentSubpage:e.currentSubpage,currentChain:e.currentChain}},[e.currentPage,e.currentSubpage,e.currentChain,o,h,e.userProfile.userId]);return(0,t.jsx)(j.Tooltip,{content:(0,t.jsx)(e9,{member:e,isLeader:l?.leaderUserId===e.userProfile.userId,isCurrentUserLeader:u,isCurrentUser:d}),position:"top",persistent:!0,vibrancy:!0,rounded:"12px",px:8,width:"auto",minWidth:"320px",maxWidth:"500px",quickShow:!1,children:(0,t.jsxs)("div",{className:`relative mb-[12px] mt-[6px] h-[40px] w-[40px] flex-shrink-0 overflow-visible rounded-full shadow-[0_6px_10px_-1px_rgba(0,0,0,0.15),0_4px_6px_-1px_rgba(0,0,0,0.06)] ${a?"bg-background":"bg-backgroundSecondary"} ${f}`,children:[i&&(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-[1px] z-[20] animate-pulse rounded-full border-[2px] border-primaryBlueHover"}),(0,t.jsxs)("button",{type:"button",className:"relative h-full w-full flex-shrink-0 cursor-pointer overflow-visible rounded-full transition-all duration-150 ease-in-out hover:brightness-110",onClick:n(e.userProfile.userId),children:[(0,t.jsxs)("div",{className:"relative h-full w-full flex-shrink-0 overflow-visible rounded-full",children:[e.userProfile.color&&(0,t.jsx)("div",{className:"pointer-events-none absolute -inset-[3px] z-[5] rounded-full opacity-35 blur-[24px]",style:{backgroundColor:e.userProfile.color}}),(0,t.jsxs)("div",{className:"relative z-[10] h-full w-full overflow-hidden rounded-full",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full rounded-full border-[1px] border-white/[0.1]"}),(0,t.jsx)(m.default,{src:e.userProfile.avatarUrl||(0,ee.generateDefaultProfilePicture)(e.userProfile.username||""),alt:e.userProfile.username||"",width:40,height:40,className:"rounded-full object-cover",loading:"eager",draggable:!1})]})]}),l?.leaderUserId===e.userProfile.userId&&(0,t.jsx)("div",{className:"absolute -top-[14px] left-1/2 z-30 -translate-x-1/2 transform",children:(0,t.jsx)("i",{className:"ri-vip-crown-fill text-[14px] text-amber-500"})})]}),"offline"!==e.presence?(0,t.jsx)("div",{className:"absolute -bottom-[10px] z-[25]",children:(0,t.jsx)(T.MiniatureActivityButton,{lastPage:b,subpage:g,currentChain:y})}):(0,t.jsx)("div",{className:`absolute bottom-[0px] right-[0px] z-[25] flex h-[16px] w-[16px] flex-shrink-0 items-center justify-center rounded-full ${x}`,children:(0,t.jsx)("div",{className:`h-[10px] w-[10px] rounded-full ${p}`})})]})},e.userProfile.userId)});var tt=e.i(50454),tr=e.i(314243);function ts(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function ta(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let tl=async({lobbyName:e,members:t,solPnl:r,bnbPnl:s,usdPerSol:a,usdPerBnb:l,banner:o,currentUserId:n,customization:i,onSuccess:c,onError:u,setShareIsLoading:d})=>{d(!0);try{let u=r*a+s*l,d=u>=0,x=document.createElement("canvas");x.width=840,x.height=570;let p=x.getContext("2d");if(!p)throw Error("Failed to get canvas context");let m=Array.isArray(t)?[...t]:[],f=m.find(e=>e?.userProfile?.userId===n);await (0,tr.drawTemplateBackground)(p,x,o?"custom":"katana",o||null);let h=i?.textColor??"#EAEDFF",b=i?.positiveColor??"#2FE3AC",g=i?.negativeColor??"#EC397A",y=i?.useTextShadows??!0,v=i?.useBoldFont?"bold":"normal";await (0,tr.drawAxiomLogo)(p,o?"custom":"katana",h,y),ts(p,y),p.fillStyle=h,p.font="normal 44.12px Geist, sans-serif",p.fillText("AXIOM",623.62,70.71),p.fillStyle=h,p.font="normal 28.99px Geist, sans-serif",p.fillText("Pro",763.62,70.71),p.fillStyle=h,p.font=`${v} 36px Geist, sans-serif`,p.fillText(e.toUpperCase(),34.5,158.07),ta(p),p.fillStyle=d?b:g,p.save(),(0,tr.roundedImage)(p,34.5,176.45,320,70,8),p.fill(),p.restore(),p.fillStyle="#020307",p.font=`${v} 42px Geist, sans-serif`;let w=`${d?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(u),4,!0)}`;p.fillText(w,50.5,226.45),ts(p,y),p.fillStyle=h,p.font=`${v} 14px Geist, sans-serif`,p.fillText("LOBBY TOTAL",34.5,266.45),ta(p);let j=m.filter(e=>e?.userProfile?.username&&e?.userProfile?.userId!==n).sort((e,t)=>{let r=(e?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(e?.sharedWallets?.bnb?.stats?.totalPnl||0)*l;return(t?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(t?.sharedWallets?.bnb?.stats?.totalPnl||0)*l-r}).slice(0,6);ts(p,y),p.fillStyle=h,p.font=`${v} 14px Geist, sans-serif`,p.fillText("OTHER MEMBERS",34.5,293.45),ta(p);for(let e=0;e<j.length;e++){let t=j[e],r=301.45+44*e+8,s=t?.sharedWallets?.sol?.stats?.totalPnl||0,o=t?.sharedWallets?.bnb?.stats?.totalPnl||0,n=s*a+o*l,i=n>=0,c=t.userProfile.color||"#FFFFFF";if(p.save(),p.fillStyle=c,p.beginPath(),p.arc(50.5,r+14+2,16,0,2*Math.PI),p.fill(),t.userProfile.avatarUrl)try{let e=await (0,tr.loadImage)(t.userProfile.avatarUrl);p.beginPath(),p.arc(50.5,r+14+2,14,0,2*Math.PI),p.clip(),p.drawImage(e,36.5,r+2,28,28)}catch{p.fillStyle="#333745",p.beginPath(),p.arc(50.5,r+14+2,14,0,2*Math.PI),p.fill()}p.restore(),ts(p,y),p.fillStyle=h,p.font="500 14px Geist, sans-serif",p.textAlign="left";let u=t.userProfile.username.length>14?t.userProfile.username.slice(0,14)+"...":t.userProfile.username;p.fillText(u,76.5,r+14+2+4),p.fillStyle=i?b:g,p.font=`${v} 14px Geist, sans-serif`;let d=`${i?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(n),4,!0)}`;p.fillText(d,294.5,r+14+2+4),ta(p);let x=r+44-6;p.strokeStyle="rgba(0, 0, 0, 0.5)",p.lineWidth=1,p.setLineDash([4,4]),p.beginPath(),p.moveTo(34.5,x),p.lineTo(354.5,x),p.stroke(),p.setLineDash([])}if(f){let e=f?.sharedWallets?.sol?.stats?.totalPnl||0,t=f?.sharedWallets?.bnb?.stats?.totalPnl||0,r=e*a+t*l,s=r>=0,o=f.userProfile.color||"#FFFFFF",n=x.width-340-24,i=x.height-100-24;if(p.save(),(0,tr.roundedImage)(p,n,i,340,100,12),p.clip(),p.fillStyle="rgba(20, 20, 30, 0.9)",p.fillRect(n,i,340,100),f.userProfile.bannerUrl)try{let e,t,r,s,a=await (0,tr.loadImage)(f.userProfile.bannerUrl),l=a.width/a.height;l>3.4?(e=(t=100)*l,r=n-(e-340)/2,s=i):(t=(e=340)/l,r=n,s=i-(t-100)/2),p.drawImage(a,r,s,e,t),p.fillStyle="rgba(0, 0, 0, 0.55)",p.fillRect(n,i,340,100)}catch{}p.restore();let c=n+340-76-15,u=i+12;if(p.save(),p.fillStyle=o,p.beginPath(),p.arc(c+38,u+38,38,0,2*Math.PI),p.fill(),f.userProfile.avatarUrl)try{let e=await (0,tr.loadImage)(f.userProfile.avatarUrl);p.beginPath(),p.arc(c+38,u+38,35,0,2*Math.PI),p.clip(),p.drawImage(e,c+3,u+3,70,70)}catch{p.fillStyle="#333745",p.beginPath(),p.arc(c+38,u+38,35,0,2*Math.PI),p.fill(),p.fillStyle="#FFFFFF",p.font=`${v} 28px Geist, sans-serif`,p.textAlign="center",p.textBaseline="middle",p.fillText(f.userProfile.username.charAt(0).toUpperCase(),c+38,u+38)}else p.fillStyle="#333745",p.beginPath(),p.arc(c+38,u+38,35,0,2*Math.PI),p.fill(),p.fillStyle="#FFFFFF",p.font=`${v} 28px Geist, sans-serif`,p.textAlign="center",p.textBaseline="middle",p.fillText(f.userProfile.username.charAt(0).toUpperCase(),c+38,u+38);p.restore(),ts(p,y),p.fillStyle=h,p.font=`${v} 20px Geist, sans-serif`,p.textAlign="left",p.textBaseline="alphabetic";let d=f.userProfile.username.length>16?f.userProfile.username.slice(0,16)+"...":f.userProfile.username;p.fillText(d,n+16,i+35),ta(p);let m=n+16,w=i+48;p.save(),p.fillStyle=s?b:g,(0,tr.roundedImage)(p,m,w,140,36,6),p.fill(),p.restore(),p.fillStyle="#020307",p.font=`${v} 18px Geist, sans-serif`,p.textAlign="left";let j=`${s?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(r),4,!0)}`;p.fillText(j,m+12,w+25)}let k=x.toDataURL("image/png");c({USD:k,NATIVE:k})}catch(e){console.error("Error generating lobby share image:",e),u(e)}finally{d(!1)}};function to(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function tn(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let ti=async({lobbyName:e,members:t,usdPerSol:r,usdPerBnb:s,banner:a,customization:l,onSuccess:o,onError:n,setShareIsLoading:i})=>{i(!0);try{let n=document.createElement("canvas");n.width=840,n.height=570;let i=n.getContext("2d");if(!i)throw Error("Failed to get canvas context");let c=(Array.isArray(t)?[...t]:[]).filter(e=>e?.userProfile?.username).map(e=>{let t=e?.sharedWallets?.sol?.stats?.totalPnl||0,a=e?.sharedWallets?.bnb?.stats?.totalPnl||0;return{member:e,totalUsd:t*r+a*s}}).sort((e,t)=>t.totalUsd-e.totalUsd).slice(0,10);await (0,tr.drawTemplateBackground)(i,n,a?"custom":"katana",a||null);let u=l?.textColor??"#EAEDFF",d=l?.positiveColor??"#2FE3AC",x=l?.negativeColor??"#EC397A",p=l?.useTextShadows??!0,m=l?.useBoldFont?"bold":"normal";await (0,tr.drawAxiomLogo)(i,a?"custom":"katana",u,p),to(i,p),i.fillStyle=u,i.font="normal 44.12px Geist, sans-serif",i.fillText("AXIOM",623.62,70.71),i.fillStyle=u,i.font="normal 28.99px Geist, sans-serif",i.fillText("Pro",763.62,70.71),i.fillStyle=u,i.font=`${m} 32px Geist, sans-serif`,i.textAlign="center",i.fillText(e.toUpperCase(),n.width/2,153.07),i.fillStyle=u,i.font=`${m} 16px Geist, sans-serif`,i.fillText("PnL CHART",n.width/2,170),tn(i),i.textAlign="left";let f=n.width-60,h=f-60,b=Math.max(...c.map(e=>Math.abs(e.totalUsd)),1),g=c.length,y=Math.min(65,(h-10*(g+1))/g),v=g*y+(g-1)*10,w=60+(h-v)/2,j=320;i.strokeStyle="rgba(234, 237, 255, 0.3)",i.lineWidth=1,i.setLineDash([5,5]),i.beginPath(),i.moveTo(60,j),i.lineTo(f,j),i.stroke(),i.setLineDash([]),to(i,p),i.fillStyle="rgba(234, 237, 255, 0.5)",i.font="12px Geist, sans-serif",i.textAlign="right",i.fillText("$0",52,j+4),tn(i),i.textAlign="left";for(let e=0;e<c.length;e++){let{member:t,totalUsd:r}=c[e],s=r>=0,a=t.userProfile.color||"#FFFFFF",l=w+e*(y+10),o=Math.abs(r)/b*90,n=Math.max(o,4),f=s?j-n:j,h=i.createLinearGradient(l,s?f:j,l,s?j:j+n),g=s?d:x;h.addColorStop(0,g),h.addColorStop(1,function(e,t){let r=parseInt(e.replace("#",""),16),s=Math.max(0,Math.min(255,(r>>16&255)+-30)),a=Math.max(0,Math.min(255,(r>>8&255)+-30)),l=Math.max(0,Math.min(255,(255&r)+-30));return`rgb(${s}, ${a}, ${l})`}(g,-30)),i.save(),i.fillStyle=h,(0,tr.roundedImage)(i,l,f,y,n,4),i.fill(),i.restore();let v=Math.min(y-6,40),k=l+(y-v)/2,N=444;if(i.save(),i.fillStyle=a,i.beginPath(),i.arc(k+v/2,N+v/2,v/2+2,0,2*Math.PI),i.fill(),t.userProfile.avatarUrl)try{let e=await (0,tr.loadImage)(t.userProfile.avatarUrl);i.beginPath(),i.arc(k+v/2,N+v/2,v/2,0,2*Math.PI),i.clip(),i.drawImage(e,k,N,v,v)}catch{i.fillStyle="#333745",i.beginPath(),i.arc(k+v/2,N+v/2,v/2,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} ${v/2}px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(t.userProfile.username.charAt(0).toUpperCase(),k+v/2,N+v/2)}else i.fillStyle="#333745",i.beginPath(),i.arc(k+v/2,N+v/2,v/2,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} ${v/2}px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(t.userProfile.username.charAt(0).toUpperCase(),k+v/2,N+v/2);i.restore(),to(i,p),i.fillStyle=s?d:x,i.font=`${m} 11px Geist, sans-serif`,i.textAlign="center",i.textBaseline="alphabetic";let S=`${s?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(r),4,!0)}`,A=s?f-5:f+n+13;i.fillText(S,l+y/2,A),i.fillStyle=u,i.font="10px Geist, sans-serif";let P=t.userProfile.username.length>7?t.userProfile.username.slice(0,6)+"..":t.userProfile.username;i.fillText(P,l+y/2,N+v+12),tn(i)}i.textAlign="left",i.textBaseline="alphabetic";let k=n.toDataURL("image/png");o({USD:k,NATIVE:k})}catch(e){console.error("Error generating lobby share image:",e),n(e)}finally{i(!1)}};function tc(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function tu(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let td=async({lobbyName:e,members:t,solPnl:r,bnbPnl:s,usdPerSol:a,usdPerBnb:l,banner:o,customization:n,onSuccess:i,onError:c,setShareIsLoading:u})=>{u(!0);try{let c=r*a+s*l,u=c>=0,d=document.createElement("canvas");d.width=840,d.height=570;let x=d.getContext("2d");if(!x)throw Error("Failed to get canvas context");let p=(Array.isArray(t)?[...t]:[]).filter(e=>e?.userProfile?.username).sort((e,t)=>{let r=(e?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(e?.sharedWallets?.bnb?.stats?.totalPnl||0)*l;return(t?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(t?.sharedWallets?.bnb?.stats?.totalPnl||0)*l-r});if(0===p.length)throw Error("No members found");let m=p[0],f=p.slice(1,5);await (0,tr.drawTemplateBackground)(x,d,o?"custom":"katana",o||null);let h=n?.textColor??"#EAEDFF",b=n?.positiveColor??"#2FE3AC",g=n?.negativeColor??"#EC397A",y="#FFD700",v=n?.useTextShadows??!0,w=n?.useBoldFont?"bold":"normal";await (0,tr.drawAxiomLogo)(x,o?"custom":"katana",h,v),tc(x,v),x.fillStyle=h,x.font="normal 44.12px Geist, sans-serif",x.fillText("AXIOM",623.62,70.71),x.fillStyle=h,x.font="normal 28.99px Geist, sans-serif",x.fillText("Pro",763.62,70.71),x.fillStyle=h,x.font=`${w} 36px Geist, sans-serif`,x.fillText(e.toUpperCase(),34.5,158.07),tu(x);let j=n?.showRectangle??!0,k=n?.rectangleTextColor??"#020307";if(j){x.fillStyle=u?b:g,x.save(),(0,tr.roundedImage)(x,34.5,176.45,320,70,8),x.fill(),x.restore(),x.fillStyle=k,x.font=`${w} 42px Geist, sans-serif`;let e=`${u?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(c),4,!0)}`;x.fillText(e,50.5,226.45)}else{tc(x,v),x.fillStyle=u?b:g,x.font=`${w} 42px Geist, sans-serif`;let e=`${u?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(c),4,!0)}`;x.fillText(e,34.5,226.45),tu(x)}tc(x,v),x.fillStyle=h,x.font=`${w} 14px Geist, sans-serif`,x.fillText("LOBBY TOTAL",34.5,266.45),tu(x);tc(x,v),x.fillStyle=h,x.font=`${w} 14px Geist, sans-serif`,x.fillText("TOP PERFORMERS",34.5,293.45),tu(x);for(let e=0;e<f.length;e++){let t=f[e],r=301.45+52*e+6,s=t?.sharedWallets?.sol?.stats?.totalPnl||0,o=t?.sharedWallets?.bnb?.stats?.totalPnl||0,n=s*a+o*l,i=n>=0,c=t.userProfile.color||"#FFFFFF";tc(x,v),x.fillStyle=["#C0C0C0","#CD7F32",h,h][e]||h,x.font=`${w} 18px Geist, sans-serif`,x.fillText(`#${e+2}`,34.5,r+24),tu(x);if(x.save(),x.fillStyle=0===e?"#C0C0C0":c,x.beginPath(),x.arc(88.5,r+16+2+2,18,0,2*Math.PI),x.fill(),t.userProfile.avatarUrl)try{let e=await (0,tr.loadImage)(t.userProfile.avatarUrl);x.beginPath(),x.arc(88.5,r+16+2+2,16,0,2*Math.PI),x.clip(),x.drawImage(e,72.5,r+2+2,32,32)}catch{x.fillStyle="#333745",x.beginPath(),x.arc(88.5,r+16+2+2,16,0,2*Math.PI),x.fill()}x.restore(),tc(x,v),x.fillStyle=h,x.font="500 14px Geist, sans-serif",x.textAlign="left";let u=t.userProfile.username.length>12?t.userProfile.username.slice(0,12)+"...":t.userProfile.username;x.fillText(u,116.5,r+24),x.fillStyle=i?b:g,x.font=`${w} 14px Geist, sans-serif`;let d=`${i?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(n),4,!0)}`;x.fillText(d,314.5,r+24),tu(x);let p=r+52-6;x.strokeStyle="rgba(0, 0, 0, 0.5)",x.lineWidth=1,x.setLineDash([4,4]),x.beginPath(),x.moveTo(34.5,p),x.lineTo(374.5,p),x.stroke(),x.setLineDash([])}if(m){let e=m?.sharedWallets?.sol?.stats?.totalPnl||0,t=m?.sharedWallets?.bnb?.stats?.totalPnl||0,r=e*a+t*l,s=r>=0,o=m.userProfile.color||"#FFFFFF",n=d.width-360-24,i=d.height-110-24;if(x.save(),(0,tr.roundedImage)(x,n,i,360,110,12),x.clip(),x.fillStyle="rgba(20, 20, 30, 0.9)",x.fillRect(n,i,360,110),m.userProfile.bannerUrl)try{let e,t,r,s,a=await (0,tr.loadImage)(m.userProfile.bannerUrl),l=a.width/a.height;l>360/110?(e=(t=110)*l,r=n-(e-360)/2,s=i):(t=(e=360)/l,r=n,s=i-(t-110)/2),x.drawImage(a,r,s,e,t),x.fillStyle="rgba(0, 0, 0, 0.55)",x.fillRect(n,i,360,110)}catch{}x.restore();let c=n+360-84-15,u=i+13;if(x.save(),x.fillStyle=y,x.beginPath(),x.arc(c+42,u+42,42,0,2*Math.PI),x.fill(),x.fillStyle=o,x.beginPath(),x.arc(c+42,u+42,40,0,2*Math.PI),x.fill(),m.userProfile.avatarUrl)try{let e=await (0,tr.loadImage)(m.userProfile.avatarUrl);x.beginPath(),x.arc(c+42,u+42,38,0,2*Math.PI),x.clip(),x.drawImage(e,c+4,u+4,76,76)}catch{x.fillStyle="#333745",x.beginPath(),x.arc(c+42,u+42,38,0,2*Math.PI),x.fill(),x.fillStyle="#FFFFFF",x.font=`${w} 32px Geist, sans-serif`,x.textAlign="center",x.textBaseline="middle",x.fillText(m.userProfile.username.charAt(0).toUpperCase(),c+42,u+42)}else x.fillStyle="#333745",x.beginPath(),x.arc(c+42,u+42,38,0,2*Math.PI),x.fill(),x.fillStyle="#FFFFFF",x.font=`${w} 32px Geist, sans-serif`,x.textAlign="center",x.textBaseline="middle",x.fillText(m.userProfile.username.charAt(0).toUpperCase(),c+42,u+42);x.restore(),tc(x,v),x.fillStyle=y,x.font=`${w} 16px Geist, sans-serif`,x.textAlign="left",x.textBaseline="alphabetic",x.fillText(" MVP",n+16,i+28),x.fillStyle=h,x.font=`${w} 20px Geist, sans-serif`;let p=m.userProfile.username.length>14?m.userProfile.username.slice(0,14)+"...":m.userProfile.username;x.fillText(p,n+16,i+52),tu(x);let f=n+16,j=i+62;x.save(),x.fillStyle=s?b:g,(0,tr.roundedImage)(x,f,j,150,36,6),x.fill(),x.restore(),x.fillStyle="#020307",x.font=`${w} 18px Geist, sans-serif`,x.textAlign="left";let k=`${s?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(r),4,!0)}`;x.fillText(k,f+12,j+25)}let N=d.toDataURL("image/png");i({USD:N,NATIVE:N})}catch(e){console.error("Error generating lobby share image:",e),c(e)}finally{u(!1)}};function tx(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function tp(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let tm=async({lobbyName:e,members:t,usdPerSol:r,usdPerBnb:s,banner:a,customization:l,onSuccess:o,onError:n,setShareIsLoading:i})=>{i(!0);try{let n=document.createElement("canvas");n.width=840,n.height=570;let i=n.getContext("2d");if(!i)throw Error("Failed to get canvas context");let c=(Array.isArray(t)?[...t]:[]).filter(e=>e?.userProfile?.username).sort((e,t)=>{let a=(e?.sharedWallets?.sol?.stats?.totalPnl||0)*r+(e?.sharedWallets?.bnb?.stats?.totalPnl||0)*s;return(t?.sharedWallets?.sol?.stats?.totalPnl||0)*r+(t?.sharedWallets?.bnb?.stats?.totalPnl||0)*s-a}).slice(0,3);await (0,tr.drawTemplateBackground)(i,n,a?"custom":"katana",a||null);let u=l?.textColor??"#EAEDFF",d=l?.positiveColor??"#2FE3AC",x=l?.negativeColor??"#EC397A",p=l?.useTextShadows??!0,m=l?.useBoldFont?"bold":"normal";await (0,tr.drawAxiomLogo)(i,a?"custom":"katana",u,p),tx(i,p),i.fillStyle=u,i.font="normal 44.12px Geist, sans-serif",i.fillText("AXIOM",623.62,70.71),i.fillStyle=u,i.font="normal 28.99px Geist, sans-serif",i.fillText("Pro",763.62,70.71),i.fillStyle=u,i.font=`${m} 32px Geist, sans-serif`,i.textAlign="center",i.fillText(e.toUpperCase(),n.width/2,153.07),i.fillStyle=u,i.font=`${m} 16px Geist, sans-serif`,i.fillText("LEADERBOARD",n.width/2,170),tp(i),i.textAlign="left";let f=[{place:2,x:170,baseHeight:100,color:"#C0C0C0",label:"2ND"},{place:1,x:350,baseHeight:130,color:"#FFD700",label:"1ST"},{place:3,x:530,baseHeight:70,color:"#CD7F32",label:"3RD"}];for(let e=0;e<f.length;e++){let t=f[e],a=c[t.place-1];if(!a)continue;let l=a?.sharedWallets?.sol?.stats?.totalPnl||0,o=a?.sharedWallets?.bnb?.stats?.totalPnl||0,n=l*r+o*s,h=n>=0,b=a.userProfile.color||"#FFFFFF",g=t.x,y=510-t.baseHeight,v=i.createLinearGradient(g,y,g,510);v.addColorStop(0,t.color),v.addColorStop(1,function(e,t){let r=parseInt(e.replace("#",""),16),s=Math.max(0,Math.min(255,(r>>16&255)+-40)),a=Math.max(0,Math.min(255,(r>>8&255)+-40)),l=Math.max(0,Math.min(255,(255&r)+-40));return`rgb(${s}, ${a}, ${l})`}(t.color,-40)),i.save(),i.fillStyle=v,(0,tr.roundedImage)(i,g,y,140,t.baseHeight,8),i.fill(),i.restore(),i.fillStyle="#020307",i.font=`${m} 24px Geist, sans-serif`,i.textAlign="center",i.fillText(t.label,g+70,490);let w=g+4;i.save(),i.fillStyle=h?d:x,(0,tr.roundedImage)(i,w,518,132,32,4),i.fill(),i.restore(),i.fillStyle="#020307",i.font=`${m} 14px Geist, sans-serif`,i.textAlign="center";let j=`${h?"+":"-"}$${(0,ek.getFormattedNumber)(Math.abs(n),4,!0)}`;i.fillText(j,w+66,540);let k=140,N=y-k-6;if(i.save(),i.fillStyle=t.color,i.beginPath(),i.arc(g+k/2,N+k/2,k/2,0,2*Math.PI),i.fill(),i.fillStyle=b,i.beginPath(),i.arc(g+k/2,N+k/2,68,0,2*Math.PI),i.fill(),a.userProfile.avatarUrl)try{let e=await (0,tr.loadImage)(a.userProfile.avatarUrl);i.beginPath(),i.arc(g+k/2,N+k/2,66,0,2*Math.PI),i.clip(),i.drawImage(e,g+4,N+4,132,132)}catch{i.fillStyle="#333745",i.beginPath(),i.arc(g+k/2,N+k/2,66,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} 48px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(a.userProfile.username.charAt(0).toUpperCase(),g+k/2,N+k/2)}else i.fillStyle="#333745",i.beginPath(),i.arc(g+k/2,N+k/2,66,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} 48px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(a.userProfile.username.charAt(0).toUpperCase(),g+k/2,N+k/2);i.restore(),tx(i,p),i.fillStyle=u,i.font=`${m} 14px Geist, sans-serif`,i.textAlign="center",i.textBaseline="alphabetic";let S=a.userProfile.username.length>12?a.userProfile.username.slice(0,12)+"...":a.userProfile.username;i.fillText(S,g+70,N-8),tp(i)}i.textAlign="left",i.textBaseline="alphabetic";let h=n.toDataURL("image/png");o({USD:h,NATIVE:h})}catch(e){console.error("Error generating lobby share image:",e),n(e)}finally{i(!1)}},tf=({color:e,onChange:r,onReset:a,label:l})=>{let{t:o}=(0,b.useTranslation)(),[n,i]=(0,s.useState)(()=>e.slice(1));(0,s.useEffect)(()=>{i(e.slice(1))},[e]);let c=e=>{if(1===e.length)return e.repeat(6);if(2===e.length)return e.repeat(3);if(3===e.length)return[...e].map(e=>e+e).join("");for(;e.length<6;)e+=e[e.length-1];return e};return(0,t.jsxs)("div",{className:"flex h-[32px] flex-row items-center justify-between",children:[(0,t.jsx)("span",{className:"text-[12px] font-normal leading-[16px] text-textSecondary",children:l}),(0,t.jsxs)("div",{className:"group flex h-[32px] w-[160px] cursor-text flex-row items-center gap-[8px] rounded-[4px] border-[1px] border-secondaryStroke pl-[7px] pr-[7px] transition-all duration-150 ease-in-out focus-within:border-secondaryStroke/80 focus-within:bg-secondaryStroke/20 hover:border-secondaryStroke/80 hover:bg-secondaryStroke/20",children:[(0,t.jsx)("div",{className:"flex items-center gap-[8px]",children:(0,t.jsx)("input",{type:"color",value:e,onChange:e=>{r(e.target.value),i(e.target.value.slice(1))},className:"h-[16px] w-[16px] cursor-pointer border-none bg-transparent [&::-webkit-color-swatch-wrapper]:p-0 [&::-webkit-color-swatch]:rounded-[2px] [&::-webkit-color-swatch]:border-none"})}),(0,t.jsx)("div",{className:"flex w-full items-center gap-[4px]",children:(0,t.jsx)("input",{type:"text",value:n,onChange:e=>{let t;i(t=e.target.value.replace(/[^0-9A-F]/gi,"").toUpperCase().slice(0,6)),(6===t.length||3===t.length)&&r("#"+c(t))},onBlur:()=>{if(n.length>0){let e=c(n);r("#"+e),i(e)}else i(e.slice(1))},className:"w-full bg-transparent text-[12px] font-normal uppercase leading-[16px] text-textPrimary placeholder:text-textTertiary focus:outline-none",maxLength:6})}),(0,t.jsx)("button",{type:"button",onClick:a,className:"flex h-[16px] w-[16px] flex-shrink-0 items-center justify-center text-textTertiary transition-colors duration-150 hover:text-textPrimary",title:o("Reset to default color"),children:(0,t.jsx)("i",{className:"ri-refresh-line text-[14px]"})})]})]})},th=({checked:e,onChange:r,label:s})=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("span",{className:"text-[12px] font-normal leading-[16px] text-textSecondary",children:s}),(0,t.jsx)("button",{type:"button",className:`flex h-[20px] w-[40px] items-center rounded-full p-[2px] ${e?"bg-primaryBlue":"bg-secondaryStroke"} transition-colors duration-150 ease-in-out`,onClick:()=>r(!e),children:(0,t.jsx)("div",{className:`h-[16px] w-[16px] transform rounded-full bg-white transition-transform duration-150 ease-in-out ${e?"translate-x-[20px]":"translate-x-0"}`})})]}),tb=({onClose:e})=>{let{t:a}=(0,b.useTranslation)(),[l,o]=(0,s.useState)(!1),[n,i]=(0,r.useAtom)(N.lobbyPnlTextColorAtom),[c,u]=(0,r.useAtom)(N.lobbyPnlPositiveColorAtom),[d,x]=(0,r.useAtom)(N.lobbyPnlNegativeColorAtom),[p,m]=(0,r.useAtom)(N.lobbyPnlShowRectangleAtom),[h,g]=(0,r.useAtom)(N.lobbyPnlRectangleTextColorAtom),[y,v]=(0,r.useAtom)(N.lobbyPnlUseBoldFontAtom),[w,j]=(0,r.useAtom)(N.lobbyPnlUseTextShadowsAtom),[k,S]=(0,s.useState)(n),[A,P]=(0,s.useState)(c),[C,T]=(0,s.useState)(d),[I,M]=(0,s.useState)(p),[$,B]=(0,s.useState)(h),[L,F]=(0,s.useState)(y),[U,E]=(0,s.useState)(w),R=k!==n||A!==c||C!==d||I!==p||$!==h||L!==y||U!==w,_=(0,s.useCallback)(()=>{i(k),u(A),x(C),m(I),g($),v(L),j(U),requestAnimationFrame(()=>{{let e=new CustomEvent("lobby-pnl-customization-changed");window.dispatchEvent(e)}})},[k,A,C,I,$,L,U,i,u,x,m,g,v,j]),D=(0,s.useCallback)(t=>{l&&t.target===t.currentTarget&&(R&&_(),e())},[l,e,R,_]),z=(0,s.useCallback)(()=>{S("#EAEDFF")},[]),H=(0,s.useCallback)(()=>{P("#2FE3AC")},[]),W=(0,s.useCallback)(()=>{T("#EC397A")},[]),V=(0,s.useCallback)(()=>{B("#020307")},[]),O=(0,s.useCallback)(()=>{R&&_(),e()},[_,e,R]),q=(0,s.useCallback)(()=>{e()},[e]);return"u"<typeof document?null:(0,f.createPortal)((0,t.jsx)(ex.motion.div,{...ep.ModalAnimationSettings.backdrop,className:"fixed inset-0 z-[20000] flex items-center justify-center bg-[#090909]/80 backdrop-blur-[2px]",onClick:D,onMouseDown:e=>{e.target===e.currentTarget&&o(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{o(!1)})},children:(0,t.jsxs)(ex.motion.div,{...ep.ModalAnimationSettings.modal,className:"z-[20001] flex min-h-[200px] w-[364px] flex-col rounded-[4px] border-[1px] border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex h-[44px] w-full flex-row items-center justify-between border-b-[1px] border-b-secondaryStroke pl-[16px] pr-[12px]",children:[(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:a("Customize Lobby PNL")}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:q,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary"})})]}),(0,t.jsx)("div",{className:"flex w-full flex-1 flex-col gap-[16px] p-[16px] pb-[20px]",children:(0,t.jsxs)("div",{className:"flex flex-col gap-[16px]",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,t.jsx)("h3",{className:"mb-2 text-[13px] font-medium text-textPrimary",children:a("Text Colors")}),(0,t.jsx)(tf,{color:k,onChange:S,onReset:z,label:a("Main Text")})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,t.jsx)("h3",{className:"mb-2 text-[13px] font-medium text-textPrimary",children:a("PNL Colors")}),(0,t.jsx)(tf,{color:A,onChange:P,onReset:H,label:a("Positive PNL")}),(0,t.jsx)(tf,{color:C,onChange:T,onReset:W,label:a("Negative PNL")})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-[16px]",children:[(0,t.jsx)("h3",{className:"mb-2 text-[13px] font-medium text-textPrimary",children:a("Layout Options")}),(0,t.jsx)(th,{checked:L,onChange:F,label:a("Use bold font weight")}),(0,t.jsx)(th,{checked:U,onChange:E,label:a("Use text shadows")}),(0,t.jsx)(th,{checked:I,onChange:M,label:a("Show colored PNL rectangle")})]}),I&&(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsx)(tf,{color:$,onChange:B,onReset:V,label:a("Rectangle Text Color")})}),(0,t.jsx)("div",{className:"mt-2 flex flex-col gap-[8px]",children:(0,t.jsx)("span",{className:"text-[12px] font-normal leading-[16px] text-textTertiary",children:a("These settings apply to custom lobby banner templates")})})]})}),(0,t.jsx)("div",{className:"flex h-[68px] w-full flex-row items-center justify-end gap-[12px] border-t border-secondaryStroke/50 p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:O,className:"flex h-[32px] flex-1 cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-primaryBlue px-[12px] transition-all duration-[150ms] hover:bg-primaryBlue/80 hover:brightness-110",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:a("Continue")})})})]})}),document.body)},tg=(0,s.memo)(function(){let{t:e}=(0,b.useTranslation)(),a=(0,eb.useAtomCallback)((0,s.useCallback)(e=>e(e_.usdPerSolAtom),[])),l=(0,eb.useAtomCallback)((0,s.useCallback)(e=>e(e_.usdPerBnbAtom),[])),o=(0,eb.useAtomCallback)((0,s.useCallback)(e=>({textColor:e(N.lobbyPnlTextColorAtom),positiveColor:e(N.lobbyPnlPositiveColorAtom),negativeColor:e(N.lobbyPnlNegativeColorAtom),showRectangle:e(N.lobbyPnlShowRectangleAtom),rectangleTextColor:e(N.lobbyPnlRectangleTextColorAtom),useBoldFont:e(N.lobbyPnlUseBoldFontAtom),useTextShadows:e(N.lobbyPnlUseTextShadowsAtom)}),[])),n=(0,r.useAtomValue)(S.myLobbyInfoAtom),i=(0,eb.useAtomCallback)((0,s.useCallback)(e=>e(S.myLobbyInfoAtom),[])),c=(0,r.useAtomValue)(N.userProfileIdAtom),[u,d]=(0,r.useAtom)(N.sharedPnlStyleAtom),[x,p]=(0,s.useState)(!1),[h,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(null),[k,A]=(0,s.useState)(null),[P,C]=(0,s.useState)(!1),[T,I]=(0,s.useState)(!1),[M,$]=(0,s.useState)(!1),B=(0,s.useRef)(null),L=(0,s.useRef)(u),F=(0,s.useCallback)(e=>{let t=i();if(!t)return null;let r=t.aggregateStats?.sol?.totalPnl??0,s=t.aggregateStats?.bnb?.totalPnl??0,n=t.members||[],u=t.name||"Lobby",d=e??t.banner??null;return{lobbyName:u,members:n,solPnl:r,bnbPnl:s,usdPerSol:a(),usdPerBnb:l(),banner:d,currentUserId:c??void 0,customization:o()}},[i,a,l,c,o]),U=(0,s.useCallback)(e=>{switch(u){case"User":default:return tl(e);case"Chart":return ti(e);case"MVP":return td(e);case"Podium":return tm(e)}},[u]),E=(0,s.useCallback)(async()=>{let r=F(k);r?(v(null),p(!0),B.current=r.banner,U({...r,onSuccess:e=>{v(e.USD),g(!1)},onError:r=>{console.error("Error generating lobby share image:",r),w.default.error({message:e("Failed to generate lobby share image"),icon:(0,t.jsx)("i",{className:"ri-error-warning-line text-[16px] text-decrease"})}),p(!1),g(!1)},setShareIsLoading:g})):w.default.error({message:e("No lobby data available"),icon:(0,t.jsx)("i",{className:"ri-error-warning-line text-[16px] text-decrease"})})},[F,k,U,e]);(0,s.useEffect)(()=>{let e=F(k);e&&(null===B.current?B.current=e?.banner??null:e.banner!==B.current&&(B.current=e?.banner,E()))},[F,E,k]),(0,s.useEffect)(()=>{u!==L.current&&E(),L.current=u},[u,E]),(0,s.useEffect)(()=>{let e=()=>{E()};return window.addEventListener("lobby-pnl-customization-changed",e),()=>{window.removeEventListener("lobby-pnl-customization-changed",e)}},[E]);let R=(0,s.useCallback)(()=>{p(!1),v(null)},[]),_=(0,s.useCallback)(()=>{if(!y)return;let e=document.createElement("a");e.href=y,e.download="lobby-pnl.png",e.click()},[y]),D=(0,s.useCallback)(async()=>{if(y)try{let r=(e=>{let[t,r]=e.split(","),s=/data:(.*?);base64/.exec(t),a=s?s[1]:"image/png",l=atob(r),o=l.length,n=new Uint8Array(o);for(let e=0;e<o;e++)n[e]=l.charCodeAt(e);return new Blob([n],{type:a})})(y);await navigator.clipboard.write([new ClipboardItem({[r.type]:r})]),w.default.success({message:e("Image copied to clipboard!"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-[16px] text-primaryBlue"})},{duration:500})}catch{w.default.error(e("Failed to copy image to clipboard"))}},[y,e]),z=(0,s.useCallback)(e=>{P&&e.target===e.currentTarget&&R()},[P,R]),H=(0,s.useCallback)(async r=>{I(!0);try{let s=await new Promise((e,t)=>{let s=new FileReader;s.onload=()=>e(s.result),s.onerror=t,s.readAsDataURL(r)}),a=await tt.axiomApiV2.post("/set-lobby-banner",{image:s});w.default.success({message:e("Lobby banner updated successfully"),icon:(0,t.jsx)("i",{className:"ri-image-line text-[16px] text-primaryBlue"})}),A(a)}catch(r){console.error("Error uploading lobby banner:",r),w.default.error({message:e("Failed to upload lobby banner"),icon:(0,t.jsx)("i",{className:"ri-error-warning-line text-[16px] text-decrease"})})}finally{I(!1)}},[e]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Tooltip,{content:e("Share Lobby PnL"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:E,className:"group/btn flex h-[28px] w-[28px] cursor-pointer items-center justify-center rounded-full bg-gray-500/35 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/40",children:(0,t.jsx)("i",{className:"ri-share-2-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),x&&"u">typeof document&&(0,f.createPortal)((0,t.jsx)(ed.AnimatePresence,{children:(0,t.jsx)(ex.motion.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(2px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:{duration:.35,ease:[.23,.01,.32,1]},className:"fixed inset-0 z-[10000] flex flex-col items-center justify-center bg-[#050505]/80 backdrop-blur-[2px]",onClick:z,onMouseDown:e=>{e.target===e.currentTarget&&C(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{C(!1)})},children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsxs)("div",{className:"overflow-none relative z-[10001] flex items-center justify-center rounded-[20px] border border-transparent p-[20px]",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 animate-pulse-migrate rounded-[8px] border border-primaryStroke/50",style:{"--delay":"300ms"}}),(0,t.jsxs)("div",{className:"relative flex items-center justify-center rounded-[16px] border border-transparent p-[16px]",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 animate-pulse-migrate rounded-[8px] border border-primaryStroke",style:{"--delay":"150ms"}}),(0,t.jsxs)("div",{className:"relative flex items-center justify-center rounded-[8px] border border-transparent p-[4px]",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 animate-pulse-migrate rounded-[8px] border border-primaryStroke",style:{"--delay":"0ms"}}),(0,t.jsx)(ex.motion.div,{initial:{scale:.96,opacity:0,y:8},animate:{scale:1,opacity:1,y:0},exit:{scale:.98,opacity:0,y:4},transition:{duration:.45,ease:[.23,.01,.32,1]},className:"group relative",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("div",{className:"relative rounded-[8px] border-[1px] border-primaryStroke/80",children:h?(0,t.jsx)("div",{className:"flex h-[488px] w-[720px] items-center justify-center",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:"h-[32px] w-[32px] animate-spin rounded-full border-[2px] border-primaryBlue/20 border-t-primaryBlue"})})}):y?(0,t.jsx)(ex.motion.div,{initial:{opacity:0,scale:.99},animate:{opacity:1,scale:1},transition:{duration:.55,ease:[.23,.01,.32,1],delay:.1},children:(0,t.jsx)(m.default,{src:y,alt:e("Lobby PnL"),width:720,height:480,className:"rounded-[8px]"})}):(0,t.jsx)("div",{className:"flex h-[480px] w-[720px] items-center justify-center rounded-[8px] bg-textPrimary/10",children:(0,t.jsx)("span",{className:"text-[12px] font-normal leading-[16px] text-textTertiary",children:e("No Image")})})})})]})]})]}),(0,t.jsxs)(ex.motion.div,{initial:{opacity:0,y:2},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.23,.01,.32,1],delay:.25},className:"z-[10002] flex w-full flex-col items-end justify-end gap-[8px] px-[44px] pb-[36px] sm:h-[120px]",children:[(0,t.jsxs)("div",{className:"flex h-[48px] min-h-[48px] w-full flex-row items-center justify-between gap-[16px] sm:h-[80px] sm:min-h-[80px]",children:[(0,t.jsx)("div",{className:"flex flex-row gap-[8px]",children:n?.banner&&(0,t.jsxs)("div",{onClick:()=>{A(n.banner)},className:"relative flex h-[48px] w-[71px] flex-shrink-0 cursor-pointer flex-row gap-[8px] overflow-hidden rounded-[4px] sm:h-[80px] sm:w-[118px]",children:[(0,t.jsx)("div",{className:`absolute inset-0 z-10 cursor-pointer rounded-[4px] border ${k===n.banner||null===k&&n.banner?"border-primaryBlueHover bg-primaryStroke/10":"border-primaryStroke/50 transition-colors duration-[125ms] ease-in-out hover:border-primaryStroke/80 hover:bg-primaryStroke/10"}`}),(0,t.jsx)(m.default,{src:n.banner,alt:"Custom",width:118,height:80,className:`h-full w-full rounded-[4px] object-cover ${k!==n.banner&&null!==k?"grayscale-[30%] filter":""}`,draggable:!1})]})}),(0,t.jsxs)("label",{className:`group flex h-[48px] w-[71px] flex-col items-center justify-center gap-[3px] rounded-[4px] border border-gray-500 border-opacity-[0.15] bg-gray-500 bg-opacity-[0.15] backdrop-blur-[3px] transition-all duration-[125ms] ease-in-out hover:border-opacity-[0.20] hover:bg-opacity-[0.20] sm:h-[80px] sm:w-[118px] ${T?"pointer-events-none cursor-not-allowed opacity-60":"cursor-pointer"}`,children:[(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&H(t),e.target.value=""},disabled:T}),(0,t.jsx)("i",{className:`${T?"ri-loader-4-line animate-spin":n?.banner?"ri-arrow-left-right-line":"ri-add-line"} text-[17px] text-white/80 transition-colors duration-[125ms] ease-in-out`}),(0,t.jsx)("span",{className:"hidden text-[11px] font-medium text-white/80 transition-colors duration-[125ms] ease-in-out sm:block",children:T?e("Uploading..."):n?.banner?e("Change upload"):e("Upload image")}),(0,t.jsx)("span",{className:"text-[9px] font-medium text-white/80 transition-colors duration-[125ms] ease-in-out sm:text-[11px]",children:e("max 0.5MB")})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-[8px]",children:[(0,t.jsx)("div",{className:"flex flex-row gap-[4px]",children:N.SHARED_PNL_STYLES.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>d(e),className:`group cursor-pointer ${u===e?"bg-gray-500/25":"bg-gray-500/5 hover:bg-gray-500/10"} flex h-[32px] flex-row items-center justify-center gap-[8px] rounded-[4px] pl-[8px] pr-[10px] transition-all duration-[125ms] ease-in-out`,children:[(0,t.jsx)("i",{className:`${N.SHARED_PNL_STYLES_ICONS[e]} text-[14px] ${u===e?"text-white/80":"text-gray-400/80"}`}),(0,t.jsx)("span",{className:`text-[14px] font-medium ${u===e?"text-white/80":"text-gray-400"}`,children:e})]},e))}),(0,t.jsxs)("button",{type:"button",onClick:()=>$(!0),className:"group flex h-[32px] cursor-pointer flex-row items-center justify-center gap-[8px] rounded-[4px] bg-gray-500/15 pl-[8px] pr-[10px] backdrop-blur-[8px] transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20",children:[(0,t.jsx)("i",{className:"ri-paint-brush-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"}),(0,t.jsx)("span",{className:"hidden text-[14px] font-medium text-white/80 transition-colors duration-[125ms] ease-in-out sm:block",children:e("Customize")})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[8px]",children:[(0,t.jsxs)("button",{type:"button",onClick:_,disabled:h||!y,className:`group flex h-[32px] flex-row items-center justify-center gap-[8px] rounded-[4px] bg-gray-500/15 pl-[8px] pr-[10px] transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20 ${h||!y?"cursor-not-allowed opacity-60":"cursor-pointer"}`,children:[(0,t.jsx)("i",{className:"ri-download-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"}),(0,t.jsx)("span",{className:"text-[14px] font-medium text-white/80 transition-colors duration-[125ms] ease-in-out",children:e("Download")})]}),(0,t.jsxs)("button",{type:"button",onClick:D,disabled:h||!y,className:`group flex h-[32px] flex-row items-center justify-center gap-[8px] rounded-[4px] bg-gray-500/15 pl-[8px] pr-[10px] transition-all duration-[125ms] ease-in-out hover:bg-gray-500/20 ${h||!y?"cursor-not-allowed opacity-60":"cursor-pointer"}`,children:[(0,t.jsx)("i",{className:"ri-file-copy-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"}),(0,t.jsx)("span",{className:"text-[14px] font-medium text-white/80 transition-colors duration-[125ms] ease-in-out",children:e("Copy")})]})]})]})]})]})})}),document.body),M&&(0,t.jsx)(tb,{onClose:()=>$(!1)})]})}),ty=(0,s.memo)(function({isOpen:e,onClose:r}){let{t:a}=(0,b.useTranslation)(),[l,o]=(0,s.useState)(!1),{resetPnl:i}=(0,n.useLobbyApi)(),c=(0,s.useCallback)(()=>{i()},[i]),u=(0,s.useCallback)(()=>{c(),r()},[c,r]),d=(0,s.useCallback)(e=>{l&&e.target===e.currentTarget&&r()},[l,r]);return!e||"u"<typeof document?null:(0,f.createPortal)((0,t.jsx)(ex.motion.div,{...ep.ModalAnimationUtility.backdrop,className:"fixed inset-0 z-[200] flex items-center justify-center bg-[#090909]/40",onClick:d,onMouseDown:e=>{e.target===e.currentTarget&&o(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{o(!1)})},children:(0,t.jsx)(ex.motion.div,{className:"relative max-h-[880px] w-[452px]",onClick:e=>e.stopPropagation(),...ep.ModalAnimationUtility.modal,children:(0,t.jsxs)("div",{className:"flex h-full w-full flex-col rounded-[4px] border-[1px] border-secondaryStroke bg-backgroundTertiary shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex h-[44px] w-full flex-row items-center justify-between border-b-[1px] border-b-secondaryStroke pl-[16px] pr-[12px]",children:[(0,t.jsx)("span",{className:"text-[14px] font-medium leading-[20px] tracking-[-0.02em] text-textPrimary",children:a("Reset Lobby PNL")}),(0,t.jsx)("button",{type:"button",className:"group flex h-[24px] w-[24px] flex-row items-center justify-center rounded-[4px] p-[4px] transition-colors duration-150 ease-in-out hover:bg-secondaryStroke/20",onClick:r,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary"})})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[16px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsx)("div",{className:"flex w-full flex-row items-center justify-start gap-[16px]",children:(0,t.jsx)("span",{className:"text-[14px] font-normal leading-[1.2rem] text-textSecondary",children:a("This will reset the PNL for all users in the lobby. This action cannot be undone.")})})})})}),(0,t.jsx)("div",{className:"flex h-[68px] w-full flex-row items-center justify-end border-t border-secondaryStroke/50 p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:u,className:"flex h-[32px] flex-1 cursor-pointer flex-row items-center justify-center gap-[8px] rounded-full bg-decrease px-[12px] transition-all duration-[125ms] hover:bg-decreaseHover",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:a("Reset PNL")})})})]})})}),document.body)}),tv=(0,s.memo)(function(){let{t:e}=(0,b.useTranslation)(),a=(0,r.useAtomValue)(eT.currentChainAtom),[l,o]=(0,s.useState)(!1),n=(0,r.useAtomValue)(eW.userLobbySettingsAtom),i=(0,r.useSetAtom)(eW.userLobbySettingsAtom),c=(0,r.useAtomValue)(e_.usdPerSolAtom),u=(0,r.useAtomValue)(e_.usdPerBnbAtom),d=(0,r.useAtomValue)(S.myLobbyInfoAtom),x=(0,r.useAtomValue)(N.userProfileIdAtom),p=d?.leaderUserId===x,m=(0,r.useAtomValue)(N.lobbyPnlTextColorAtom),f=(0,r.useAtomValue)(N.lobbyPnlPositiveColorAtom),h=(0,r.useAtomValue)(N.lobbyPnlNegativeColorAtom),g=(0,r.useAtomValue)(N.lobbyPnlUseBoldFontAtom),y=d?.aggregateStats?.sol?.totalBalance??0,v=d?.aggregateStats?.bnb?.totalBalance??0,w=d?.aggregateStats?.sol?.totalPnl??0,k=d?.aggregateStats?.bnb?.totalPnl??0,A="#EAEDFF"===m,P="#2FE3AC"===f&&"#EC397A"===h,C=(0,s.useMemo)(()=>{if(A)return;let e=m.replace("#",""),t=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),s=parseInt(e.slice(4,6),16);return`rgba(${t}, ${r}, ${s}, 0.5)`},[m,A]),T="text-[24px]",I="text-[14px]",M=g?"font-bold":"font-medium",{dispalyedBalanceSol:$,dispalyedBalanceBnb:B,dispalyedPnlSol:L,dispalyedPnlBnb:F}=(0,s.useMemo)(()=>({dispalyedBalanceSol:n.showBalanceInUsd?y*c:y,dispalyedBalanceBnb:n.showBalanceInUsd?v*u:v,dispalyedPnlSol:n.showBalanceInUsd?w*c:w,dispalyedPnlBnb:n.showBalanceInUsd?k*u:k}),[y,v,w,k,c,u,n.showBalanceInUsd]),U="sol"===a?L:F,E=(0,s.useCallback)(()=>{i(e=>({...e,showBalanceInUsd:!e.showBalanceInUsd}))},[i]),R=(0,s.useCallback)(()=>{o(!0)},[]),_=(0,s.useCallback)(()=>{o(!1)},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"absolute left-0 right-0 top-[12px] z-10 flex w-full items-center justify-between gap-[16px] px-[12px] opacity-0 transition-opacity duration-0 ease-in-out group-hover/banner:opacity-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-start gap-[8px]",children:[(0,t.jsx)(tg,{}),(0,t.jsx)(j.Tooltip,{content:e(n.showBalanceInUsd?`Switch to ${eT.chainToInfoMap[a].ticker}`:"Switch to USD"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:E,className:"group/btn flex h-[28px] w-[28px] cursor-pointer items-center justify-center rounded-full bg-gray-500/35 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/40",children:(0,t.jsx)("i",{className:"ri-exchange-dollar-line text-[14px] transition-colors duration-[125ms] ease-in-out",style:{color:n.showBalanceInUsd?eT.chainToInfoMap[a].color:"rgba(255, 255, 255, 0.8)"}})})})]}),p&&(0,t.jsx)(j.Tooltip,{content:e("Reset PNL"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:R,className:"group/btn flex h-[28px] w-[28px] cursor-pointer items-center justify-center rounded-full bg-gray-500/35 transition-all duration-[125ms] ease-in-out hover:bg-gray-500/40",children:(0,t.jsx)("i",{className:"ri-reset-left-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[16px] p-[12px] pb-[4px]",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-evenly gap-[16px]",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center gap-[3px]",children:[!n.showBalanceInUsd&&(0,t.jsx)("div",{className:"flex h-[24px] w-[24px] flex-shrink-0 items-center justify-center",children:(0,t.jsx)(eF.default,{src:eT.chainToInfoMap[a].icon,alt:eT.chainToInfoMap[a].ticker,width:24,height:24,className:"opacity-100"})}),(0,t.jsx)("span",{className:`${T} opacity-100 ${M} flex flex-row items-center gap-1 ${A?"text-textPrimary":""}`,style:A?void 0:{color:m},dangerouslySetInnerHTML:{__html:`${n.showBalanceInUsd?"$":""}${(0,ek.getFormattedNumber)("sol"===a?$:B,4)}`}})]}),(0,t.jsx)("span",{className:`${I} tracking-[-0.02rem] opacity-100 ${g?"font-medium":"font-normal"} ${A?"text-textTertiary":""}`,style:A?void 0:{color:C},children:e("Balance")})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end justify-center",children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center gap-[3px]",children:[!n.showBalanceInUsd&&(0,t.jsx)("div",{className:"flex h-[24px] w-[24px] flex-shrink-0 items-center justify-center",children:(0,t.jsx)(eF.default,{src:eT.chainToInfoMap[a].icon,alt:eT.chainToInfoMap[a].ticker,width:24,height:24,className:"opacity-100"})}),(0,t.jsx)("span",{className:`${T} opacity-100 ${M} flex flex-row items-center ${P?U<0?"text-decrease":"text-increase":""}`,style:P?void 0:{color:U<0?h:f},dangerouslySetInnerHTML:{__html:`${U<0?"-":"+"}${n.showBalanceInUsd?"$":""}${(0,ek.getFormattedNumber)(Math.abs(U),4)}`}})]}),(0,t.jsx)("span",{className:`${I} tracking-[-0.02rem] opacity-100 ${g?"font-medium":"font-normal"} ${A?"text-textTertiary":""}`,style:A?void 0:{color:C},children:e("PNL")})]})]})})]}),(0,t.jsx)(ty,{isOpen:l,onClose:_})]})}),tw=(0,s.memo)(function({isWindowModal:e=!1}){let s=(0,r.useAtomValue)(S.myLobbyInfoAtom),a=s?.banner??null,l=e?"border-secondaryStroke":"border-primaryStroke";return(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"group/banner relative flex-shrink-0 overflow-hidden backdrop-blur-[16px] backdrop-filter",children:[a&&(0,t.jsx)("div",{className:"absolute inset-0 z-0",children:(0,t.jsx)(m.default,{src:a,alt:"Lobby banner",fill:!0,className:"object-cover",unoptimized:!0,draggable:!1})}),a&&(0,t.jsx)("div",{className:"absolute inset-0 z-[1] bg-black/10 backdrop-blur-[0px]"}),(0,t.jsx)("div",{className:"relative z-[2] flex-shrink-0",children:(0,t.jsx)(tv,{})}),(0,t.jsx)("div",{className:"relative z-[2] flex-shrink-0 pt-[0px]",children:(0,t.jsx)(e7,{isWindowModal:e})})]}),(0,t.jsx)("div",{className:`flex min-h-0 w-full flex-1 overflow-hidden border-t ${l}`,children:(0,t.jsx)(e5,{isWindowModal:e})})]})}),tj=(0,s.memo)(function({isWindowModal:e=!1}){let o=(0,r.useAtomValue)(a.usernameAtom),n=(0,r.useAtomValue)(l.socialFriendsOpenAtom),i=(0,r.useSetAtom)(l.socialFriendsOpenAtom),c=(0,s.useCallback)(()=>{i(!1)},[i]);return o?(0,t.jsxs)("div",{className:"relative h-full overflow-hidden",children:[(0,t.jsx)("div",{className:"flex h-full w-full flex-col overflow-hidden",children:(0,t.jsx)(tw,{isWindowModal:e})}),(0,t.jsx)("button",{type:"button",className:`absolute inset-0 z-20 h-full w-full cursor-pointer bg-[#090909]/80 backdrop-blur-[2px] transition-all duration-200 ${n?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"}`,style:{transitionTimingFunction:"cubic-bezier(0.32, 0.72, 0, 1)"},onClick:c,"aria-label":"Close sidebar"}),(0,t.jsx)("div",{className:`absolute right-0 top-0 z-30 h-full w-[95%] transition-transform duration-[250ms] ${n?"translate-x-0":"translate-x-full"}`,style:{transitionTimingFunction:"cubic-bezier(0.32, 0.72, 0, 1)"},children:(0,t.jsx)(p.FriendsRightSidebar,{isOpen:n,isWindowModal:e})})]}):(0,t.jsx)(ea,{})}),tk=(0,s.memo)(function(){let e=(0,r.useAtomValue)(a.userIdAtom),t=(0,r.useAtomValue)(a.usernameAtom),{data:l}=(0,o.useSocialInfo)(e,t),{initializeSocialData:p}=(0,i.useSocialTracker)(),{initializeLobby:m}=(0,n.useLobbyApi)();return(0,s.useEffect)(()=>{l&&(p(l),m())},[l,p,m]),(0,c.useFriendWebsocket)(),(0,u.useUpdateSocialPrice)(),(0,x.useSocialTransactionsWebsocket)(),(0,d.useUpdateWallets)(),null});e.s(["SocialTrackerBody",0,tj,"SocialTrackerUpdater",0,tk],337587)}]);

//# debugId=242a0768-e809-6815-84ba-7f0768e09fc5